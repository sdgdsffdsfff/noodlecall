var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijcarousel",i="wijmo-wijcarousel-",s="wijmo-wijcarousel ",o=i+"list",u=i+"item ",a=i+"clip",f=i+"current",l=i+"horizontal-multi",c=i+"horizontal",h=i+"button",p=i+"vertical-multi",d=i+"vertical",v=i+"button-next",m=i+"button-previous",g=i+"preview",y="<a><span></span></a>",b=".wijmo-wijcarousel-pager,."+h+",."+v+",."+m,w="<div></div>",E='<li class="wijmo-wijcarousel-page"><a></a></li>',S="li.wijmo-wijcarousel-page",x=".wijmo-wijcarousel-text,.wijmo-wijcarousel-caption",T=1,N=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._handleDisabledOption=function(e,t){var n=this,r=n.options;n.pager&&!n.pager.is(":hidden")&&n.pager.wijpager("option","disabled",e),n._applyBtnClass()},t.prototype._initStates=function(e,t){var n=this;n.count=0,n.currentIdx=e.start,n.timeout=null,n.isHorizontal=e.orientation==="horizontal",n.width=t.width()||640,n.height=t.height()||480,n.offset=0},t.prototype._set_showControlsOnHover=function(e){var t=this;t.container.unbind("mouseenter."+t.widgetName),t.container.unbind("mouseleave."+t.widgetName),e&&t.container.bind("mouseenter."+t.widgetName,function(){if(t.options.disabled)return;t._showControls()}).bind("mouseleave."+t.widgetName,function(){if(t.options.disabled)return;t._hideControls()}),t.container.find(b).stop(!0,!0)[e?"hide":"show"]()},t.prototype._create=function(){var e=this,t=e.options,r=e.element;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),e._initStates(t,r),e._createDom(e.isHorizontal),e.list.bind("click."+e.widgetName,n.proxy(e._itemClick,e)),t.showControlsOnHover&&(e.container.bind("mouseenter."+e.widgetName,function(){if(e.options.disabled)return;e._showControls()}).bind("mouseleave."+e.widgetName,function(){if(e.options.disabled)return;e._hideControls()}),e.container.find(b).hide()),t.loadCallback&&n.isFunction(t.loadCallback)&&e._trigger("loadCallback",null,e);if(t.disabledState){var i=t.disabled;e.disable(),t.disabled=i}else t.auto&&e.play();t.disabled&&e.disable();try{t.display=parseFloat(t.display)}catch(s){t.display=1}e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.refresh(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijcarousel")},t.prototype._showControls=function(){this.container.find(b).stop(!0,!0).fadeIn(600,function(){n(this).css("opacity","")})},t.prototype._hideControls=function(){this.container.find(b).stop(!0,!0).fadeOut(600)},t.prototype._applyContainerStyle=function(e,t){var n=this,r=n.options,i={},s=n.list,o=0,u,a=0,f=e?"left":"top",l=0,c,h=e?"width":"height";u=n.itemBound[e?"w":"h"],n.count=n.list.children("li").length,o=n.count*u,n.list[h](o),n.clip[h](r.display*u),n.clip[e?"height":"width"](n.itemBound[e?"h":"w"]);if(!r.loop)i[f]=-u*n.currentIdx,s.css(i);else{c=s.find(">li:first"),r.preview&&!!t&&(c=c.next()),l=c.data("itemIndex");for(l;l<n.currentIdx;l++)s.children("li:first").appendTo(s);if(r.preview){if(!t)for(l=0;l<T;l++)s.children("li:last").prependTo(s);a=-u*T}i[f]=a,s.css(i)}},t.prototype._applyListStyle=function(){var e=this,t=e.options,n=t.orientation==="horizontal",r=0,i,s=n?"width":"height";e.itemBound=e._getItemBound(),i=e.itemBound[n?"w":"h"],r=e.count*i,e.list[s](r)},t.prototype._createButtons=function(e,t){var r=this,i=r.options,s,o=i.wijCSS.stateDisabled;n.each(["prevBtn","nextBtn"],function(u,a){var f=i[a+"Class"],l=a==="nextBtn",c=l?"next":"previous",h=l?v:m,p=l?t:e;f&&f.defaultClass?(o=f.disableClass||o,s=f.hoverClass,r[a]=n('<a class="'+i.wijCSS.stateDefault+'"></a>').addClass(f.defaultClass).mouseover(function(){n(this).hasAllClasses(o)||n(this).addClass(s)}).mouseout(function(){n(this).hasAllClasses(o)||n(this).removeClass(s)})):r[a]=n(r._createBtn(h,p)),r[a].bind("click."+r.widgetName,function(e){if(r.options.disabled)return;var t=n(this);if(t.hasAllClasses(i.wijCSS.stateDisabled))return;r[c].call(r)}).appendTo(r.container);if(n.browser.msie&&r.clip.find("iframe").length>0){var d=r.element.children("iframe.bgiframe."+a+"Frame");d.length===0&&(d=n('<iframe class="bgiframe '+a+'Frame" frameborder="0" tabindex="-1" src="javascript: false;" style="position:absolute;top:0px;left:0px;opacity:0;" />'),d.width(r[a].outerWidth()),d.height(r[a].outerHeight()),r.container.append(d))}})},t.prototype._applyBtnClass=function(){var e=this,t=e.options,r=t.wijCSS.stateDisabled,i=t.wijCSS.stateHover;n.each(["prevBtn","nextBtn"],function(n,s){var o=t[s+"Class"],u,a=e[s];o&&(r=o.disableClass||r,i=o.hoverClass||i),u=s==="prevBtn"?e.currentIdx<=0:e.currentIdx+t.display>=e.count,u&&!t.loop||t.disabled?a.removeClass(i).addClass(r):a.hasAllClasses(r)&&a.removeClass(r)})},t.prototype._applyBtnStyle=function(e){var t=this,r=0,i,s=t.options.wijCSS,o={collision:"none",of:t.container,my:e?"right{offset} center":"center bottom{offset}",at:e?"right center":"center bottom"},u={collision:"none",of:t.container,my:e?"left{offset} center":"center top{offset}",at:e?"left center":"center top"},a=t.options.buttonPosition==="inside",f,l,c=["cornerBottom","cornerTop","cornerRight","cornerLeft"],h=(e?1:0)*2+(a?1:0),p=(e?1:0)*2+(a?0:1),d=function(e,t,r,i,s){var o="";e.removeClass(t).addClass(r),!isNaN(i)&&i!==0&&(i>0?o="+"+i:o="-"+ -i),s.my=s.my.replace(/\{offset\}/,o),e.position(s);if(n.browser.msie){var u=e.next("iframe.bgiframe");u.length&&(u.css("left",e.css("left")),u.css("top",e.css("top")))}};r=e?t.prevBtn.width():t.prevBtn.height(),i=a?0:r,f=s[c[h]],l=s[c[p]],d(t.nextBtn,l,f,i,o),d(t.prevBtn,f,l,-i,u),t._applyBtnClass()},t.prototype._createDom=function(e){var t=this,r=t.options,i=t.element,u,a,f,h;if(i.is("div"))t.list=i.children("ul:eq(0)"),t.container=t.element,t.list.length||(t.list=n("<ul></ul>").appendTo(t.container));else{if(!i.is("ul"))return;t.list=i,t.container=i.parent()}t.itemBound=t._getItemBound(),e?(u=r.display>1&&!r.preview?l:c,a=r.wijCSS.iconArrowRight,f=r.wijCSS.iconArrowLeft):(u=r.display>1&&!r.preview?p:d,a=r.wijCSS.iconArrowDown,f=r.wijCSS.iconArrowUp),t.list.addClass(o).addClass(r.wijCSS.helperClearFix),h=s+r.wijCSS.widget+" "+u+" "+(r.preview?g+" ":"")+(r.display>1?r.wijCSS.content+" "+r.wijCSS.cornerAll:""),t.container.addClass(h),t._createItems(e),t._createClip(e),t._applyContainerStyle(e),t._createButtons(f,a),t._applyBtnStyle(e),r.preview&&t._createPreview(),r.showTimer&&t._createTimer(),r.showPager&&t._createPager(),r.showControls&&t._createControls()},t.prototype._createPreview=function(){var e=this,t=e.options,n,r,i=t.orientation==="horizontal",s=i?"left":"top",o=i?"right":"bottom",u,a;r=e.itemBound[i?"w":"h"],n=e.offset=Math.round(r/4),u=t.display*r+n*2,e.clip[i?"width":"height"](u),e.list.css(s,function(e,t){return parseFloat(t)+n}),e.clip.css(s,function(e,t){return-n}),e.container.css("margin-"+s,n+"px").css("margin-"+o,n+"px"),e.list.find(x).hide();for(a=0;a<t.display;a++)e._getItemByIndex(e.currentIdx+a).find(x).show()},t.prototype._createItemsFromData=function(e){var t=this;if(!n.isArray(e)||!e.length||!n.isPlainObject(e[0])||n.isEmptyObject(e[0]))return;t.list.empty(),n.each(e,function(e,r){var i;if(!n.isPlainObject(r))return!0;i=t._generateMarkup(r),t.list.append(i)})},t.prototype._generateMarkup=function(e){var t,r;if(!n.isPlainObject(e))return;return t=n("<li></li>"),typeof e.linkUrl=="string"&&e.linkUrl&&(r=n("<a>").attr("href",e.linkUrl),r.appendTo(t)),typeof e.imageUrl=="string"&&e.imageUrl&&n("<img>").attr("src",e.imageUrl).appendTo(r||t),typeof e.caption=="string"&&e.caption&&n("<span>").html(e.caption).appendTo(t),t},t.prototype._createItems=function(e){var t=this,r,i,s=t.options,o,u;if(t.list){t._createItemsFromData(s.data),t.list.children("li").each(function(e,r){var i=n(r);t._createItem(i,e)}),o=t.list.children("li").eq(t.currentIdx).addClass(f);if(s.preview&&s.display>1){r=u=o;for(i=0;i<s.display-1;i++)u=u.next(),r=r.add(u);r.find("div.wijmo-wijcarousel-mask").css({opacity:0})}}},t.prototype._createItem=function(e,t){var r=this,i=r.options,s,o;return s=e.addClass(u).addClass(i.wijCSS.helperClearFix).find("img:eq(0)").attr("role","img").addClass("wijmo-wijcarousel-image"),r._applyItemBound(e),o=e.children("span:eq(0)").hide(),r._createCaption(e,s,o),i.preview&&n('<div class="wijmo-wijcarousel-mask">').appendTo(e),e.data("itemIndex",t),e},t.prototype._applyItemBound=function(e){var t=this,n=t.itemBound.w,r=t.itemBound.h;if(!t.itemWidth||!t.itemHeight)e.width(n).height(r),t.itemWidth=n-(e.outerWidth(!0)-n),t.itemHeight=r-(e.outerHeight(!0)-r);e.width(t.itemWidth).height(t.itemHeight)},t.prototype._createCaption=function(e,t,r){var i=this,s=i.options,o,u,a,f,l;s.showCaption&&(o=r.html()||t.attr("title"),o&&o.length&&(a=n("<span></span>").html(o),f=n(w).addClass([s.wijCSS.helperClearFix,"wijmo-wijcarousel-caption"].join(" ")).appendTo(e),u=n(w).addClass([s.wijCSS.helperClearFix,s.wijCSS.content,"wijmo-wijcarousel-text"].join(" ")).append(a).appendTo(e),i._applyCaptionStyle(f,u)))},t.prototype._applyCaptionStyle=function(e,t){var r=e.add(t),i;r.width(this.itemWidth),n.browser.webkit?(i=t.children("span").css("display","inline-block").height(),t.children("span").css("display","")):i=t.children("span").height(),r.height(i)},t.prototype._showCaption=function(e,t){var n=this,r=n._getItemByIndex(e),i=r.find(".wijmo-wijcarousel-text"),s=r.find(".wijmo-wijcarousel-caption");i.length&&i.fadeIn(300,function(){e<t&&n._showCaption(e+1,t)}),s.length&&(s.show(),s.animate({opacity:.5},300))},t.prototype._hideCaption=function(){this.element.find(x).hide()},t.prototype._createClip=function(e){this.clip=this.list.wrap("<div></div>").parent().addClass(a)},t.prototype._createBtn=function(e,t){var r=n(y),i=this.options;return r.addClass(i.wijCSS.stateDefault+" "+e).attr("role","button").mouseover(function(){n(this).hasAllClasses(i.wijCSS.stateDisabled)||n(this).addClass(i.wijCSS.stateHover)}).mouseout(function(){n(this).hasAllClasses(i.wijCSS.stateDisabled)||n(this).removeClass(i.wijCSS.stateHover)}).children("span:eq(0)").addClass(i.wijCSS.icon+" "+t),r},t.prototype._createControls=function(){var e=this,t=e.options,r={collision:"none",of:e.container,my:"center bottom",at:"center bottom"};t.control&&(e.controls=n(t.control).css({position:"absolute"}).appendTo(e.container),n.extend(r,t.controlPosition),e.controls.position(r))},t.prototype._createTimer=function(){var e=this,t=e.options;e._createPausePlay(),e.progressBar=n("<div></div>").addClass("wijmo-wijcarousel-timerbar-inner "+t.wijCSS.cornerAll).css({width:"0%"}).attr("role","progressbar"),e.timer=n("<div></div>").addClass("wijmo-wijcarousel-timerbar "+t.wijCSS.cornerAll).appendTo(e.container).append(e.progressBar).append(e.playPauseBtn)},t.prototype._createPausePlay=function(){var e=this,t=e.options;e.playPauseBtn=n(e._createBtn(h,t.auto?t.wijCSS.iconPause:t.wijCSS.iconPlay)).bind("click."+e.widgetName,function(){if(e.options.disabled)return;var r=n(this).children("span:eq(0)");e[r.hasAllClasses(t.wijCSS.iconPlay)?"play":"pause"]()})},t.prototype._createPagingItem=function(e,t,r,i){var s=n(E).attr({role:"tab","aria-label":i+1,title:i+1}).addClass(this.options.wijCSS.stateDefault),o,u;if(e)s.addClass("wijmo-wijcarousel-dot");else{if(!(t&&t.images&&t.images[i]))return;o=t.imageWidth,u=t.imageHeight,o&&u&&s.width(o).height(u),s.children("a").append(n("<img>").attr("src",t.images[i]))}r.append(s)},t.prototype._createPaging=function(e){var t=this,r=t.options,i,s,o,u=r.thumbnails,a=e==="dots";t.container.append(t.pager=n('<div><ul class="wijmo-list '+r.wijCSS.cornerAll+" "+r.wijCSS.helperClearFix+' role="tablist"></ul></div>')),a||t.pager.addClass("wijmo-wijcarousel-thumbnails"),s=t.pager.children("ul.wijmo-list");for(i=0;i<t.count;i++)t._createPagingItem(a,u,s,i);o=t.pager.find("li").eq(t.currentIdx),o.length&&t._activePagerItem(o),u&&n.each(["mousedown","mouseup","mouseover","mouseout","click"],function(e,t){var n=u[t];n&&typeof n=="string"&&window[n]&&(u[t]=window[n])}),t.pager.bind("mouseover."+t.widgetName,function(e){if(t.options.disabled)return;t._pageingEvents(e,"mouseover",u,a,function(e){e.addClass(r.wijCSS.stateHover)})}).bind("mouseout."+t.widgetName,function(e){if(t.options.disabled)return;t._pageingEvents(e,"mouseout",u,a,function(e){e.removeClass(r.wijCSS.stateHover)})}).bind("click."+t.widgetName,function(e){if(t.options.disabled)return;t._pageingEvents(e,"click",u,a,function(e){t.scrollTo(e.index()),t._activePagerItem(e)})}),a||n.each(["mousedown","mouseup"],function(e,r){n.isFunction(u[r])&&t.pager.bind(r,function(e){if(t.options.disabled)return;var i=n(e.target).closest(S);i.length&&u[r].call(i,e)})})},t.prototype._pageingEvents=function(e,t,r,i,s){var o=n(e.target).closest(S);o.length&&(n.isFunction(s)&&s.call(e,o),!i&&n.isFunction(r[t])&&r[t].call(o,e))},t.prototype._activePagerItem=function(e){var t=this.options.wijCSS.stateActive;e.addClass(t).attr("aria-selected","true").siblings("li").removeClass(t).removeAttr("aria-selected")},t.prototype._createWijSlider=function(){var e=this,t=e.options.sliderOrientation,r={orientation:t,range:!1,min:0,max:e.count-1,step:1,value:e.currentIdx,buttonClick:function(t,n){var r=n.value;e.scrollTo(r)},slide:function(t,n){var r=n.value;e.scrollTo(r)}},i=n("<div></div>").css("margin-bottom","10px").css(t==="horizontal"?"width":"height","200px").appendTo(e.container);e.pager=i.wijslider(r).parent().wrap("<div>").parent().addClass("wijmo-wijcarousel-slider-wrapper")},t.prototype._createWijPager=function(){var e=this,t={pageCount:e.count,pageIndex:e.currentIdx,pageButtonCount:e.count,mode:"numeric",pageIndexChanged:function(t,n){var r=n.newPageIndex;e.scrollTo(r)}},r=n("<div></div>").appendTo(e.container);e.pager=r.wijpager(t).css({position:"absolute"})},t.prototype._createPager=function(){var e=this,t=e.options,r={collision:"none",of:e.container,my:"right top",at:"right bottom"};if(t.pagerType==="numbers")e._createWijPager();else if(t.pagerType==="dots"||t.pagerType==="thumbnails")e._createPaging(t.pagerType),e.pager.css({position:"absolute"});else{if(!n.wijmo.wijslider||t.pagerType!=="slider")return;e._createWijSlider(),t.sliderOrientation!=="horizontal"&&(r.my="left center",r.at="right center")}e.pager.width(e.pager.width()+1),n.extend(r,t.pagerPosition),t.pagerPosition=r,e.pager.addClass("wijmo-wijcarousel-pager").position(r)},t.prototype._setOption=function(e,t){var r=this,i=r.options,s,o,u,a=i.orientation==="horizontal";if(e==="pagerPosition"||e==="animation"||e==="controlPosition")n.extend(!0,i[e],t);else{u=i[e],n.Widget.prototype._setOption.apply(r,arguments);switch(e){case"showControls":case"showPager":case"showTimer":if(t===u)break;s=e.replace(/show/i,"").toLowerCase(),o=e.replace(/show/i,"_create"),t===!0?r[s]?r[s].jquery&&r[s].show():r[o]():r[s].hide();break;case"loop":case"orientation":case"display":case"preview":t!==u&&(r._wijdestroy(),r._create());break;case"data":r._createItems(a),r._applyContainerStyle(a),r._applyBtnClass(),i.showPager&&r._createPager();break;case"showCaption":t?r._createItems(a):r.element.find(x).remove();break;case"buttonPosition":r._applyBtnStyle(a);break;case"pagerType":t!==u&&(r.pager&&r.pager.jquery&&(r.pager.remove(),r.pager=null),r._createPager());break;case"disabled":r._handleDisabledOption(t,r.element);break;case"showControlsOnHover":r._set_showControlsOnHover(t);break;default:}}},t.prototype._getItemBound=function(){var e={},t=this,n=t.options;return n.orientation==="horizontal"?e={w:Math.round(t.width/n.display),h:t.height}:e={w:t.width,h:Math.round(t.height/n.display)},e},t.prototype._stopAnimation=function(){var e=this;e.isPlaying&&e.progressBar&&e.progressBar.stop().css({width:"0%"}),e.list.stop(!0,!0)},t.prototype._itemClick=function(e){var t=n(e.target),r=this,i=r.options,s=r.currentIdx,o=t.closest("li."+u),a=o.data("itemIndex"),f,l;if(r.options.disabled){e.preventDefault();return}if(o.length>0){if(i.preview&&a<s||a>s+i.display-1)f=r._getItemByIndex(s).index(),l=o.index()>f?"next":"previous",r[l]();r._trigger("itemClick",e,{index:a,el:o})}},t.prototype._wijdestroy=function(){var e=this,t=e.options.wijCSS;e.container.removeClass("wijmo-wijcarousel "+t.widget).removeClass("wijmo-wijcarousel-horizontal").removeClass("wijmo-wijcarousel-vertical"),e.timeout&&(e.list.stop(!0),window.clearTimeout(e.timeout),e.timeout=null),e.options.showTimer&&e.progressBar&&e.progressBar.stop(!0),e.list.unwrap().removeClass("wijmo-wijcarousel-list").removeClass(t.helperClearFix).unbind("."+e.widgetName).removeAttr("style").children("li").each(function(e,r){var i=n(r);i.removeClass("wijmo-wijcarousel-item").removeClass(t.helperClearFix).removeClass(f),i.children("img").removeClass("wijmo-wijcarousel-image"),i.children(x).remove(),i.css({width:"",height:""}),i.removeData("itemIndex")}),e.itemWidth=e.itemHeight=undefined,e.element.find(b+",.wijmo-wijcarousel-timerbar").remove(),e.pager&&(e.pager.remove(),e.pager=null),e.timer&&(e.timer.remove(),e.timer=null),e.element.find("li>span").css("display","")},t.prototype.destroy=function(){this._wijdestroy(),n.Widget.prototype.destroy.apply(this)},t.prototype._resetDom=function(){var e=this;e._applyListStyle(),e.list.children("li").each(function(t,r){var i=n(r),s=i.children("div.wijmo-wijcarousel-caption"),o=i.children("div.wijmo-wijcarousel-text");e._applyItemBound(i),e._setStyle(s.add(o),function(){e._applyCaptionStyle(s,o)})}),e._applyContainerStyle(e.isHorizontal,!0),e.options.preview&&e._createPreview(),e._setStyle(e.prevBtn.add(e.nextBtn),function(){e._applyBtnStyle(e.isHorizontal)}),e._setStyle(e.pager,function(){e.pager.position(e.options.pagerPosition)}),e._setStyle(e.controls,function(){e.controls.position(e.options.controlPosition)})},t.prototype._setStyle=function(e,t){var n=!0;if(!e||e.length===0)return;e.css("display")=="none"&&(n=!1,e.css("display","")),t.call(this),n||e.css("display","none")},t.prototype.refresh=function(){var e=this,t=e.options,n=e.element;e.width=n.width()||640,e.height=n.height()||480,e.itemWidth=e.itemHeight=0,e._resetDom(),e.pause()},t.prototype.play=function(){var e=this,t=e.options;if(e.isPlaying||t.disabled)return;if(t.interval===0)return e.pause();if(t.showTimer&&e.progressBar)e.progressBar.css({width:"0%"}),e.playPauseBtn.children("span:eq(0)").removeClass(t.wijCSS.iconPlay).addClass(t.wijCSS.iconPause),e.progressBar.animate({width:"100%"},t.interval,null,function(){e._scroll("next",t.step)});else{if(e.timeout)return;e.timeout=window.setTimeout(function(){e.next()},t.interval)}e.isPlaying=!0},t.prototype.pause=function(){var e=this,t=e.options;if(t.showTimer&&e.progressBar)e.progressBar.stop(!0).css({width:"0%"}),e.playPauseBtn.children("span:eq(0)").removeClass(t.wijCSS.iconPause).addClass(t.wijCSS.iconPlay);else{if(e.timeout===null)return;window.clearTimeout(e.timeout),e.timeout=null}e.isPlaying=!1},t.prototype.next=function(){var e=this,t=e.options.step;if(typeof t!="number"||t<1)return;e._stopAnimation(),e._scroll("next",t)},t.prototype.previous=function(){var e=this,t=e.options.step;if(typeof t!="number"||t<1)return;e._stopAnimation(),e._scroll("previous",t)},t.prototype.scrollTo=function(e){var t=this,n,r;t._stopAnimation(),n=e>t.currentIdx?"next":"previous",r=Math.abs(e-t.currentIdx),e!==t.currentIdx&&t._scroll(n,r)},t.prototype._scroll=function(e,t){var r=this,i=r.options,s=r.list,o=0,u,a,l=i.orientation==="horizontal",c={},h=r.itemBound[l?"w":"h"],p=l?"left":"top",d=t,v={},m=0,g=r.currentIdx*h;if(!i.loop){if(e==="next")if(r.currentIdx+i.display+t<=r.count)o=-g-h*d;else{if(!(r.currentIdx+i.display<r.count))return;d=r.count-r.currentIdx-i.display,o=-g-h*d}else r.currentIdx-t>=0?o=-g+h*d:r.currentIdx>0&&(d=r.currentIdx,o=0);o!==undefined&&(c[p]=o+r.offset,r._doAnimation(e,c,d))}else{i.preview&&(o=m=-h*T+r.offset);if(e==="next")o+=-h*d,c[p]=o;else{for(a=0;a<t;a++)o-=h,s.children("li:last").prependTo(s);v[p]=o,c[p]=m,s.css(v)}r._doAnimation(e,c,t,p,h)}if(i.preview){u=n();for(a=0;a<i.display;a++)u=u.add(r._getItemByIndex(r.currentIdx+a).find("div.wijmo-wijcarousel-mask:eq(0)"));u.stop(!0).animate({opacity:.6},i.animation.duration/2,function(){r._getItemByIndex(r.currentIdx).removeClass(f)})}},t.prototype._doAnimation=function(e,t,r,i,s){var o=this,u=o.list,a=o.options,f,l,c={complete:null},h,p={},d;if(!o.list.children().length)return;e==="next"?d=o.currentIdx+r:d=o.currentIdx-r,a.loop?(d=d%o.count+(d<0?o.count:0),h=function(){var t=0;a.preview&&(t=o.offset-T*s);if(e==="next"){for(l=0;l<r;l++)u.children("li:first").appendTo(u);i&&(p[i]=t,u.css(p))}o.currentIdx=d,o._setCurrentState(o.currentIdx)}):h=function(){o.currentIdx=d,o._setCurrentState(o.currentIdx)},c.complete=h,f={index:o.currentIdx,to:d,el:o._getItemByIndex(o.currentIdx)};if(!o._trigger("beforeScroll",null,f))return;a.animation&&a.animation.complete&&(a.animation.complete=undefined),n.extend(c,a.animation),o._hideCaption(),u.animate(t,c)},t.prototype._setCurrentState=function(e){var t=this,r=t.options,i,s,o,u=e+r.display-1,a,l,c;r.loop?t.isPlaying&&(window.clearTimeout(t.timeout),t.timeout=null,t.isPlaying=!1,t.play()):(o=e+r.display<t.count,t.isPlaying&&o?(window.clearTimeout(t.timeout),t.timeout=null,t.isPlaying=!1,t.play()):t.progressBar&&t.pause(),t._applyBtnClass());if(r.preview){l=n(),a=t._getItemByIndex(e);for(c=0;c<r.display;c++)l=l.add(t._getItemByIndex(e+c).find("div.wijmo-wijcarousel-mask:eq(0)"));l.animate({opacity:0},r.animation.duration/2,function(){a.addClass(f),t._showCaption(e,u)})}else t._showCaption(e,u);t.pager&&(n.wijmo.wijslider&&t.pager.find(":wijmo-wijslider").length?t.pager.find(":wijmo-wijslider:eq(0)").wijslider("value",e):n.wijmo.wijpager&&t.pager.is(":wijmo-wijpager")?t.pager.wijpager("option","pageIndex",e):t.pager.jquery&&(i=t.pager.find(">ul:eq(0)>li").eq(e),i.length&&t._activePagerItem(i))),s={firstIndex:e,lastIndex:u},t._trigger("afterScroll",null,s)},t.prototype._getItemByIndex=function(e){var t=this,r=t.list,i,s=e%t.count;return t.options.loop?(r.children("li").each(function(e){var t=n(this);if(t.data("itemIndex")===s)return i=t,!1}),i):r.children("li").eq(s)},t.prototype._collectionChanged=function(e){var t=this;t.count=t.count+(e==="add"?1:-1),t._applyListStyle(),t.pager&&t.pager.jquery&&(t.pager.remove(),t.pager=null,t._createPager()),t._applyBtnClass()},t.prototype.add=function(e,t){var r=this,i,s;if(typeof e=="string")i=n(e);else if(e.jquery)i=e;else{if(!n.isPlainObject(e))return;i=r._generateMarkup(e)}i.is("li")||(i=i.wrap("<li></li>").parent()),s=i,typeof t=="number"&&t>=0&&t<r.count?(s.insertBefore(r._getItemByIndex(t)),r.list.children("li").each(function(e,r){var i=n(r);i.data("itemIndex")>=t&&i.data("itemIndex",i.data("itemIndex")+1)})):(t==0&&s.appendTo(r.list),s.insertAfter(r._getItemByIndex(r.count-1))),r._createItem(i,t!==undefined?t:r.count),r._collectionChanged("add")},t.prototype.remove=function(e){var t=this,r;typeof e=="number"&&e>=0&&e<t.count?(r=t._getItemByIndex(e),t.list.children("li").each(function(t,r){var i=n(r);i.data("itemIndex")>e&&i.data("itemIndex",i.data("itemIndex")-1)})):r=t._getItemByIndex(t.count-1),r&&r.remove(),t._collectionChanged("remove")},t}(e.wijmoWidget);t.wijcarousel=N;var C=function(){function e(){this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-a",stateDefault:"ui-btn-up-a",stateHover:"ui-btn-down-a",stateActive:"ui-btn-down-b",iconPlay:"ui-icon-arrow-r",iconPause:"ui-icon-grid"},this.initSelector=":jqmData(role='wijcarousel')",this.data=[],this.auto=!1,this.interval=5e3,this.showTimer=!1,this.buttonPosition="inside",this.showPager=!1,this.prevBtnClass={defaultClass:"",hoverClass:"",disableClass:""},this.nextBtnClass={defaultClass:"",hoverClass:"",disableClass:""},this.pagerType="numbers",this.thumbnails={mouseover:null,mouseout:null,mousedown:null,mouseup:null,click:null,imageWidth:58,imageHeight:74,images:[]},this.pagerPosition={},this.orientation="horizontal",this.sliderOrientation="horizontal",this.loop=!0,this.animation={queue:!0,disable:!1,duration:1e3,easing:"linear"},this.start=0,this.display=1,this.preview=!1,this.step=1,this.showControls=!1,this.control="",this.controlPosition={},this.showCaption=!0,this.showControlsOnHover=!1,this.itemClick=null,this.beforeScroll=null,this.afterScroll=null,this.loadCallback=null}return e}();N.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new C),n.wijmo.registerWidget("wijcarousel",N.prototype)})(e.carousel||(e.carousel={}));var t=e.carousel})(wijmo||(wijmo={}));