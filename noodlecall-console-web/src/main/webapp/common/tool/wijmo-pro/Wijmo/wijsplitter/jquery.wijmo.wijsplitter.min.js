var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijsplitter",i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._setFullSplit=function(e){var t=this,n=t._fields,r=e?"100%":n.width,i=e?"100%":n.height;t.element.css("width",r).css("height",i)},t.prototype._setOption=function(e,t){var r=this,i=r.options,s,o=n.extend({},i[e]);if(e==="fullSplit")r._setFullSplit(t);else if(n.isPlainObject(i[e])){e==="panel1"&&t.collapsed!==undefined?r._setPanel1Collapsed(t.collapsed):e==="panel2"&&t.collapsed!==undefined&&r._setPanel2Collapsed(t.collapsed),i[e]=n.extend(!0,i[e],t),e==="resizeSettings"&&r._initResizer();return}n.Widget.prototype._setOption.apply(r,arguments),o!==t&&(e==="orientation"?r.refresh():e==="collapsingPanel"?r.refresh():e==="fullSplit"?r.refresh(!0,!1):e==="splitterDistance"?(r.refresh(!1,!1),r._trigger("sized")):e==="showExpander"&&(s=r._fields.expander,s&&s.length&&s.css("display",t?"":"none"))),e==="disabled"&&r._handleDisabledOption(t,r.element)},t.prototype._create=function(){var e=this,t=e.element,r=e.options,i;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),r.splitterDistance==100&&(i=this.element.width()-r.panel2.minSize,r.panel1.minSize>r.splitterDistance?r.splitterDistance=r.panel1.minSize:i<r.splitterDistance&&(r.splitterDistance=i)),e._fields={width:t.width(),height:t.height()},r.fullSplit&&e._setFullSplit(!0),e._splitterify(),e._updateElementsCss(),e._updateElements(),e._bindEvents(),e._initResizer(),r.disabled&&e.disable(),e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){r.fullSplit&&(e.refresh(),e._updateElements(),e._initResizer())},"wijsplitter"),e._trigger("load",null,e)},t.prototype._handleDisabledOption=function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},t.prototype.destroy=function(){var e=this,t=e.options,r=e.element,i=e._fields,s=i.wrapper,o=i.expander,u=i.bar,a=i.panel1,f=i.panel2,l=i.originalStyle,c=e.widgetName,h=i.oriPnl1Content,p=i.oriPnl2Content,d=i.oriPnl1ContentStyle,v=i.oriPnl2ContentStyle,m=t.wijCSS,g=m.vSplitterCss,y=m.vSplitterCssPrefix,b=m.hSplitterCss,w=m.hSplitterCssPrefix,E=m.panelCss;n.fn.resizable&&a&&a.n.is(":ui-resizable")&&a.n.resizable("destroy"),h&&(h.removeClass(y+a.contentCss).removeClass(m.hSplitterCssPrefix+a.contentCss).removeClass(m.content),d===undefined?h.removeAttr("style"):h.attr("style",d),h.appendTo(r)),p&&(p.removeClass(y+f.contentCss).removeClass(m.hSplitterCssPrefix+f.contentCss).removeClass(m.content),v===undefined?p.removeAttr("style"):p.attr("style",v),p.appendTo(r)),a.n.unbind("."+c),o.unbind("."+c),u.unbind("."+c),n(window).unbind("."+c),s.remove(),r.removeClass(g).removeClass(b),l===undefined?r.removeAttr("style"):r.attr("style",l),e.disabledDiv&&(e.disabledDiv.remove(),e.disabledDiv=null),e._fields=null},t.prototype.refresh=function(e,t){var r=this,i=r._fields,s=i.panel1;if(i._isResizing)return;(t||t===undefined)&&r._updateElementsCss(),r._updateElements();if(e||e===undefined){if(!n.fn.resizable)return;s&&s.n.is(":ui-resizable")&&s.n.resizable("destroy"),r._initResizer()}},t.prototype._createDisabledDiv=function(e){var t=this,r=e?e:t.element,i=r.offset(),s=r.outerWidth(),o=r.outerHeight(),u={"z-index":"99999",position:"absolute",width:s,height:o,left:i.left,top:i.top};return n.browser.msie&&n.extend(u,{"background-color":"#fff",opacity:.1}),n("<div></div>").addClass("ui-disabled").css(u)},t.prototype._splitterify=function(){var e=this,t=e.element,r=e.options,i=e._fields,s,o,u,a,f={n:undefined,content:t.find(">div:eq(0)")},l={n:undefined,content:t.find(">div:eq(1)")};i.originalStyle=t.attr("style"),s=n("<div></div>").appendTo(t),f.n=n("<div></div>").appendTo(s),f.content.length===0?f.content=n("<div></div>"):(i.oriPnl1Content=f.content,i.oriPnl1ContentStyle=f.content.attr("style")),f.content.appendTo(f.n),o=n("<div></div>").appendTo(s),r.barZIndex!==-1&&o.css("z-index",r.barZIndex),u=n("<div></div>").appendTo(o).attr("role","button"),a=n("<span></span>").appendTo(u),l.n=n("<div></div>").appendTo(s),l.content.length===0?l.content=n("<div></div>"):(i.oriPnl2Content=l.content,i.oriPnl2ContentStyle=l.content.attr("style")),l.content.appendTo(l.n),i.wrapper=s,i.panel1=f,i.panel2=l,i.bar=o,i.expander=u,i.icon=a},t.prototype._updateElementsCss=function(){var e=this,t=e.element,n=e.options,r=n.orientation==="vertical",i=e._fields,s=i.wrapper,o=n.collapsingPanel,u=n.collapsingPanel==="panel1"?"panel2":"panel1",a=i.bar,f=i.expander,l=i.icon,c=n.wijCSS,h=c.vSplitterCss,p=c.vSplitterCssPrefix,d=c.hSplitterCss,v=c.hSplitterCssPrefix,m=c.panelCss;t.removeClass(h).removeClass(d).addClass(r?h:d),s.attr("class",c.wrapperCss),i[o].n.removeClass(p+m[o].n).removeClass(v+m[o].n).addClass((r?p:v)+m[o].n),i[o].content.removeClass(p+m[o].content).removeClass(v+m[o].content).removeClass(c.content).addClass((r?p:v)+m[o].content).addClass(c.content),a.attr("class",(r?p:v)+c.barCss+" "+c.header).css("width","").css("height",""),f.attr("class",c.cornerCssPrefix+(r?"bl "+p:"tr "+v)+c.expanderCss+" "+c.stateDefault).css("left","").css("top",""),l.attr("class",c.icon+" "+(r?c.iconArrowLeft:c.iconArrowUp)),i[u].n.removeClass(p+m[u].n).removeClass(v+m[u].n).addClass((r?p:v)+m[u].n),i[u].content.removeClass(p+m[u].content).removeClass(v+m[u].content).removeClass(c.content).addClass((r?p:v)+m[u].content).addClass(c.content),e._updateExpanderCss()},t.prototype._updateExpanderCss=function(){var e=this,t=e.options,n=e._fields,r=n.expander,i=n.icon,s=t.wijCSS,o=s.cornerCssPrefix,u=t.orientation==="vertical",a=t.collapsingPanel!=="panel1",f=u?s.vSplitterCssPrefix:s.hSplitterCssPrefix,l=(u?1:0)*2+(a?1:0),c=["bl","tr","tr","bl"][l],h=["br","tl"][+a],p=[s.iconArrowDown,s.iconArrowUp,s.iconArrowRight,s.iconArrowLeft][l],d=["tr","bl","bl","tr"][l],v=["tl","br"][+a],m=[s.iconArrowUp,s.iconArrowDown,s.iconArrowLeft,s.iconArrowRight][l];r.removeClass(f+t.collapsingPanel+"-"+s.expandedCss).removeClass(f+t.collapsingPanel+"-"+s.collapsedCss).removeClass(o+c).removeClass(o+h).removeClass(o+d).removeClass(o+v),i.removeClass(p).removeClass(m),t.panel1.collapsed||t.panel2.collapsed?(r.addClass(o+c).addClass(o+h).addClass(f+t.collapsingPanel+"-"+s.collapsedCss),i.addClass(p)):(r.addClass(o+d).addClass(o+v).addClass(f+t.collapsingPanel+"-"+s.expandedCss),i.addClass(m))},t.prototype._AddVisiblity=function(e){e.wijTriggerVisibility&&e.wijTriggerVisibility()},t.prototype._updateElements=function(){var e=this,t=e.element,n=e.options,r=n.splitterDistance,i=n.collapsingPanel,s=n.collapsingPanel==="panel1"?"panel2":"panel1",o=e._fields,u=o.wrapper,a=o.panel1,f=o.panel2,l=o.bar,c=o.expander,h=t.width(),p=t.height(),d,v;u.height(p),e._setPanelsScrollMode(),n.orientation==="vertical"?(d=l.outerWidth(!0),r>h-d&&(r=h-d),u.width(h*2),n.panel1.collapsed?(i==="panel1"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel1"+"-"+n.wijCSS.collapsedCss),o.panel1.n.css("display","none"),o.panel2.n.css("display",""),this._AddVisiblity(o.panel2.n),r=0):(i==="panel1"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel1"+"-"+n.wijCSS.expandedCss),o.panel1.n.css("display",""),this._AddVisiblity(o.panel1.n),o.panel2.n.css("display",n.panel2.collapsed?"none":"")),n.panel2.collapsed?(i==="panel2"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel2"+"-"+n.wijCSS.collapsedCss),o.panel2.n.css("display","none"),r=i==="panel1"?h-d:h):(i==="panel2"&&c.addClass(n.wijCSS.vSplitterCssPrefix+"panel2"+"-"+n.wijCSS.expandedCss),o.panel2.n.css("display",""),this._AddVisiblity(o.panel2.n)),!n.panel1.collapsed&&!n.panel2.collapsed&&c.addClass(n.wijCSS.vSplitterCssPrefix+n.collapsingPanel+"-"+n.wijCSS.expandedCss),i==="panel1"?(o.panel1.n.height(p).width(r),o.panel2.n.height(p).width(h-r-d)):(o.panel1.n.height(p).width(r-d),o.panel2.n.height(p).width(h-r)),o.panel1.content.outerHeight(p,!0),l.outerHeight(p,!0),o.panel2.content.outerHeight(p,!0),c.css("cursor","pointer").css("top",p/2-c.outerHeight(!0)/2)):(v=l.outerHeight(!0),r>p-v&&(r=p-v),n.panel1.collapsed?(i==="panel1"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel1"+"-"+n.wijCSS.collapsedCss),o.panel1.n.css("display","none"),o.panel2.n.css("display",""),this._AddVisiblity(o.panel2.n),r=0):(i==="panel1"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel1"+"-"+n.wijCSS.expandedCss),o.panel1.n.css("display",""),this._AddVisiblity(o.panel1.n),o.panel2.n.css("display",n.panel2.collapsed?"none":"")),n.panel2.collapsed?(i==="panel2"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel2"+"-"+n.wijCSS.collapsedCss),o.panel2.n.css("display","none"),r=i==="panel1"?p-v:p):(i==="panel2"&&c.addClass(n.wijCSS.hSplitterCssPrefix+"panel2"+"-"+n.wijCSS.expandedCss),o.panel2.n.css("display",""),this._AddVisiblity(o.panel2.n)),i==="panel1"?(o.panel1.n.width(h).height(r),o.panel2.n.width(h).height(p-r-v),o.panel1.content.outerHeight(r,!0),o.panel2.content.outerHeight(p-r-v,!0)):(o.panel1.n.width(h).height(r-v),o.panel2.n.width(h).height(p-r),o.panel1.content.outerHeight(r-v,!0),o.panel2.content.outerHeight(p-r,!0)),c.css("cursor","pointer").css("left",h/2-c.outerWidth(!0)/2)),c.css("display",n.showExpander?"":"none")},t.prototype._bindEvents=function(){var e=this,t=e.options,r=e._fields,i=r.bar,s=r.expander,o=e.widgetName;s.bind("mouseover."+o,function(e){if(t.disabled)return;s.addClass(t.wijCSS.stateHover)}).bind("mouseout."+o,function(e){if(t.disabled)return;s.removeClass(t.wijCSS.stateHover).removeClass(t.wijCSS.stateActive)}).bind("mousedown."+o,function(e){if(t.disabled)return;s.addClass(t.wijCSS.stateActive)}).bind("mouseup."+o,function(n){if(t.disabled)return;s.removeClass(t.wijCSS.stateActive),t.collapsingPanel==="panel1"?e._setPanel1Collapsed(!t.panel1.collapsed,n):e._setPanel2Collapsed(!t.panel2.collapsed,n)}),i.bind("mouseover."+o,function(e){if(t.disabled)return;i.addClass(t.wijCSS.stateHover)}).bind("mouseout."+o,function(e){if(t.disabled)return;i.removeClass(t.wijCSS.stateHover)}),r.panel1.n.bind("animating."+o,function(n){if(t.disabled)return;e._adjustLayout(e),e._trigger("sizing",n,null)}).bind("animated."+o,function(n){if(t.disabled)return;e._adjustLayout(e),e._trigger("sized",n,null)}),e.element.on("mouseover."+o,".ui-resizable-handle",function(e){if(t.disabled)return;i.addClass(t.wijCSS.stateHover)}).on("mouseout."+o,".ui-resizable-handle",function(e){if(t.disabled)return;i.removeClass(t.wijCSS.stateHover)}),n(window).bind("resize."+o,function(n){if(t.disabled)return;t.fullSplit&&e.element.is(":visible")&&(e._updateElements(),e._initResizer())})},t.prototype._setPanel1Collapsed=function(e,t){var r=this,i=r.options,s=i.panel1.collapsed,o=n(".ui-resizable-handle",r.element);if(s===e)return;if(i.collapsingPanel==="panel1"&&!r._trigger(s?"expand":"collapse",t,null))return;i.panel1.collapsed=e,e?(i.panel2.collapsed=!1,i.collapsingPanel==="panel2"&&o.hide()):o.show(),r._updateElements(),r._updateExpanderCss(),i.collapsingPanel==="panel1"&&r._trigger(e?"collapsed":"expanded",t,null)},t.prototype._setPanel2Collapsed=function(e,t){var r=this,i=r.options,s=i.panel2.collapsed,o=n(".ui-resizable-handle",r.element);if(s===e)return;if(i.collapsingPanel==="panel2"&&!r._trigger(s?"expand":"collapse",t,null))return;i.panel2.collapsed=e,e?(i.panel1.collapsed=!1,i.collapsingPanel==="panel1"&&o.hide()):o.show(),r._updateElements(),r._updateExpanderCss(),i.collapsingPanel==="panel2"&&r._trigger(e?"collapsed":"expanded",t,null)},t.prototype._initResizer=function(){var e=this,t=e.element,r=e.options,i=e._fields,s=i.bar,o=r.collapsingPanel,u=r.collapsingPanel==="panel1"?"panel2":"panel1",a=r.resizeSettings,f=a.animationOptions,l=f.disabled?0:f.duration,c=t.width(),h=t.height(),p,d,v,m,g,y,b;if(!n.fn.resizable)return;r.orientation==="vertical"?(p=s.outerWidth(!0),d=c-p-r[u].minSize,v=r[o].minSize,v<2&&(v=2),i.panel1.n.resizable({zIndex:i.panel1.n.zIndex()+100,wijanimate:!0,minWidth:v,maxWidth:d,handles:"e",helper:r.wijCSS.vSplitterCssPrefix+r.wijCSS.resizeHelperCss,animateDuration:l,animateEasing:f.easing,disabledAnimate:f.disabled,ghost:a.ghost,start:function(){i._isResizing=!0},stop:function(){i._isResizing=!1}})):(m=s.outerHeight(!0),g=h-m-r[u].minSize,y=r[o].minSize,y<2&&(y=2),i.panel1.n.resizable({zIndex:i.panel1.n.zIndex()+100,wijanimate:!0,minHeight:y,maxHeight:g,handles:"s",helper:r.wijCSS.hSplitterCssPrefix+r.wijCSS.resizeHelperCss,animateDuration:l,animateEasing:f.easing,disabledAnimate:f.disabled,ghost:a.ghost,start:function(){i._isResizing=!0;var t=i.panel1.content.find("iframe")[0];t&&e._addTransparentDivForIframe(t,i.panel1);var n=i.panel2.content.find("iframe")[0];n&&e._addTransparentDivForIframe(n,i.panel2)},stop:function(){i._isResizing=!1;var e=i.panel1.content.find("iframe")[0];if(e){var t=n(e).parent().children()[0];n(t).remove()}var r=i.panel2.content.find("iframe")[0];if(r){var s=n(r).parent().children()[0];n(s).remove()}}})),b=n(".ui-resizable-handle",t),r[u].collapsed?b.hide():b.show(),n.browser.msie&&parseInt(n.browser.version)<7&&r.orientation==="vertical"&&b.height(t.height())},t.prototype._addTransparentDivForIframe=function(e,t){var r=t.content.width()-20,i=t.content.height(),s=n("<div style='width:"+r+"px; height:"+i+"px; background-color:gray; position:absolute; z-index:1000; filter:alpha(Opacity=0); opacity: 0'>");s.prependTo(t.content)},t.prototype._adjustLayout=function(e){var t=e.options,n=e._fields,r=n.panel1,i=t.orientation==="vertical"?r.n.width():r.n.height();if(t.splitterDistance===i)return;t.splitterDistance=i,e._updateElements()},t.prototype._setPanelsScrollMode=function(){var e=this,t=e._fields,r=e.options,i=[r.panel1.scrollBars,r.panel2.scrollBars];n.each([t.panel1,t.panel2],function(e,t){i[e]==="auto"?t.content.css("overflow","auto"):i[e]==="both"?t.content.css("overflow","scroll"):i[e]==="none"?t.content.css("overflow","hidden"):i[e]==="horizontal"?t.content.css("overflow-x","scroll").css("overflow-y","hidden"):i[e]==="vertical"&&t.content.css("overflow-x","hidden").css("overflow-y","scroll")})},t}(e.wijmoWidget);t.wijsplitter=i;var s=function(){function e(){this.initSelector=":jqmData(role='wijsplitter')",this.sizing=null,this.sized=null,this.expand=null,this.collapse=null,this.expanded=null,this.collapsed=null,this.barZIndex=-1,this.showExpander=!0,this.splitterDistance=100,this.orientation="vertical",this.fullSplit=!1,this.resizeSettings={animationOptions:{duration:100,easing:"swing",disabled:!1},ghost:!1},this.panel1={minSize:1,collapsed:!1,scrollBars:"auto"},this.panel2={minSize:1,collapsed:!1,scrollBars:"auto"},this.collapsingPanel="panel1",this.wijCSS={cornerCssPrefix:"ui-corner-",arrowCssPrefix:"ui-icon-triangle-1-",panelCss:{panel1:{n:"panel1",content:"panel1-content"},panel2:{n:"panel2",content:"panel2-content"}},wrapperCss:"wijmo-wijsplitter-wrapper",hSplitterCss:"wijmo-wijsplitter-horizontal",vSplitterCss:"wijmo-wijsplitter-vertical",hSplitterCssPrefix:"wijmo-wijsplitter-h-",vSplitterCssPrefix:"wijmo-wijsplitter-v-",collapsedCss:"collapsed",expandedCss:"expanded",resizeHelperCss:"resize-helper",barCss:"bar",expanderCss:"expander"},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body ui-body-c",stateDefault:"ui-btn-up-c"}}return e}();i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new s),n.wijmo.registerWidget("wijsplitter",i.prototype),n.ui!=null&&n.ui.plugin!=null&&n.ui.plugin.add("resizable","wijanimate",{stop:function(e,t){var r=n(this).data("uiResizable"),i=r.options,s=r.element,o=r._proportionallyResizeElements,u=o.length&&/textarea/i.test(o[0].nodeName),a=u&&n.ui.hasScroll(o[0],"left")?0:r.sizeDiff.height,f=u?0:r.sizeDiff.width,l,c,h;s.css("width",r.originalSize.width).css("height",r.originalSize.height),l={width:r.size.width-f,height:r.size.height-a},c=parseInt(s.css("left"),10)+(r.position.left-r.originalPosition.left)||null,h=parseInt(s.css("top"),10)+(r.position.top-r.originalPosition.top)||null,i.disabledAnimate?(s.css(n.extend(l,h&&c?{top:h,left:c}:{})),s.trigger("animated")):s.animate(n.extend(l,h&&c?{top:h,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var t={width:parseInt(s.css("width"),10),height:parseInt(s.css("height"),10),top:parseInt(s.css("top"),10),left:parseInt(s.css("left"),10)};o&&o.length&&n(o[0]).css({width:t.width,height:t.height}),r._updateCache(t),r._propagate("resize",e),s.trigger("animating")},complete:function(){s.trigger("animated")}})}})})(e.splitter||(e.splitter={}));var t=e.splitter})(wijmo||(wijmo={}));