var wijmo;(function(e){var t=jQuery,n=function(){function e(){}return e.prototype.round=function(e,t){return e?Globalize.parseFloat(e.toFixed(t),10,Globalize.culture("en")):0},e.prototype.toOADate=function(e){var t=864e5,n=e-new Date(1900,0,1)+2*t;return n},e.prototype.fromOADate=function(e){var t=864e5,n=new Date(e-2*t+(new Date(1900,0,1)).getTime());return n},e.prototype.arrayClone=function(e){var n=[];return t.each(e,function(e,r){n.push(t.extend(!0,{},r))}),n},e}(),r=function(){function e(){}return e.prototype.isSVGElem=function(e){var t="http://www.w3.org/2000/svg";return e.nodeType===1&&e.namespaceURI===t},e.prototype.addClass=function(e,n){n=n||"";var r=this;t.each(e,function(){if(r.isSVGElem(this)){var e=this;t.each(n.split(/\s+/),function(n,r){var i=e.className?e.className.baseVal:e.getAttribute("class");t.inArray(r,i.split(/\s+/))===-1&&(i+=(i?" ":"")+r,e.className?e.className.baseVal=i:e.setAttribute("class",i))})}else t(this).addClass(n)})},e.prototype.clearRaphaelCache=function(){},e.prototype.getPositionByAngle=function(e,t,n,r){var i={x:0,y:0},s=Raphael.rad(r);return i.x=e+n*Math.cos(-1*s),i.y=t+n*Math.sin(-1*s),i},e.prototype.hasClass=function(e,n){if(!n||n.length===0)return!1;if(this.isSVGElem(e)){var r=e.className?e.className.baseVal:e.getAttribute("class"),i=!1;return t.each(r.split(/\s+/),function(e,t){if(t===n)return i=!0,!1}),i}return t(e).hasClass(n)},e.prototype.sector=function(e,t,n,r,i){var s=this.getPositionByAngle(e,t,n,r),o=this.getPositionByAngle(e,t,n,i);return["M",e,t,"L",s.x,s.y,"A",n,n,0,+(i-r>180),0,o.x,o.y,"z"]},e}();t.extend(n.prototype),t.extend({wijraphael:r.prototype});var i="[\\x20\\t\\r\\n\\f]",s=t.expr.filter.CLASS,o=function(e,t){var n=e.split("."),r=t.split("."),i=Math.max(n.length,r.length),s=0,o,u,a;for(o=0;o<i;o++){u=n[o]?parseInt(n[o]):0,a=r[o]?parseInt(r[o]):0;if(u>a){s=1;break}if(u<a){s=-1;break}}return s};t.expr.filter.CLASS=function(e,n){if(o(t.fn.jquery,"1.8")<0){var r=!t.wijraphael||!t.wijraphael.isSVGElem(e)?e.className:e.className?e.className.baseVal:e.getAttribute("class");return(" "+r+" ").indexOf(n)>-1}var s=new RegExp("(^|"+i+")"+e+"("+i+"|$)");return function(e){var n=!t.wijraphael||!t.wijraphael.isSVGElem(e)?e.className:e.className?e.className.baseVal:e.getAttribute("class");return s.test(n)}},o(t.fn.jquery,"1.8")<0&&(t.expr.preFilter.CLASS=function(e,n,r,i,s,o){var u=0,a=null,f=null;e=" "+e[1].replace(/\\/g,"")+" ";if(o)return e;for(u=0,a={};a;u++){a=n[u];if(!a)try{a=n.item(u)}catch(l){}a&&(f=!t.wijraphael||!t.wijraphael.isSVGElem(a)?a.className:(a.className?a.className.baseVal:"")||a.getAttribute("class"),s^(f&&(" "+f+" ").indexOf(e)>-1)?r||i.push(a):r&&(n[u]=!1))}return!1}),Raphael.fn.tri=function(e,t,n){var r=e,i=t-n,s=Math.cos(30*Math.PI/180)*n,o=Math.tan(60*Math.PI/180)*s,u=e+s,a=t+o,f=e-s,l=t+o,c=["M",r.toString(),i.toString(),"L",u.toString(),a.toString(),"L",f.toString(),l.toString(),"z"];return this.path(c.join(" "))},Raphael.fn.invertedTri=function(e,t,n){var r=e,i=t+n,s=Math.cos(30*Math.PI/180)*n,o=Math.tan(60*Math.PI/180)*s,u=e+s,a=t-o,f=e-s,l=t-o,c=["M",r.toString(),i.toString(),"L",u.toString(),a.toString(),"L",f.toString(),l.toString(),"z"];return this.path(c.join(" "))},Raphael.fn.box=function(e,t,n){var r=Math.cos(45*Math.PI/180)*n,i=["M",e-r,t-r,"L",e+r,t-r,"L",e+r,t+r,"L",e-r,t+r,"z"];return this.path(i.join(" "))},Raphael.fn.diamond=function(e,t,n){var r=["M",e,t-n,"L",e+n,t,"L",e,t+n,"L",e-n,t,"z"];return this.path(r.join(" "))},Raphael.fn.cross=function(e,t,n){var r=Math.cos(45*Math.PI/180)*n,i=["M",e-r,t-r,"L",e+r,t+r,"M",e-r,t+r,"L",e+r,t-r];return this.path(i.join(" "))},Raphael.fn.paintMarker=function(e,t,n,r){var i=this,s=null;e||(e="circle");switch(e){case"circle":s=i.circle(t,n,r);break;case"tri":s=i.tri(t,n,r);break;case"invertedTri":s=i.invertedTri(t,n,r);break;case"box":s=i.box(t,n,r);break;case"diamond":s=i.diamond(t,n,r);break;case"cross":s=i.cross(t,n,r)}return s},Raphael.fn.htmlText=function(e,n,r,i,s,o){var u=function(e,t,n){var r=/<(b|strong)>/,i=/<(i|em)>/,s=/href=[\"\']([^\"\']+)[\"\']/,o=/<a/;n&&e.attr(n),r.test(t)&&e.attr("font-weight","bold"),i.test(t)&&e.attr("font-style","italic"),o.test(t)&&t.match(s)[1]&&e.attr("href",t.match(s)[1])},a=r.toString().split(/<br\s?\/>|\\r/i),f=this,l=f.set(),c=0,h=0;return s=s||3,o=o||5,t.each(a,function(e,n){var r=0,a=n.split("|||");n=n.replace(/<([A-Za-z]+(.|\n)*?)>/g,"|||<$1>").replace(/<\/([A-Za-z]*)>/g,"</$1>|||"),t.each(a,function(e,n){var o=null,a=null,p=0,d,v=0;n!==""&&(o=n,o=t.trim(o.replace(/<(.|\n)*?>/g,"")),d=f.text(0,0,o),u(d,n,i),a=d.wijGetBBox(),p=a.width/2+c,v=-a.height/2+h,c=c+a.width+s,d.translate(p,v),l.push(d),r<a.height&&(r=a.height))}),h+=r+o,c=r=0}),h=0,l.transform(Raphael.format("...t{0},{1}",e-l.getBBox().x,n-l.getBBox().y)),l},Raphael.fn.line=function(e,t,n,r){return this.path(["M",e.toString(),t.toString(),"L",n.toString(),r.toString()])},Raphael.fn.roundRect=function(e,n,r,i,s,o,u,a){var f=[],l=[-1,1,1,1,1,-1,-1,-1],c=["v","h","v","h"],h=null,p=null;return t.each([s,o,u,a],function(e,t){typeof t=="number"?f=f.concat([{x:t,y:t}]):typeof t=="object"?f=f.concat(t):f=f.concat([{x:0,y:0}])}),h=["M",e+f[0].x,n],p=[i-f[0].y-f[1].y,r-f[1].x-f[2].x,f[2].y+f[3].y-i,f[3].x+f[0].x-r],t.each(f,function(e,t){t.x&&t.y&&(h=h.concat("a",t.x,t.y,0,0,0,l[2*e]*t.x,l[2*e+1]*t.y)),h=h.concat(c[e],p[e])}),h.push("z"),this.path(h)},Raphael.fn.wrapText=function(e,n,r,i,s,o){function v(e,t,n){var r=null,i=null,s=e.toString().split(" "),o=[],a=[],f="";while(s.length)f+=" "+s[0],r=u.text(-1e3,-1e3,f),r.attr(n),i=r.wijGetBBox(),i.width>t?(a.length&&(o.push(a),f=s[0]),a=[s.shift()]):a.push(s.shift()),s.length===0&&o.push(a),r.wijRemove(),r=null;return o}var u=this,a=o.rotation,f=a?t.extend(!0,{},o,{rotation:0}):o,l=n,c=u.set(),h=null,p=null,d=[];return typeof r=="undefined"&&(r=""),t.each(v(r,i,f),function(t,n){var r=n.join(" "),o=s||"near",p=u.text(e,l,r),v=0,m=0;p.attr(f),h=p.wijGetBBox();switch(o){case"near":v=i-h.width/2;break;case"center":v+=i/2;break;case"far":v+=h.width/2}a?(m+=h.height/2/Math.abs(Math.sin(a)),l+=h.height/Math.abs(Math.sin(a))):(m+=h.height/2,l+=h.height),h.x+=v,h.y+=m,a?p.attr({x:p.attr("x")+v,y:p.attr("y")+m}):p.transform(Raphael.format("...T{0},{1}",v,m)),c.push(p),d.push(h)}),a&&(h=c.wijGetBBox(),c.length>1?(t.each(c,function(e,t){t.attr({y:t.attr("y")-h.height/2}),d[e].y-=h.height/2}),p={x:h.x+h.width/2,y:h.y+h.height/2},t.each(c,function(e,n){var r=Math,i=d[e],s={x:i.x+i.width/2,y:i.y+i.height/2},o=r.sqrt(r.pow(s.x-p.x,2)+r.pow(s.y-p.y,2)),u=0,f=null,l=null;n.attr({rotation:a});if(o===0)return!0;f=n.wijGetBBox(),u=Raphael.deg(r.asin(r.abs(s.y-p.y)/o)),s.y>p.y?s.x>p.x?u-=360:u=-1*(u+180):s.x>p.x?u*=-1:u=-1*(180-u),l=t.wijraphael.getPositionByAngle(p.x,p.y,o,-1*(a+u)),n.attr({y:n.attr("y")+l.y-f.y-f.height/2})})):c[0].transform(Raphael.format("...R{0}",a))),c},Raphael.fn.getSVG=function(){function e(e,n){var r="<"+e+" ",i=null,s=!1;return t.each(n,function(e,t){if(e==="text"||e==="opacity"||e==="transform"||e==="path"||e==="w"||e==="h"||e==="translation")return!0;t&&(e==="stroke"&&t===0&&(t="none"),r+=e+"='"+t+"' ")}),n.opacity&&(i=n.opacity,r+="opacity='"+i+"' style='opacity:"+i+";",s=!0),n.transform&&n.transform.length>0&&(i=n.transform,s?r+="transform:"+i:(r+="style='transform:"+i,s=!0)),s&&(r+="'"),n.text?(i=n.text,r+="><tspan>"+i+"</tspan>"):r+=">",r+="</"+e+">",r}var n=this,r='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="'+n.canvas.offsetWidth+'" height="'+n.canvas.offsetHeight+'"><desc>Created with Raphael</desc><defs></defs>',i,s="",o,u,a,f=0,l=0,c=0,h=0;for(i=n.bottom;i;i=i.next)if(i&&i.type)switch(i.type){case"path":for(f=0,l=i.attrs.path.length;f<l;f++){u=i.attrs.path[f];for(c=0,h=u.length;c<h;c++)a=u[c],c<1?s+=a:c===h-1?s+=a:s+=a+","}s&&s.length>0&&(i.attrs.d=s.replace(/,/g," "));break;case"text":i.attrs["text-anchor"]||(i.attrs["text-anchor"]="middle");break;case"image":o=i.transformations,i.attrs.transform=o?o.join(" "):"";break;case"ellipse":case"rect":r+=e(i.type,i.attrs)}return r+="</svg>",r},Raphael.el.wijRemove=function(){var e=this,n;if(e.removed)return;e.node.parentNode&&(n=t(e.node),e.stop().remove(),n.remove())},Raphael.el.wijGetBBox=function(){return this.getBBox()},Raphael.el.wijAnimate=function(e,n,r,i){if(!e||t.isEmptyObject(e))return;var s=this.shadow,o=0,u={easeInCubic:">",easeOutCubic:"<",easeInOutCubic:"<>",easeInBack:"backIn",easeOutBack:"backOut",easeOutElastic:"elastic",easeOutBounce:"bounce"};u[r]&&(r=u[r]),this.animate(e,n,r,i),u=null,s&&s.offset&&(o=s.offset,e.x&&(e.x+=o),e.y&&(e.y+=o),this.shadow.animate(e,n,r,i))},Raphael.el.wijAttr=function(e,n){this.attr(e,n);if(this.shadow)if(typeof e=="object"){var r=t.extend(!0,{},e);r.fill&&delete r.fill,r.stroke&&delete r.stroke,r["stroke-width"]&&delete r["stroke-width"],this.shadow.attr(r,n)}else if(typeof e=="string")switch(e){case"clip-rect":case"cx":case"cy":case"fill-opacity":case"font":case"font-family":case"font-size":case"font-weight":case"height":case"opacity":case"path":case"r":case"rotation":case"rx":case"ry":case"scale":case"stroke-dasharray":case"stroke-linecap":case"stroke-linejoin":case"stroke-miterlimit":case"stroke-opacity":case"stroke-width":case"translation":case"width":this.shadow.attr(e,n);break;case"x":this.shadow.attr(e,n),this.shadow.attr("transform","...t1,0");break;case"y":this.shadow.attr(e,n),this.shadow.attr("transform","...t0,1");break;default:}},Raphael.st.wijRemove=function(){t.each(this,function(e,t){t.wijRemove&&!t.removed&&t.wijRemove()})},Raphael.st.wijAttr=function(e,n){return t.each(this.items,function(t,r){r.wijAttr(e,n)}),this},Raphael.st.wijAnimate=function(e,t,n,r){var i=0,s=0,o=null;for(i=0,s=this.items.length;i<s;i++)o=this.items[i],o.removed||o.wijAnimate(e,t,n,r);return this},Raphael.st.wijGetBBox=function(){var e=[],t=[],n=[],r=[],i,s,o=Math.max,u=Math.min,a="push",f="apply",l=null,c=0;for(c=this.items.length-1;c>=0;c--)l=this.items[c].wijGetBBox(),e[a](l.x),t[a](l.y),n[a](l.x+l.width),r[a](l.y+l.height);return i=u[f](0,e),s=u[f](0,t),{x:i,y:s,x2:undefined,y2:undefined,width:o[f](0,n)-i,height:o[f](0,r)-s}};var u=Raphael.el.attr;Raphael.el.attr=function(e,n){return t.isPlainObject(e)&&t.each(e,function(t,n){(t==="width"||t==="height"||t==="r")&&!isNaN(n)&&n<0&&(e[t]=0)}),(e==="width"||e==="height"||e==="r")&&!isNaN(n)&&n<0&&(n=0),u.apply(this,arguments)}})(wijmo||(wijmo={}));