var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijtooltip",i="@wijtp@",s="wijmo-wijtooltip",o=s+"-arrow-",u=parseFloat,a=window,f=document,l=Math,c=l.max,h={},p=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t._tooltips=new Array,t.prototype._setOption=function(t,r){var i=this,s="_set_"+t,o=i.options[t];if(t==="controlwidth"){i._setSize("width",r);return}if(t==="controlheight"){i._setSize("height",r);return}e.prototype._setOption.call(this,t,r),n.isPlainObject(r)&&(i.options[t]=n.extend({},o,r)),i[s]&&i[s](o)},t.prototype._set_cssClass=function(){var e=this,t=e.options,n=e._tooltipCache._$tooltip;if(!n)return;n.hasClass(t.cssClass)||n.addClass(t.cssClass)},t.prototype._set_content=function(e){var t=this;t._isAjaxCallback?(t._callbacked=!0,t.show(),t._callbacked=!1):t._setText()},t.prototype._create=function(){var e=this,n=e.options,r=e.element,s=r&&r.attr("id"),o="",u="",a=n.group||i,f=t._getTooltip(a);f?f.count++:(f=e._createTooltip(),f.count=0,t._tooltips[a]=f),u=n.cssClass?n.cssClass:"",f._$tooltip.hasClass(u)||f._$tooltip.addClass(u),n.position.of=e.element,e._bindLiveEvents(),e._tooltipCache=f,s!==""&&(o=f._$tooltip.attr("aria-describedby"),o=o===undefined?"":o+" ",f._$tooltip.attr("aria-describedby",o+s)),n.controlwidth&&n.controlwidth!==""&&e._setSize("width",n.controlwidth),n.controlheight&&n.controlheight!==""&&e._setSize("height",n.controlheight)},t.prototype.destroy=function(){var n=this,r=n.element,s=n.options.group||i;r.unbind(".tooltip"),r.attr("title",n._content),t._removeTooltip(s),e.prototype.destroy.call(this)},t.prototype.widget=function(){return this._tooltipCache._$tooltip},t.prototype.show=function(){var e=this,t=e._tooltipCache,r=t?t._$tooltip:null,i=e.options;if(!t||i.disabled)return;t._showAnimationTimer&&(clearTimeout(t._showAnimationTimer),t._showAnimationTimer=null),t._showAtAnimationTimer&&(clearTimeout(t._showAtAnimationTimer),t._showAtAnimationTimer=null),t._hideAnimationTimer&&(clearTimeout(t._hideAnimationTimer),t._hideAnimationTimer=null),r.stop(!0,!0);if(i.ajaxCallback&&n.isFunction(i.ajaxCallback)&&!e._callbacked){e._isAjaxCallback=!0,i.ajaxCallback.call(e.element);return}e._setText(),t._showAnimationTimer=setTimeout(function(){h=r.offset();if(i.mouseTrailing){e._setCalloutCss();return}e._setPosition(),e._showTooltip()},e.options.showDelay)},t.prototype.showAt=function(e){var t=this,n=t._tooltipCache,r=n?n._$tooltip:null,i=n?n._callout:null,s,o=0,u=0,a={},f,l,c,p,d,v;if(!n||!i)return;r.stop(!0,!0),n._showAtAnimationTimer&&(clearTimeout(n._showAtAnimationTimer),n._showAtAnimationTimer=null),n._hideAnimationTimer&&(clearTimeout(n._hideAnimationTimer),n._hideAnimationTimer=null),n._showAtAnimationTimer=setTimeout(function(){var n=r.is(":visible");t._setText(),h=r.offset(),r.offset({left:0,top:0}).show(),s=i.position(),o=s.left,u=s.top,l=t._getBorder(i),c=l.left||l.right,p=l.top||l.bottom,d=r.width(),v=r.height(),f=t._getCalloutShape(),a={rt:{left:e.x-d-c,top:e.y-u},rc:{left:e.x-d-c,top:e.y-v/2},rb:{left:e.x-d-c,top:e.y-u-p},lt:{left:e.x+c,top:e.y-u},lc:{left:e.x+c,top:e.y-v/2},lb:{left:e.x+c,top:e.y-u-p},tl:{left:e.x-o,top:e.y+p},tc:{left:e.x-d/2,top:e.y+p},tr:{left:e.x-o-c,top:e.y+p},bl:{left:e.x-o,top:e.y-v-p},bc:{left:e.x-d/2,top:e.y-v-p},br:{left:e.x-o-c,top:e.y-v-p},cc:{left:e.x-d/2,top:e.y-v/2}}[f],f=t._flipTooltip(a,f,l),t._setUnfilledCallout(f),r.offset(a),n||r.hide(),t._calloutShape=f,t._showTooltip()},t.options.showDelay)},t.prototype.hide=function(){var e=this,t=e._tooltipCache;if(!t)return;t._showAnimationTimer&&(clearTimeout(t._showAnimationTimer),t._showAnimationTimer=null),t._showAtAnimationTimer&&(clearTimeout(t._showAtAnimationTimer),t._showAtAnimationTimer=null),t._hideAnimationTimer&&(clearTimeout(t._hideAnimationTimer),t._hideAnimationTimer=null),t._hideAnimationTimer=setTimeout(n.proxy(e._hideTooltip,e),e.options.hideDelay)},t.prototype._createTooltip=function(){var e=this,t=e.options,r=new TooltipCache,i=n("<div></div>").addClass(t.wijCSS.tooltip).addClass(t.wijCSS.widget).addClass(t.wijCSS.content).addClass(t.wijCSS.cornerAll),s=n("<div></div>").addClass(t.wijCSS.tooltipContainer),o=n("<div></div>").addClass(t.wijCSS.content).addClass(t.wijCSS.tooltipPointer).append(n("<div></div>").addClass(t.wijCSS.tooltipPointerInner)),u=n("<div></div>").addClass(t.wijCSS.tooltipTitle).addClass(t.wijCSS.header).addClass(t.wijCSS.cornerAll),a=n("<a href='#'></a>").addClass(t.wijCSS.tooltipClose).addClass(t.wijCSS.stateDefault).addClass(t.wijCSS.cornerAll);return a.append(n("<span></span>").addClass(t.wijCSS.icon).addClass(t.wijCSS.iconClose)).bind("click",n.proxy(e._onClickCloseBtn,e)),t.closeBehavior!=="sticky"&&a.hide(),t.showCallout||o.hide(),i.append(u).append(a).append(s).append(o).css("position","absolute").attr("role","tooltip").appendTo("body").hide(),r._$tooltip=i,r._container=s,r._callout=o,r._closeBtn=a,r._title=u,r},t.prototype._bindLiveEvents=function(){var e=this,t=e.options,r=e.element;e._content===undefined&&(e._content=r.attr("title"),r.attr("title","")),r.unbind(".tooltip"),t.mouseTrailing&&r.bind("mousemove.tooltip",function(n){if(t.disabled)return;var r=t.position.offset||"",i=r.split(" ");i.length===2?e.showAt({x:n.pageX+parseInt(i[0],10),y:n.pageY+parseInt(i[1],10)}):e.showAt({x:n.pageX,y:n.pageY})});switch(t.triggers){case"hover":r.bind("mouseover.tooltip",n.proxy(e.show,e)).bind("mouseout.tooltip",n.proxy(e._hideIfNeeded,e));break;case"click":r.bind("click.tooltip",n.proxy(e.show,e));break;case"focus":r.bind("focus.tooltip",n.proxy(e.show,e)).bind("blur.tooltip",n.proxy(e._hideIfNeeded,e));break;case"rightClick":r.bind("contextmenu.tooltip",function(t){e.show(),t.preventDefault()})}},t.prototype._hideIfNeeded=function(){var e=this,t=e.options,n=t.closeBehavior;if(n==="sticky"||t.modal||n==="none"||t.disabled)return;e.hide()},t.prototype._flipTooltip=function(e,t,n){var r=this,i=r._tooltipCache,s=i?i._$tooltip:null,o={width:s.width(),height:s.height()},u=r._flipCallout(e,o,t),a=u&&u.flip,f,l;return!i||!u||!a.h&&!a.v?u.calloutShape:(f=s.width(),l=s.height(),a.h==="l"?e.left-=f+n.right*2+1:a.h==="r"?e.left+=f+n.left*2+1:a.v==="t"?e.top-=l+n.bottom*2+1:a.v==="b"&&(e.top+=l+n.top*2+1),u.calloutShape)},t.prototype._flipCallout=function(e,t,r){var i=this,s=i.options,u=i._tooltipCache,f=u._$tooltip,l={h:!1,v:!1},c=n(a),h=(s.position.collision||"flip").split(" ");h.length===1&&(h[1]=h[0]);if(!u||h[0]!=="flip"&&h[1]!=="flip")return{flip:l,calloutShape:null};h[0]==="flip"&&(e.left<0||e.left+t.width>c.width()+c.scrollLeft())&&(l.h=!0),h[0]==="flip"&&(e.top<0||e.top+t.height>c.height()+c.scrollTop())&&(l.v=!0);if(s.showCallout){l.h&&(r.indexOf("l")>-1?(r=r.replace(/l/,"r"),l.h="l"):r.indexOf("r")>-1&&(r=r.replace(/r/,"l"),l.h="r")),l.v&&(r.indexOf("t")>-1?(r=r.replace(/t/,"b"),l.v="t"):r.indexOf("b")>-1&&(r=r.replace(/b/,"t"),l.v="b"));if(l.h||l.v)i._removeCalloutCss(),f.addClass(o+r)}return{flip:l,calloutShape:r}},t.prototype._set_position=function(e){var t=this,n=t.options,r=n.position;n.showCallout&&((e.my!==r.my||e.at!==r.at)&&t._setPosition(),t._setCalloutOffset(!0)),t._setText()},t.prototype._set_showCallout=function(){var e=this,t=e._tooltipCache,n=t?t._callout:null;if(!t||!n)return;e.options.showCallout?(e._setCalloutCss(),n.show()):n.hide()},t.prototype._set_closeBehavior=function(){var e=this,t=e._tooltipCache,n=t?t._closeBtn:null;n&&n[e.options.closeBehavior==="sticky"?"show":"hide"]()},t.prototype._set_triggers=function(){this._bindLiveEvents()},t.prototype._set_mouseTrailing=function(){this._bindLiveEvents()},t.prototype._getCalloutShape=function(){var e=this,t=e.options.position,r=function(e){return n.makeArray(n.map(e,function(e){return e.substr(0,1)}))},i=r(t.my.split(" ")),s=r(t.at.split(" ")),o=[];return i.length===2&&(o=i),i[0]===s[0]?(i[1]==="t"&&s[1]==="b"||i[1]==="b"&&s[1]==="t")&&o.reverse():s[0]==="c"&&o.reverse(),o[0]==="c"&&o.reverse(),o.join("")},t.prototype._setCalloutCss=function(){var e=this,t=e.options,r=e._tooltipCache,i=r?r._$tooltip:null,s="",u="",a=n.support.isTouchEnabled;if(!t.showCallout&&!a)return;return e._removeCalloutCss(),u=e._getCalloutShape(),s=o+u,i&&i.addClass(s),u},t.prototype._removeCalloutCss=function(){var e=this._tooltipCache,t;e&&(t=e._$tooltip,n.each(["tl","tc","tr","bl","bc","br","rt","rc","rb","lt","lc","lb","cc"],function(e,n){var r=o+n;if(t.hasClass(r))return t.removeClass(r),!1}))},t.prototype._getBorder=function(e){var t={};return n.each(["top","right","left","bottom"],function(n,r){t[r]=u(e.css("border-"+r+"-width"))}),t},t.prototype._setPosition=function(){var e=this,t=e.options,r=t.position,i=r.my,s=e._tooltipCache,o=s?s._$tooltip:null,a=o.is(":hidden"),f=e._setCalloutCss(),l=f?f.split(""):null,c=[0,0],h=s._callout,p,d,v,m,g,y={width:o.width(),height:o.height()},b,w,E=n.support.isTouchEnabled;a&&o.show(),o.css({left:0,top:0});if(t.showCallout){p=e._getBorder(h),v=u(h.css("left")),d=u(h.css("top")),m=u(h.css("right")),g=u(h.css("bottom"));switch(l[0]){case"l":c[0]=p.right;break;case"r":c[0]=-p.left;break;case"b":c[1]=g;break;case"t":c[1]=-d}switch(l[1]){case"t":c[1]=-d;break;case"b":c[1]=g;break;case"r":c[0]=m;break;case"l":c[0]=-v}}if(E&&E()){switch(l[0]){case"l":c[0]=c[0]+30;break;case"r":c[0]=c[0]-30;break;case"b":c[1]=c[1]-30;break;case"t":c[1]=c[1]+30}switch(l[1]){case"t":c[1]=c[1]+30;break;case"b":c[1]=c[1]-30;break;case"r":c[0]=c[0]-30;break;case"l":c[0]=c[0]+30}}r.my.indexOf(" ")>-1?i=r.my.split(" ")[0]+"+"+c[0]+" "+r.my.split(" ")[1]+"+"+c[1]:i=r.my+"+"+c[0]+" "+r.my+"+"+c[1],o.position({my:i,at:r.at,of:r.of,collision:"none none"}),b=e._flipCallout(o.offset(),y,f),w=b.flip;if(w.h||w.v)o.css({left:0,top:0}),o.position({my:i,at:r.at,of:r.of,collision:r.collision});t.showCallout&&e._setUnfilledCallout(f),e._calloutShape=f,a&&o.hide()},t.prototype._setCalloutOffset=function(e){var t=this,r=t.options,i=t._tooltipCache,s=i?i._$tooltip:null,o=i&&i._callout,u=t._calloutShape,a=!1,f=r.position.offset,l="",c=[],h=r.calloutAnimation;if(!o)return;if(!f||f.length===0)return;o.stop(!0,!0),n.each(["tr","tc","tl","bl","bc","br"],function(e,t){if(u===t)return a=!0,!1}),f&&(c=f.split(" "),c.length===2?l=a?c[0]:c[1]:c.length===1&&(l=c[0])),c&&c.length===2&&c[0]==="none"&&c[1]==="none"?o.css("left","").css("top",""):l==="none"?o.css(a?"left":"top",""):l!==""&&(e&&!e.disabled?a?o.animate({left:l},h.duration,h.easing):o.animate({top:l},h.duration,h.easing):o.css(a?"left":"top",l))},t.prototype._setUnfilledCallout=function(e){var t=this,n=t._tooltipCache,r=n?n._$tooltip:null,i=n&&n._callout,s=i&&i.children(),o=e.split(""),u=r?r.css("background-color"):"";if(!s)return;s.css({"border-left-color":"","border-top-color":"","border-bottom-color":"","border-right-color":""});if(!t.options.calloutFilled)switch(o[0]){case"l":s.css("border-right-color",u);break;case"t":s.css("border-bottom-color",u);break;case"r":s.css("border-left-color",u);break;case"b":s.css("border-top-color",u)}},t.prototype._showTooltip=function(){var e=this,r=e.options,i=e._tooltipCache,s=i?i._$tooltip:null,o,u,a;if(!i)return;if(e._trigger("showing",null,e)===!1){s.is(":visible")&&s.hide();return}e._showModalLayer(),s.css("z-index",99999),n.fn.wijshow?(u={show:!0,context:s},o=n.extend({},r.animation,r.showAnimation),s.is(":visible")&&(a=s.offset(),s.offset(h),n.extend(u,{pos:a}),o.animated="tooltipSlide"),s.wijshow(o,t.animations,u,null,function(){e._trigger("shown")})):(s.show(),e._trigger("shown")),e._setCalloutOffset(!1)},t.prototype._hideTooltip=function(){var e=this,r=e.options,i=e._tooltipCache,s=i?i._$tooltip:null,o=n.extend({},r.animation,r.hideAnimation),u;if(!i)return;if(e._trigger("hiding",null,e)===!1)return;e._hideModalLayer(),n.fn.wijhide?(u={show:!1,context:s},s.wijhide(o,t.animations,u,null,function(){e._trigger("hidden"),s.css("z-index","")})):(s.hide(),e._trigger("hidden"),s.css("z-index",""))},t.prototype._getContent=function(e){var t={data:""},r;return n.isFunction(e)?(r=e.call(this.element,t),t.data!==""?t.data:r):window[e]&&n.isFunction(window[e])?(r=window[e].call(this.element,t),t.data!==""?t.data:r):e},t.prototype._setText=function(){var e=this,t=e.options,n=e._tooltipCache,r="",i="",s=n?n._title:null;if(!n)return;r=e._getContent(t.content),r=r===""?e._content:r,n._container.html(r),i=e._getContent(t.title),i!==""?s.html(i).show():s.hide()},t.prototype._showModalLayer=function(){var e=this,t=e.options,r=null;e.options.modal&&(r=n("<div>").addClass(t.wijCSS.overlay).css("z-index",99e3).width(e._getDocSize("Width")).height(e._getDocSize("Height")).appendTo("body"),n(window).bind("resize.wijtooltip",function(){r.width(e._getDocSize("Width")).height(e._getDocSize("Height"))}),e._tooltipCache._modalLayer=r)},t.prototype._hideModalLayer=function(){var e=this,t=e._tooltipCache._modalLayer;t&&(t.css("z-index","").remove(),n(window).unbind("resize.wijtooltip"))},t.prototype._getDocSize=function(e){var t,r,i="documentElement",s="body";return n.browser.msie&&parseFloat(n.browser.version)<9?(t=c(f[i]["scroll"+e],f[s]["scroll"+e]),r=c(f[i]["offset"+e],f[s]["offset"+e]),t<r?n(a)[e.toLowerCase()]()+"px":t+"px"):n(f)[e.toLowerCase()]()+"px"},t.prototype._setSize=function(e,t){var n=this,r=n._tooltipCache,i=r?r._$tooltip:null;i&&i.css(e,t)},t.prototype._onClickCloseBtn=function(e){this.hide(),e.preventDefault()},t.animations={fade:function(e,t){e=n.extend({duration:300,easing:"swing"},e,t),e.context.stop(!0,!0).animate(e.show?{opacity:"show"}:{opacity:"hide"},e)},tooltipSlide:function(e,t){e=n.extend({duration:300,easing:"swing"},e,t),e.context.stop(!0,!0).animate({left:e.pos.left,top:e.pos.top},e)}},t._getTooltip=function(n){return t._tooltips[n]},t._removeTooltip=function(n){var r=t._tooltips[n],i=r?r._$tooltip:null;r&&(r.count--,r.count<=0&&(i.remove(),t._tooltips[n]=null))},t}(e.wijmoWidget);t.wijtooltip=p;var d=function(){function e(){this.initSelector=":jqmData(role='wijtooltip')",this.wijCSS={tooltip:"wijmo-wijtooltip",tooltipContainer:"wijmo-wijtooltip-container",tooltipPointer:"wijmo-wijtooltip-pointer",tooltipPointerInner:"wijmo-wijtooltip-pointer-inner",tooltipTitle:"wijmo-wijtooltip-title",tooltipClose:"wijmo-wijtooltip-close"},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-a",stateDefault:"ui-btn-up-a",stateHover:"ui-btn-down-a",stateActive:"ui-btn-down-a"},this.content="",this.title="",this.closeBehavior="auto",this.mouseTrailing=!1,this.triggers="hover",this.position={my:"left bottom",at:"right top",offset:null},this.showCallout=!0,this.animation={animated:"fade",duration:500,easing:null},this.showAnimation={},this.hideAnimation={},this.showDelay=150,this.hideDelay=150,this.calloutAnimation={duration:1e3,disabled:!1,easing:null},this.calloutFilled=!1,this.modal=!1,this.group=null,this.ajaxCallback=null,this.showing=null,this.shown=null,this.hiding=null,this.hidden=null,this.cssClass="",this.controlwidth=null,this.controlheight=null}return e}();p.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new d),n.wijmo.registerWidget(r,p.prototype)})(e.tooltip||(e.tooltip={}));var t=e.tooltip})(wijmo||(wijmo={}));var TooltipCache=function(){function e(){}return e}();