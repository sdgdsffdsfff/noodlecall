var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijaccordion",i="wijmo-wijaccordion",s="wijmo-wijaccordion-top",o="wijmo-wijaccordion-bottom",u="wijmo-wijaccordion-left",a="wijmo-wijaccordion-right",f="wijmo-wijaccordion-header",l="wijmo-wijaccordion-content",c="wijmo-wijaccordion-content-active",h="wijmo-wijaccordion-icons",p="ui-helper-horizontal",d=function(t){function r(){t.apply(this,arguments),this.widgetEventPrefix="wijaccordion"}return __extends(r,t),r.prototype._setOption=function(e,n){var r=this.options;if(r[e]!==n)switch(e){case"selectedIndex":this.activate(n);break;case"disabled":n?this.element.addClass(r.wijCSS.stateDisabled):this.element.removeClass(r.wijCSS.stateDisabled);break;case"event":this._unbindLiveEvents(),this.options.event=n,this._bindLiveEvents();break;case"header":this._handleHeaderChange(n,r.header);break;case"animated":break;case"expandDirection":this._onDirectionChange(n,!0,r.expandDirection);break;default:}t.prototype._setOption.call(this,e,n)},r.prototype._handleHeaderChange=function(e,t){var n=this.options.wijCSS,r=this.element.find(t);r.removeClass(n.wijaccordionHeader).removeClass(f).removeClass(n.stateActive).removeClass(this._triangleIconOpened),r.siblings("."+l).removeClass(n.wijaccordionContent).removeClass(l).removeClass(n.content).removeClass(n.wijaccordionContentActive).removeClass(c),this._initHeaders(e)},r.prototype._initHeaders=function(e){typeof e=="undefined"&&(e=null);var t=this.options,e=e?e:t.header,n=this.element.find(e);n.each(jQuery.proxy(this._initHeader,this))},r.prototype._initHeader=function(e,t){var r=this.options,s=r.wijCSS,o=this.element.data("rightToLeft"),u=n(t),a=n(u.next()[0]);o&&(u.remove(),u.insertAfter(a)),u.addClass(f).addClass(s.wijaccordionHeader).attr("role","tab"),a.attr("role","tabpanel"),u.find("> a").length===0&&u.wrapInner('<a href="#"></a>'),u.find("> ."+s.icon).length===0&&n("<span></span>").addClass(s.icon).insertBefore(n("> a",u)[0]),e===r.selectedIndex?(u.addClass(s.stateDefault).addClass(s.stateActive).addClass(this._headerCornerOpened).attr({"aria-expanded":"true",tabIndex:0}),u.find("> ."+s.icon).addClass(this._triangleIconOpened),a.addClass(c).addClass(s.wijaccordionContentActive).addClass(this._contentCornerOpened).wijTriggerVisibility()):(u.addClass(s.stateDefault).addClass(s.cornerAll).attr({"aria-expanded":"false",tabIndex:-1}),u.find("> .ui-icon").addClass(this._triangleIconClosed),a.hide()),a.addClass(l).addClass(s.wijaccordionContent).addClass(s.content);for(;;){if(u.parent().hasClass(i))break;u.unwrap()}},r.prototype._create=function(){var e=this.options,r=this;window.wijmoApplyWijTouchUtilEvents&&(n=window.wijmoApplyWijTouchUtilEvents(n)),this.element.addClass(i).addClass(e.wijCSS.wijaccordion).addClass(e.wijCSS.widget).addClass(h).addClass(e.wijCSS.wijaccordionIcons).addClass(e.wijCSS.helperClearFix),e.disabled&&this.element.addClass(e.wijCSS.stateDisabled),this._onDirectionChange(e.expandDirection,!1),this._initHeaders(),this.element.attr("role","tablist"),n(window).on("resize.wijaccordion",function(e){r._adjustAccordion()}),(e.expandDirection==="left"||e.expandDirection==="right")&&r._adjustAccordion(),this._getDefaultLayoutSetting(),t.prototype._create.call(this)},r.prototype._init=function(){this._bindLiveEvents()},r.prototype._adjustAccordion=function(){if(this.options.expandDirection==="top"||this.options.expandDirection==="bottom")return;var e=this._getHeaders(),t=n("."+l,this.element),r=t.parent().width(),i=parseInt(t.css("paddingLeft"),10)+parseInt(t.css("paddingRight"),10)+parseInt(t.css("borderRightWidth"),10)+parseInt(t.css("borderLeftWidth"),10),s=n("."+f,this.element).outerWidth(!0),o=r-e.length*(s+4)-i,o=o<576?o:576;t.width(o)},r.prototype._getDefaultLayoutSetting=function(){var e=n("."+l,this.element);this.options.expandDirection==="top"||this.options.expandDirection==="bottom"?this._defaultLayoutSetting={paddingTop:e.css("paddingTop"),paddingBottom:e.css("paddingBottom")}:this._defaultLayoutSetting={paddingLeft:e.css("paddingLeft"),paddingRight:e.css("paddingRight"),width:e.width()}},r.prototype.destroy=function(){var e=this.options;this._unbindLiveEvents(),this.element.removeClass(e.wijCSS.wijaccordion).removeClass(i).removeClass(e.wijCSS.widget).removeClass(e.wijCSS.wijaccordionIcons).removeClass(h).removeAttr("role"),n(window).off("resize.wijaccordion"),t.prototype.destroy.call(this)},r.prototype._getHeaders=function(){var e=this.options,t=this.element.data("rightToLeft"),r=[],i,s,o=this.element.find(e.header);if(!(o.length>0&&!n(o[0]).hasClass(f)&&n(o[0]).hasClass(l)))return o;for(i=0;i<o.length;i+=1)s=t?n(o[i]).next("."+f):n(o[i]).prev("."+f),s.length>0&&r.push(s[0]);return n(r)},r.prototype.activate=function(e){var t,r=this.options,i=this._getHeaders(),s,o,u=this.element.data("rightToLeft"),a,f,h,d,v,m,g,y,b,w;s=n(jQuery.grep(i,function(e){return n(e).hasAllClasses(r.wijCSS.stateActive)})),typeof e=="number"?t=n(i[e]):typeof e=="string"?(e=parseInt(e,0),t=n(i[e])):(t=n(e),e=i.index(e));if(t.hasAllClasses(r.wijCSS.stateDisabled))return!1;if(t.hasAllClasses(r.wijCSS.stateActive))if(r.requireOpenedPane){if(s.length===t.length&&s.index()===t.index())return!1}else s=t,t=n(null);else r.requireOpenedPane||(s=n(null));a=i.index(t),f=i.index(s),h=u?t.prev("."+l):t.next("."+l),d=u?s.prev("."+l):s.next("."+l);if(s.length===0&&t.length===0)return!1;r.expandDirection==="left"||r.expandDirection==="right"?o=this._defaultLayoutSetting.width:o=h.css("width");if(!this._trigger("beforeSelectedIndexChanged",null,{newIndex:a,prevIndex:f}))return!1;s.removeClass(r.wijCSS.stateActive).removeClass(this._headerCornerOpened).addClass(r.wijCSS.stateDefault).addClass(r.wijCSS.cornerAll).attr({"aria-expanded":"false",tabIndex:-1}).find("> .ui-icon").removeClass(this._triangleIconOpened).addClass(this._triangleIconClosed),t.removeClass("ui-corner-all").addClass(r.wijCSS.stateActive).addClass(this._headerCornerOpened).attr({"aria-expanded":"true",tabIndex:0}).find("> .ui-icon").removeClass(this._triangleIconClosed).addClass(this._triangleIconOpened),r.animated?(v={toShow:h,toHide:d,complete:jQuery.proxy(function(){d.removeClass(r.wijCSS.wijaccordionContentActive).removeClass(c),h.addClass(r.wijCSS.wijaccordionContentActive).addClass(c).wijTriggerVisibility(),d.css("display",""),h.css("display",""),n.fn.wijlinechart&&(d.find(".wijmo-wijlinechart").wijlinechart("redraw"),h.find(".wijmo-wijlinechart").wijlinechart("redraw")),o!==null&&o!==undefined&&(r.expandDirection==="left"||r.expandDirection==="right")&&h.width(o),this._trigger("selectedIndexChanged",null,{newIndex:a,prevIndex:f})},this),horizontal:this.element.hasClass(p),rightToLeft:this.element.data("rightToLeft"),down:a>f,autoHeight:r.autoHeight||r.fillSpace,defaultLayoutSetting:this._defaultLayoutSetting},m=r.animated,g=r.duration,n.isFunction(m)&&(r.animated=m(v)),n.isFunction(g)&&(r.duration=g(v)),y=n.wijmo.wijaccordion.animations,b=r.duration,w=r.animated,w&&!y[w]&&!n.easing[w]&&(w="slide"),y[w]||(y[w]=function(e){this.slide(e,{easing:w,duration:b||700})}),y[w](v)):(s.length>0&&d.hide().removeClass(r.wijCSS.wijaccordionContentActive).removeClass(c),t.length>0&&h.show().addClass(c).addClass(r.wijCSS.wijaccordionContentActive).addClass(this._contentCornerOpened).wijTriggerVisibility(),n.fn.wijlinechart&&(d.find(".wijmo-wijlinechart").wijlinechart("redraw"),h.find(".wijmo-wijlinechart").wijlinechart("redraw")),o!==null&&o!==undefined&&(r.expandDirection==="left"||r.expandDirection==="right")&&h.width(o),this._trigger("selectedIndexChanged",null,{newIndex:a,prevIndex:f})),this.options.selectedIndex=a},r.prototype._bindLiveEvents=function(){var e=this,t=this.options,r="."+f;this.element.on(t.event+".wijaccordion",r,jQuery.proxy(this._onHeaderClick,this)).on("keydown.wijaccordion",r,jQuery.proxy(this._onHeaderKeyDown,this)).on("mouseenter.wijaccordion",r,function(){n(this).addClass(t.wijCSS.stateHover)}).on("mouseleave.wijaccordion",r,function(){n(this).removeClass(t.wijCSS.stateHover)}).on("focus.wijaccordion",r,function(){n(this).addClass(t.wijCSS.stateFocus)}).on("blur.wijaccordion",r,function(){n(this).removeClass(t.wijCSS.stateFocus)})},r.prototype._unbindLiveEvents=function(){this.element.off(".wijaccordion","."+f)},r.prototype._onHeaderClick=function(e){return this.options.disabled||this.activate(e.currentTarget),!1},r.prototype._onHeaderKeyDown=function(t){if(this.options.disabled||t.altKey||t.ctrlKey)return;if(!n.ui)return;var r=e.getKeyCodeEnum(),i=this.element.find("."+f+"."+this.options.wijCSS.stateFocus),s,o=this._getHeaders();if(i.length>0){s=n("."+f,this.element).index(i);switch(t.keyCode){case r.RIGHT:case r.DOWN:if(o[s+1])return o[s+1].focus(),!1;break;case r.LEFT:case r.UP:if(o[s-1])return o[s-1].focus(),!1;break;case r.SPACE:case r.ENTER:this.activate(t.currentTarget),t.preventDefault()}}return!0},r.prototype._onDirectionChange=function(e,t,r){typeof r=="undefined"&&(r=null);var c,h,d,v,m,g,y=this.options;t&&(h=this.element.find("."+f+"."+this._headerCornerOpened),h.removeClass(this._headerCornerOpened),d=this.element.find("."+l+"."+this._contentCornerOpened),d.removeClass(this._contentCornerOpened),v=this.element.find("."+this._triangleIconOpened),m=this.element.find("."+this._triangleIconClosed),v.removeClass(this._triangleIconOpened),m.removeClass(this._triangleIconClosed)),r!==null&&this.element.removeClass(i+"-"+r);switch(e){case"top":this._headerCornerOpened=y.wijCSS.cornerBottom,this._contentCornerOpened=y.wijCSS.cornerTop,this._triangleIconOpened=y.wijCSS.iconArrowUp,this._triangleIconClosed=y.wijCSS.iconArrowRight,c=!0,this.element.removeClass(p),this.element.addClass(s).addClass(y.wijCSS.wijaccordionTop);break;case"right":this._headerCornerOpened=y.wijCSS.cornerLeft,this._contentCornerOpened=y.wijCSS.cornerRight,this._triangleIconOpened=y.wijCSS.iconArrowRight,this._triangleIconClosed=y.wijCSS.iconArrowDown,c=!1,this.element.addClass(p),this.element.addClass(a).addClass(y.wijCSS.wijaccordionRight);break;case"left":this._headerCornerOpened=y.wijCSS.cornerRight,this._contentCornerOpened=y.wijCSS.cornerLeft,this._triangleIconOpened=y.wijCSS.iconArrowLeft,this._triangleIconClosed=y.wijCSS.iconArrowDown,c=!0,this.element.addClass(p),this.element.addClass(u).addClass(y.wijCSS.wijaccordionLeft);break;default:this._headerCornerOpened=y.wijCSS.cornerTop,this._contentCornerOpened=y.wijCSS.cornerBottom,this._triangleIconOpened=y.wijCSS.iconArrowDown,this._triangleIconClosed=y.wijCSS.iconArrowRight,c=!1,this.element.removeClass(p),this.element.addClass(o).addClass(y.wijCSS.wijaccordionBottom)}g=this.element.data("rightToLeft"),this.element.data("rightToLeft",c),t&&(v.addClass(this._triangleIconOpened),m.addClass(this._triangleIconClosed),h.addClass(this._headerCornerOpened),d.addClass(this._contentCornerOpened)),t&&c!==g&&this.element.children("."+f).each(function(e,t){var r=n(this),i;c?(i=r.next("."+l),r.remove(),r.insertAfter(i)):(i=r.prev("."+l),r.remove(),r.insertBefore(i))})},r}(e.wijmoWidget);t.wijaccordion=d;var v=function(){function e(){this.wijCSS={wijaccordion:"",wijaccordionTop:"",wijaccordionBottom:"",wijaccordionLeft:"",wijaccordionRight:"",wijaccordionHeader:"",wijaccordionContent:"",wijaccordionContentActive:"",wijaccordionIcons:""},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body ui-body-c"},this.initSelector=":jqmData(role='wijaccordion')",this.animated="slide",this.duration=null,this.event="click",this.disabled=!1,this.expandDirection="bottom",this.header="> li > :first-child,> :not(li):even",this.requireOpenedPane=!0,this.selectedIndex=0}return e}();d.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new v),n.wijmo.registerWidget(r,d.prototype),n.extend(n.wijmo.wijaccordion,{animations:{slide:function(e,t){e=n.extend({easing:"swing",duration:300},e,t);var r,i;e.horizontal?(r={width:"show"},i={width:"hide"}):(r={height:"show"},i={height:"hide"});if(!e.toHide.size()){e.toShow.stop(!0,!0).animate(r,e);return}if(!e.toShow.size()){e.toHide.stop(!0,!0).animate(i,e);return}var s=e.toShow.css("overflow"),o=0,u={},a={},f,l=e.horizontal?["width","paddingLeft","paddingRight"]:["height","paddingTop","paddingBottom"],c,h=e.toShow;e.horizontal?(c=h[0].style.height,h.height(parseInt(h.parent().height(),10)-parseInt(h.css("paddingTop"),10)-parseInt(h.css("paddingBottom"),10)-(parseInt(h.css("borderTopWidth"),10)||0)-(parseInt(h.css("borderBottomWidth"),10)||0))):(c=h[0].style.width,h.width(parseInt(h.parent().width(),10)-parseInt(h.css("paddingLeft"),10)-parseInt(h.css("paddingRight"),10)-(parseInt(h.css("borderLeftWidth"),10)||0)-(parseInt(h.css("borderRightWidth"),10)||0))),n.each(l,function(t,r){a[r]="hide";if(!e.horizontal&&r==="height"){var i=(""+n.css(e.toShow[0],r)).match(/^([\d+-.]+)(.*)$/);u[r]={value:i?i[1]:"0",unit:i?i[2]||"px":"px"}}else u[r]={value:e.defaultLayoutSetting[r],unit:"px"}}),e.horizontal?f={width:0,overflow:"hidden"}:f={height:0,overflow:"hidden"},e.toShow.css(f).stop(!0,!0).show(),e.toHide.filter(":hidden").each(e.complete).end().filter(":visible").stop(!0,!0).animate(a,{step:function(t,n){var r;if(n.prop===e.horizontal?"width":"height")o=n.end-n.start===0?0:(n.now-n.start)/(n.end-n.start);r=o*u[n.prop].value,r<0&&(r=0),e.toShow[0].style[n.prop]=r+u[n.prop].unit},duration:e.duration,easing:e.easing,complete:function(){e.autoHeight||e.toShow.css(e.horizontal?"width":"height",""),e.toShow.css(e.horizontal?"height":"width",c),e.toShow.css({overflow:s}),e.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})})(e.accordion||(e.accordion={}));var t=e.accordion})(wijmo||(wijmo={}));