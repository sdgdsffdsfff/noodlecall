var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r=function(){function e(){this.wijCSS={superpanelHeader:"wijmo-wijsuperpanel-header",superpanelFooter:"wijmo-wijsuperpanel-footer",superpanelHandle:"",superpanelVBarbuttonTop:"",superpanelVBarbuttonBottom:"",superpanelHBarbuttonLeft:"",superpanelHBarbuttonRight:"",superpanelHBarContainer:"",superpanelVBarContainer:"",superpanelButton:"",superpanelButtonLeft:"",superpanelButtonRight:"",superpanelButtonTop:"",superpanelButtonBottom:""},this.wijMobileCSS={header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},this.initSelector=":jqmData(role='wijsuperpanel')",this.allowResize=!1,this.autoRefresh=!1,this.animationOptions={queue:!1,disabled:!1,duration:250,easing:undefined},this.hScrollerActivating=null,this.hScroller={scrollBarPosition:"bottom",scrollBarVisibility:"auto",scrollMode:"scrollBar",scrollValue:null,scrollMax:100,scrollMin:0,scrollLargeChange:null,scrollSmallChange:null,scrollMinDragLength:6,increaseButtonPosition:null,decreaseButtonPosition:null,hoverEdgeSpan:20,firstStepChangeFix:0},this.keyboardSupport=!1,this.keyDownInterval=100,this.mouseWheelSupport=!0,this.bubbleScrollingEvent=!0,this.resizableOptions={handles:"all",helper:"ui-widget-content wijmo-wijsuperpanel-helper"},this.resized=null,this.dragStop=null,this.painted=null,this.scrolling=null,this.scroll=null,this.scrolled=null,this.showRounder=!0,this.vScrollerActivating=null,this.vScroller={scrollBarPosition:"right",scrollBarVisibility:"auto",scrollMode:"scrollBar",scrollValue:null,scrollMax:100,scrollMin:0,scrollLargeChange:null,scrollSmallChange:null,scrollMinDragLength:6,increaseButtonPosition:null,decreaseButtonPosition:null,hoverEdgeSpan:20,firstStepChangeFix:0},this.customScrolling=!1,this.listenContentScroll=!1}return e}(),i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.destroy=function(){},t.prototype.needToScroll=function(e){},t.prototype.scrollChildIntoView=function(e){},t.prototype.hScrollTo=function(e,t){},t.prototype.vScrollTo=function(e,t){},t.prototype.scrollPxToValue=function(e,t){},t.prototype.scrollTo=function(e,t,n){},t.prototype.refresh=function(){},t.prototype.paintPanel=function(e){},t.prototype.getContentElement=function(){},t}(e.wijmoWidget);t.wijsuperpanel=i;var s;if(!n.support.isTouchEnabled||!n.support.isTouchEnabled()){var o="wijmo-wijsuperpanel-handle",u="wijmo-wijsuperpanel-hbarcontainer",a="wijmo-wijsuperpanel-vbarcontainer",f="",l="<div class='wijmo-wijsuperpanel-statecontainer'><div class='wijmo-wijsuperpanel-contentwrapper'><div class='wijmo-wijsuperpanel-templateouterwrapper'></div></div></div>",c="<div class='wijmo-wijsuperpanel-hbarcontainer {superpanelHBarContainer} {header}'><div class='wijmo-wijsuperpanel-handle {superpanelHandle} {stateDefault} {cornerAll}'><span class='{icon} {iconVGripSolid}'></span></div><div class='wijmo-wijsuperpanel-hbar-buttonleft {superpanelHBarbuttonLeft} {stateDefault} {cornerBL}'><span class='{icon} {iconArrowLeft}'></span></div><div class='wijmo-wijsuperpanel-hbar-buttonright {superpanelHBarbuttonRight} {stateDefault} {cornerBR}'><span class='{icon} {iconArrowRight}'></span></div></div>",h="<div class='wijmo-wijsuperpanel-vbarcontainer {superpanelVBarContainer} {header}'><div class='wijmo-wijsuperpanel-handle {superpanelHandle} {stateDefault} {cornerAll}'><span class='{icon} {iconHGripSolid}'></span></div><div class='wijmo-wijsuperpanel-vbar-buttontop {superpanelVBarbuttonTop} {stateDefault} {cornerTR}'><span class='{icon} {iconArrowUp}'></span></div><div class='wijmo-wijsuperpanel-vbar-buttonbottom {superpanelVBarbuttonBottom} {stateDefault} {cornerBR}'><span class='{icon} {iconArrowDown}'></span></div></div>",p="<div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton} wijmo-wijsuperpanel-buttonleft {superpanelButtonLeft}'><span class='{icon} {iconCaratLeft}'></span></div><div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton} wijmo-wijsuperpanel-buttonright {superpanelButtonRight}'><span class='{icon} {iconCaratRight}'></span></div>",d="<div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton}  wijmo-wijsuperpanel-buttontop {superpanelButtonTop}'><span class='{icon} {iconCaratUp}'></span></div><div class='{stateDefault} wijmo-wijsuperpanel-button {superpanelButton} wijmo-wijsuperpanel-buttonbottom {superpanelButtonBottom}'><span class='{icon} {iconCaratDown}'> </span></div>";i.prototype=n.extend(!0,{},n.Widget.prototype,{widgetEventPrefix:"wijsuperpanel",_setOption:function(e,t){var r=this,i=r.options,s=r._fields(),o=s.hbarDrag,u=s.vbarDrag,a=s.resizer;e==="animationOptions"?t=n.extend(i.animationOptions,t):e==="hScroller"?(t.scrollLargeChange!==undefined&&t.scrollLargeChange!==null&&(r._autoHLarge=!1),t=n.extend(i.hScroller,t),r.refresh()):e==="vScroller"?(t.scrollLargeChange!==undefined&&t.scrollLargeChange!==null&&(r._autoVLarge=!1),t=n.extend(i.vScroller,t),r.refresh()):e==="resizableOptions"&&(t=n.extend(r.resizableOptions,t)),n.Widget.prototype._setOption.apply(r,arguments),n.isPlainObject(t)&&(r.options[e]=t);switch(e){case"allowResize":r._initResizer();break;case"disabled":t?(o!==undefined&&o.draggable("disable"),u!==undefined&&u.draggable("disable"),a!==undefined&&a.resizable("disable")):(o!==undefined&&o.draggable("enable"),u!==undefined&&u.draggable("enable"),a!==undefined&&a.resizable("enable"));break;case"mouseWheelSupport":case"keyboardSupport":r._bindElementEvents(r,s,r.element,i)}return r},_create:function(){var e=this,t=e.options;t.vScroller.dir="v",t.hScroller.dir="h",e._initMarkup(),e.paintPanel(),e._initResizer(),e.options.disabled&&e.disable(),e._detectAutoRefresh(),t.listenContentScroll&&e._listenContentScroll(),e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver(),e.refresh()},"wijsuperpanel")},_initMarkup:function(){var e=this.options.wijCSS,t=/\{(\w+?)\}/ig,n=function(t,n){return e[n]};f=e.stateActive,c=c.replace(t,n),h=h.replace(t,n),p=p.replace(t,n),d=d.replace(t,n)},_detectAutoRefresh:function(){var e=this,t=n.wijmo.wijsuperpanel.panels;t===undefined&&(t=[],n.wijmo.wijsuperpanel.panels=t),t.push(e),e.options.autoRefresh&&(n.wijmo.wijsuperpanel.setAutoRefreshInterval||(n.wijmo.wijsuperpanel.setAutoRefreshInterval=e._setAutoRefreshInterval,n.wijmo.wijsuperpanel.setAutoRefreshInterval()))},_setAutoRefreshInterval:function(){var e=n.wijmo.wijsuperpanel.autoRereshInterval,t=n.wijmo.wijsuperpanel.panels,r;r=window.setInterval(function(){window.clearInterval(r);var e=t.length,i=!1,s,o,u,a,f,l;for(s=0;s<e;s++)o=t[s],u=o.element[0],a=o.options.autoRefresh,a&&(i=!0),f=o.getContentElement(),l=o._paintedMark,a&&f.is(":visible")&&(l===undefined||l.width!==f[0].offsetWidth||l.height!==f[0].offsetHeight||l.mainWidth!==u.offsetWidth||l.mainHeight!==u.offsetHeight)&&o.paintPanel();i&&window.setTimeout(n.wijmo.wijsuperpanel.setAutoRefreshInterval,0)},e===undefined?500:e)},destroy:function(){var e=this,t=e._fields(),r=e.element,i,s,o=e.options.wijCSS;n.wijmo.wijsuperpanel.panels=n.grep(n.wijmo.wijsuperpanel.panels,function(t){return t!==e},!1);if(!t.initialized)return;e._radiusKey&&e.element.css(e._radiusKey,""),t.intervalID!==undefined&&(window.clearInterval(t.intervalID),t.intervalID=undefined),t.resizer!==undefined&&t.resizer.resizable("destroy"),t.hbarContainer!==undefined&&(t.hbarDrag.remove(),t.hbarContainer.unbind("."+e.widgetName)),t.vbarContainer!==undefined&&(t.vbarDrag.remove(),t.vbarContainer.unbind("."+e.widgetName)),r.unbind("."+e.widgetName),t.contentWrapper.unbind("."+e.widgetName),i=t.stateContainer.find(">.wijmo-wijsuperpanel-button"),i.unbind("."+e.widgetName),s=t.templateWrapper,s.contents().each(function(e,t){r.append(t)}),t.stateContainer.remove(),t.tabindex&&r.removeAttr("tabindex"),r.removeClass(["wijmo-wijsuperpanel",o.widget,o.content,o.cornerAll].join(" ")),n.Widget.prototype.destroy.apply(e,arguments)},_fields:function(){var e=this,t=e.element,n=e.widgetName+"-fields",r=e._fieldsStore;return r===undefined&&(r={},t.data(n,r),e._fieldsStore=r),r},_hasMode:function(e,t){var r=e.scrollMode.split(",");return r=n.map(r,function(e){return n.trim(e).toLowerCase()}),n.inArray(t.toLowerCase(),r)>-1},_bindElementEvents:function(e,t,n,r){var i=e._hasMode(r.hScroller,"edge"),s=e._hasMode(r.vScroller,"edge"),o=e.widgetName;i||s?e._mousemoveBind===undefined&&(e._mousemoveBind=!0,n.bind("mousemove."+o,e,e._contentMouseMove),n.bind("mouseleave."+o,null,function(){e._clearInterval()})):(n.unbind("mousemove",e._contentMouseMove),e._mousemoveBind=undefined),r.mouseWheelSupport?e._mouseWheelBind===undefined&&(e._mouseWheelBind=!0,n.bind("mousewheel."+o,e,e._panelMouseWheel)):(n.unbind("mousewheel",e._panelMouseWheel),e._mouseWheelBind=undefined),r.keyboardSupport?e._keyboardBind===undefined&&(e._keyboardBind=!0,n.bind("keydown."+o,e,e._panelKeyDown)):(n.unbind("keydown",e._panelKeyDown),e._keyboardBind=undefined)},_dragStop:function(e,t,n){var r={dragHandle:n};t._trigger("dragStop",e,r)},_contentMouseMove:function(e){if(e.data.options.disabled)return;var t=e.data,r=t.options,i=r.hScroller,s=r.vScroller,o=n(e.currentTarget),u=t._fields(),a=t._hasMode(i,"edge"),f=t._hasMode(s,"edge"),l={X:e.pageX,Y:e.pageY},c=o.offset(),h=c.left,p=c.top,d=i.hoverEdgeSpan,v=s.hoverEdgeSpan,m=o.innerHeight(),g=o.innerWidth(),y="";h=l.X-h,p=l.Y-p,t._clearInterval(),a&&(h<d&&(y="left"),h>g-d&&(y="right")),f&&(p<v&&(y="top"),p>m-v&&(y="bottom")),t._setScrollingInterval(u,y,t,!1)},_setScrollingInterval:function(e,t,n,r){var i=n.options;t.length>0&&(e.internalFuncID=window.setInterval(function(){n._doScrolling(t,n,r)},i.keyDownInterval))},_scrollButtonMouseOver:function(e){var t=e.data,r=t.options,i=n(e.currentTarget);if(r.disabled)return;i.hasAllClasses(r.wijCSS.stateDisabled)||(i.bind("mouseout."+t.widgetName,t,t._buttonMouseOut).bind("mousedown."+t.widgetName,t,t._buttonMouseDown).bind("mouseup."+t.widgetName,t,t._buttonMouseUp).addClass(r.wijCSS.stateHover),t._buttonScroll(i,t,"buttonshover"))},_buttonScroll:function(e,t,n){var r="",i=t.options,s=t._fields(),o=t._hasMode(i.hScroller,n),u=t._hasMode(i.vScroller,n);e.hasClass("wijmo-wijsuperpanel-buttonleft")&&o?r="left":e.hasClass("wijmo-wijsuperpanel-buttonright")&&o?r="right":e.hasClass("wijmo-wijsuperpanel-buttontop")&&u?r="top":e.hasClass("wijmo-wijsuperpanel-buttonbottom")&&u&&(r="bottom"),r.length>0&&(t._clearInterval(),t._doScrolling(r,t,!0),t._setScrollingInterval(s,r,t,!0))},_listenContentScroll:function(){var e=this,t=e.options,n=e._fields(),r=n.hbarContainer,i=n.hbarDrag,s=n.vbarContainer,o=n.vbarDrag,u=n.templateWrapper,a=n.contentWrapper,f=a.width(),l=a.height(),c=u&&u.offset(),h=c&&c.left,p=c&&c.top,d=n.contentWidth,v=n.contentHeight;a.bind("scroll",function(n){var c=u.position(),h=c.left,p=c.top;a.scrollTop(0).scrollLeft(0),u.css({left:h,top:p}),h<=0&&h>f-d&&(e._updateScrollValue(e.scrollPxToValue(-h,"h"),t.hScroller),e._scrollDrag("h",r,i,!0)),p<=0&&p>l-v&&(e._updateScrollValue(e.scrollPxToValue(-p,"v"),t.vScroller),e._scrollDrag("v",s,o,!0))})},_buttonMouseDown:function(e){var t=e.data,r=n(e.currentTarget),i=t.options.wijCSS;if(t.options.disabled)return;r.hasAllClasses(i.stateDisabled)||(r.addClass(i.stateActive),t._buttonScroll(r,t,"buttons"))},_buttonMouseUp:function(e){var t=e.data,r=n(e.currentTarget);r.removeClass(t.options.wijCSS.stateActive),t._clearInterval()},_buttonMouseOut:function(e){var t=e.data,r=t.options.wijCSS,i=n(e.currentTarget);i.unbind("mouseout",t._buttonMouseOut).unbind("mousedown",t._buttonMouseDown).unbind("mouseup",t._buttonMouseUp).removeClass(r.stateHover).removeClass(r.stateActive),t._clearInterval()},_updateScrollValue:function(e,t){var r=n.Event("scrollValueChanged");t.scrollValue=e,this._trigger("scrollValueChanged",r,t)},_panelKeyDown:function(t){var n=t.data,r=n.options,i=t.shiftKey,s=t.keyCode,o=e.getKeyCodeEnum();if(!r.keyboardSupport||r.disabled)return;s===o.LEFT?n._doScrolling("left",n,i):s===o.RIGHT?n._doScrolling("right",n,i):s===o.UP?n._doScrolling("top",n,i):s===o.DOWN&&n._doScrolling("bottom",n,i),t.stopPropagation(),t.preventDefault()},_draggingInternal:function(e,t,n,r){var i=n.dir,s=i==="h",o=s?"left":"top",u=e.position[o]-t._getScrollContainerPadding(o),a=t._getTrackLen(i)-r[s?"outerWidth":"outerHeight"](!0),f=u/a,l=n.scrollMax-n.scrollLargeChange+1,c=f*l,h,p,d;c<n.scrollMin&&(c=n.scrollMin),c>l&&(c=l),h={oldValue:n.scrollValue,newValue:c,dir:i};if(!t._scrolling(!0,t,h))return;t.customScroll&&(d=Math.abs(t.customScroll),p=t.scrollPxToValue(d,n.dir)),t._updateScrollValue(p||c,n),t.customScroll=undefined,t._setDragAndContentPosition(!0,!1,i,"dragging")},_dragging:function(e,t,r){var i=r.options,s=n(e.target),o=s.parent();o.hasAllClasses(u)?r._draggingInternal(t,r,i.hScroller,s):r._draggingInternal(t,r,i.vScroller,s)},_panelMouseWheel:function(e,t){var r=e.data,i=r.options,s,o="",a,f=i.hScroller,l=i.vScroller,c;if(!i.mouseWheelSupport||i.disabled)return;s=n(e.srcElement||e.originalEvent.target),a=s.closest("."+u,r.element).size()>0,t>0?o=a?"left":"top":o=a?"right":"bottom",o.length>0&&r._doScrolling(o,r),c=!1,o==="left"&&(c=!r.hNeedScrollBar||Math.abs(f.scrollValue-f.scrollMin)<.001),o==="right"&&(c=!r.hNeedScrollBar||Math.abs(f.scrollValue-(f.scrollMax-r._getHScrollBarLargeChange()+1))<.001),o==="top"&&(c=!r.vNeedScrollBar||Math.abs(l.scrollValue-l.scrollMin)<.001),o==="bottom"&&(c=!r.vNeedScrollBar||Math.abs(l.scrollValue-(l.scrollMax-r._getVScrollBarLargeChange()+1))<.001);if(!c||!i.bubbleScrollingEvent||o==="left"||o==="right")e.stopPropagation(),e.preventDefault()},_documentMouseUp:function(e){var t=e.data.self,r=e.data.ele;r.removeClass(t.options.wijCSS.stateActive),t._clearInterval(),n(document).unbind("mouseup",t._documentMouseUp)},_scrollerMouseOver:function(e){var t=e.data,r=t.options,i,s=null,o=!1;if(r.disabled)return;i=n(e.srcElement||e.originalEvent.target||e.originalEvent.srcElement);if(i.hasAllClasses(r.wijCSS.stateDefault))s=i,o=!0;else if(i.parent().hasAllClasses(r.wijCSS.stateDefault))s=i.parent(),o=!0;else if(i.hasAllClasses(a)||i.hasAllClasses(u))s=i;s&&(o&&s.addClass(r.wijCSS.stateHover),s.bind("mouseout."+t.widgetName,t,t._elementMouseOut),s.bind("mousedown."+t.widgetName,t,t._elementMouseDown),s.bind("mouseup."+t.widgetName,t,t._elementMouseUp))},_elementMouseUp:function(e){var t=n(e.currentTarget);t.removeClass(f)},_elementMouseDown:function(e){var t=n(e.currentTarget),r=e.data,i,s,l="",c=!1,h=!1,p,d,v;if(r.options.disabled||e.which!==1)return;if(t.hasClass("wijmo-wijsuperpanel-vbar-buttontop"))l="top",h=!0;else if(t.hasClass("wijmo-wijsuperpanel-vbar-buttonbottom"))l="bottom",h=!0;else if(t.hasClass("wijmo-wijsuperpanel-hbar-buttonleft"))l="left",h=!0;else if(t.hasClass("wijmo-wijsuperpanel-hbar-buttonright"))l="right",h=!0;else{if(t.hasAllClasses(o)){t.addClass(f);return}t.hasAllClasses(u)?(i=t.find("."+o),p=i.offset(),e.pageX<p.left?l="left":l="right",c=!0):t.hasAllClasses(a)&&(s=t.find("."+o),d=s.offset(),e.pageY<d.top?l="top":l="bottom",c=!0)}r._clearInterval(),r._doScrolling(l,r,c),v=r._fields(),r._setScrollingInterval(v,l,r,c),h&&t.addClass(f),n(document).bind("mouseup."+r.widgetName,{self:r,ele:t},r._documentMouseUp)},doScrolling:function(e,t){this._doScrolling(e,this,t)},_setScrollerValue:function(e,t,n,r,i,s,o){var u=t.scrollMin,a=s?r:n,f=t.scrollValue,l=0,c,h,p,d,v;f||(f=u);if(i){c=t.scrollMax-r+1;if(Math.abs(f-c)<.001)return o._clearInterval(),!1;h=t.firstStepChangeFix,l=f+a,!s&&Math.abs(f-u)<1e-4&&!isNaN(h)&&(l+=h),l>c&&(l=c)}else{if(Math.abs(f-u)<.001)return o._clearInterval(),!1;l=f-a,l<0&&(l=u)}return p={oldValue:t.scrollValue,newValue:l,direction:e,dir:t.dir},o._scrolling(!0,o,p)?(o.customScroll&&(v=Math.abs(o.customScroll),d=o.scrollPxToValue(v,t.dir)),o._updateScrollValue(d||l,t),o.customScroll=undefined,!0):!1},_doScrolling:function(e,t,n){var r=t.options,i=r.vScroller,s=r.hScroller,o=t._getVScrollBarSmallChange(),u=t._getVScrollBarLargeChange(),a=t._getHScrollBarLargeChange(),f=t._getHScrollBarSmallChange();if(e==="top"||e==="bottom"){if(!t._setScrollerValue(e,i,o,u,e==="bottom",n,t))return;e="v"}else if(e==="left"||e==="right"){if(!t._setScrollerValue(e,s,f,a,e==="right",n,t))return;e="h"}t._setDragAndContentPosition(!0,!0,e)},_disableButtonIfNeeded:function(e){var t=e._fields(),n=e.options,r=t.buttonLeft,i=t.buttonRight,s=t.buttonTop,o=t.buttonBottom,u,a,f,l,c,h,p,d;t.intervalID>0&&window.clearInterval(t.intervalID),r!==undefined&&(u=e._getHScrollBarLargeChange(),a=n.hScroller.scrollMax-u+1,f=n.hScroller.scrollValue,l=n.hScroller.scrollMin,f===undefined&&(f=l),Math.abs(f-l)<.001||!t.hScrolling?r.addClass(n.wijCSS.stateDisabled):r.removeClass(n.wijCSS.stateDisabled),Math.abs(f-a)<.001||!t.hScrolling?i.addClass(n.wijCSS.stateDisabled):i.removeClass(n.wijCSS.stateDisabled)),s!==undefined&&(c=e._getVScrollBarLargeChange(),h=n.vScroller.scrollMax-c+1,p=n.vScroller.scrollValue,d=n.vScroller.scrollMin,p===undefined&&(p=d),Math.abs(p-d)<.001||!t.vScrolling?s.addClass(n.wijCSS.stateDisabled):s.removeClass(n.wijCSS.stateDisabled),Math.abs(p-h)<.001||!t.vScrolling?o.addClass(n.wijCSS.stateDisabled):o.removeClass(n.wijCSS.stateDisabled))},_clearInterval:function(){var e=this._fields(),t=e.internalFuncID;t>0&&(window.clearInterval(t),e.internalFuncID=-1)},_elementMouseOut:function(e){var t=n(e.currentTarget),r=e.data;t.unbind("mouseout",r._elementMouseOut),t.unbind("mousedown",r._elementMouseDown),t.unbind("mouseup",r._elementMouseUp),t.removeClass(r.options.wijCSS.stateHover)},_getScrollOffset:function(e){var t=n(e),r=this._fields(),i=r.contentWrapper,s=r.templateWrapper,o,u,a,f,l,c,h,p={left:null,top:null};return t.length===0?p:(o=t.offset(),u=s.offset(),o.leftWidth=o.left+t.outerWidth(),o.topHeight=o.top+t.outerHeight(),a=i.offset(),a.leftWidth=a.left+i.outerWidth(),a.topHeight=a.top+i.outerHeight(),c=o.left-u.left,o.left<a.left?p.left=c:o.leftWidth>a.leftWidth&&(h=o.leftWidth-u.left-i.innerWidth(),c<h?p.left=c:p.left=h),f=o.top-u.top,o.top<a.top?p.top=f:o.topHeight>a.topHeight&&(l=o.topHeight-u.top-i.innerHeight(),f<l?p.top=f:p.top=l),p)},_scrollDrag:function(e,t,n,r){var i=this,s=i.options,o=e==="v",u=o?s.vScroller:s.hScroller,a=u.scrollMin,f=u.scrollMax,l=u.scrollValue===undefined?a:u.scrollValue-a,c=i._getLargeChange(e),h=f-a-c+1,p=-1,d,v,m;l>h&&(l=h),t!==undefined&&(d=i._getTrackLen(e),v=n[o?"outerHeight":"outerWidth"](),m=i._getScrollContainerPadding(o?"top":"left"),p=l/h*(d-v)+m),p>=0&&n.css(o?"top":"left",p+"px"),i._scrollEnd(r,i,e)},needToScroll:function(e){var t=this._getScrollOffset(e);return t.top!==null||t.left!==null},scrollChildIntoView:function(e){var t=this._getScrollOffset(e),n=t.left,r=t.top;n!==null&&this.hScrollTo(n),r!==null&&this.vScrollTo(r)},hScrollTo:function(e,t){var n=this.options;this._updateScrollValue(t?e:this.scrollPxToValue(e,"h"),n.hScroller),this._setDragAndContentPosition(!0,!0,"h","nonestop")},vScrollTo:function(e,t){var n=this.options;this._updateScrollValue(t?e:this.scrollPxToValue(e,"v"),n.vScroller),this._setDragAndContentPosition(!0,!0,"v","nonestop")},scrollPxToValue:function(e,t){var n=this.options,r=t==="h"?"outerWidth":"outerHeight",i=t==="h"?"contentWidth":"contentHeight",s=t==="h"?"hScroller":"vScroller",o=this._fields(),u=o.contentWrapper,a=o[i],f=u[r](),l=n[s].scrollMin,c=n[s].scrollMax,h=c-l,p=t==="h"?this._getHScrollBarLargeChange():this._getVScrollBarLargeChange(),d=h-p+1,v=d*(e/(a-f));return v<l&&(v=l),v>d&&(v=d),v},scrollTo:function(e,t,n){this.hScrollTo(e,n),this.vScrollTo(t,n)},refresh:function(){this.paintPanel()},paintPanel:function(e){var t=this,r=t.element,i,s,o,u;return r.is(":visible")?(i=typeof document.activeElement!="unknown"?document.activeElement:undefined,s=t.options,o=t._fields(),o.initialized||t._initialize(o,r,t),t._resetLargeChange(t,o,s),t._bindElementEvents(t,o,r,s),u=o.templateWrapper,u.css({"float":"left",left:"0px",top:"0px",width:"auto",height:"auto"}),u.hide(),u.show(),o.contentWidth=u.width(),o.contentHeight=u.height(),u.css("float",""),t._setRounder(t,r),t._setInnerElementsSize(o,r),t._testScroll(t,o,s)===!1?!1:(t._initScrollBars(t,o,s),t._initScrollButtons(t,o,s),t._trigger("painted"),t._paintedMark={date:new Date,mainWidth:r[0].offsetWidth,mainHeight:r[0].offsetHeight,width:o.contentWidth,height:o.contentWidth},i!==undefined&&!e&&n(i).focus(),!0)):!1},_resetLargeChange:function(e,t,n){var r;e._autoVLarge&&(n.vScroller.scrollLargeChange=null),e._autoHLarge&&(n.hScroller.scrollLargeChange=null),t.vTrackLen=undefined,t.hTrackLen=undefined,t.vbarContainer&&(r=t.vbarContainer.children("."+o+":eq(0)"),r.detach(),t.vbarContainer.remove(),t.vbarContainer=undefined),t.hbarContainer&&(r=t.hbarContainer.children("."+o+":eq(0)"),r.detach(),t.hbarContainer.remove(),t.hbarContainer=undefined)},_initialize:function(e,t,n){var r=n.options.wijCSS;e.initialized=!0,t.addClass(["wijmo-wijsuperpanel",r.widget,r.content].join(" ")),e.oldHeight=t.css("height");var i=t.css("overflow");t.css("overflow",""),t.height(t.height()),t.css("overflow",i),n._createAdditionalDom(n,e,t)},getContentElement:function(){return this._fields().templateWrapper},_setButtonPosition:function(e,t,r,i,s,o,u){var a=i==="h",f="mouseover."+e.widgetName,l=a?"buttonLeft":"buttonTop",c=a?"buttonRight":"buttonBottom",h=o[l],v=o[c],m,g,y;e._hasMode(r,"buttons")||e._hasMode(r,"buttonshover")?(m=a?p:d,h===undefined&&(g=n(m).appendTo(u),g.bind(f,e,e._scrollButtonMouseOver),o[l]=h=u.children(a?".wijmo-wijsuperpanel-buttonleft":".wijmo-wijsuperpanel-buttontop"),o[c]=v=u.children(a?".wijmo-wijsuperpanel-buttonright":".wijmo-wijsuperpanel-buttonbottom")),y={my:a?"left":"top",of:s,at:a?"left":"top",collision:"none"},n.extend(y,r.decreaseButtonPosition),h.position(y),y={my:a?"right":"bottom",of:s,at:a?"right":"bottom",collision:"none"},n.extend(y,r.increaseButtonPosition),v.position(y)):h!==undefined&&(h.remove(),v.remove(),o[l]=o[c]=undefined)},_initScrollButtons:function(e,t,n){var r=t.contentWrapper,i=t.stateContainer;e._setButtonPosition(e,n,n.hScroller,"h",r,t,i),e._setButtonPosition(e,n,n.vScroller,"v",r,t,i)},_getVScrollBarSmallChange:function(){var e=this.options,t;return e.vScroller.scrollSmallChange||(t=this._getVScrollBarLargeChange(),e.vScroller.scrollSmallChange=t/2),e.vScroller.scrollSmallChange},_getVScrollBarLargeChange:function(){return this._getLargeChange("v")},_getLargeChange:function(e){var t=this,n=t.options,r=t._fields(),i=e==="v",s=i?n.vScroller:n.hScroller,o=i?"innerHeight":"innerWidth",u=i?"contentHeight":"contentWidth",a=i?"_autoVLarge":"_autoHLarge",f,l,c,h,p,d,v,m;return s.scrollLargeChange?s.scrollLargeChange:(f=s.scrollMax,l=s.scrollMin,c=f-l,h=r.contentWrapper,p=h[o](),d=r[u],v=p/(d-p),m=(c+1)*v/(1+v),isNaN(m)&&(m=0),s.scrollLargeChange=m,t[a]=!0,s.scrollLargeChange)},_getHScrollBarSmallChange:function(){var e=this.options,t;return e.hScroller.scrollSmallChange||(t=this._getHScrollBarLargeChange(),e.hScroller.scrollSmallChange=t/2),e.hScroller.scrollSmallChange},_getHScrollBarLargeChange:function(){return this._getLargeChange("h")},_initScrollBars:function(e,t,r){var i=r.hScroller,s=i.scrollMax,o=i.scrollMin,u=s-o,a=r.vScroller,f=a.scrollMax,l=a.scrollMin,c=f-l,h=t.hbarDrag,p=t.vbarDrag,d,v,m,g,y,b,w,E,S,x;e.hNeedScrollBar&&h.is(":visible")&&(d=e._getHScrollBarLargeChange(),v=e._getTrackLen("h"),m=e._getDragLength(u,d,v,r.hScroller.scrollMinDragLength),h.width(m),g=h.outerWidth(!0)-h.width(),h.width(m-g),y=h.children("span"),y.css("margin-left",(h.width()-y[0].offsetWidth)/2),v<=h.outerWidth(!0)?h.hide():h.show(),e._isDragging==1&&(n(document).trigger("mouseup"),e._isDragging=!1)),e.vNeedScrollBar&&p.is(":visible")&&(b=e._getVScrollBarLargeChange(),w=e._getTrackLen("v"),E=e._getDragLength(c,b,w,r.vScroller.scrollMinDragLength),p.height(E),S=p.outerHeight(!0)-p.height(),p.height(E-S),x=p.children("span"),x.css("margin-top",(p.height()-x[0].offsetHeight)/2),w<=p.outerHeight(!0)?p.hide():p.show(),e._isDragging==1&&(n(document).trigger("mouseup"),e._isDragging=!1)),e._setDragAndContentPosition(!1,!1,"both")},_getTrackLen:function(e){var t=this,n=t._fields(),r=e+"TrackLen",i=n.hbarContainer,s=n.vbarContainer,o=0,u=0;return n[r]!==undefined?n[r]:(e==="h"&&(u=t._getScrollContainerPadding("h"),o=i.innerWidth()),e==="v"&&(u=t._getScrollContainerPadding("v"),o=s.innerHeight()),n[r]=o-u,n[r])},_getScrollContainerPadding:function(e){var t=this,n=t._fields(),r=0,i,s;if(e==="h")r=t._getScrollContainerPadding("left")+t._getScrollContainerPadding("right");else if(e==="v")r=t._getScrollContainerPadding("top")+t._getScrollContainerPadding("bottom");else{e==="left"||e==="right"?i=n.hbarContainer:i=n.vbarContainer,s=e+"Padding";if(n[s]!==undefined)return r=n[s],r;i&&i.css&&(r=parseFloat(i.css("padding-"+e))),n[s]=r}return r},_triggerScroll:function(e,t,n){var r={position:e,dir:t,animationOptions:n};this._trigger("scroll",null,r)},_contentDragAnimate:function(e,t,r,i,s,o,u){var a=this,f=a.options,l=e==="v",c=l?f.vScroller:f.hScroller,h=l?"outerHeight":"outerWidth",p=l?"innerHeight":"innerWidth",d=l?"contentHeight":"contentWidth",v=l?"top":"left",m=c.scrollMin,g=c.scrollMax,y=g-m,b=c.scrollValue===undefined?m:c.scrollValue-m,w=a._getLargeChange(e),E=y-w+1,S=a._fields(),x=S.contentWrapper,T=S.templateWrapper,N,C,k,L,A,O,M,_,D,P,H,B;b>E&&(b=E),N=(S[d]-x[p]())*(b/E),Math.abs(N)<.001&&(N=0),N=Math.round(N),C=-1,r!==undefined&&(t&&i.is(":animated")&&s!=="nonestop"&&i.stop(!0,!1),k=a._getTrackLen(e),L=i[h](!0),A=k-L,O=a._getScrollContainerPadding(v),C=b/E*A+O),t&&f.animationOptions&&!f.animationOptions.disabled?(C>=0&&u!=="dragging"&&(M=n.extend({},f.animationOptions),M.complete=undefined,l?_={top:C}:_={left:C},i.animate(_,M)),D=n.extend({},f.animationOptions),P=f.animationOptions.complete,D.complete=function(){a._scrollEnd(o,a,e),n.isFunction(P)&&P(arguments)},t&&T.is(":animated")&&s!=="nonestop"&&T.stop(!0,!1),l?H={top:-N}:H={left:-N},f.customScrolling?a._scrollEnd(o,a,e,b):T.animate(H,D),a._triggerScroll(N,e,D)):c.scrollBarVisibility!=="hidden"&&(B=l?"top":"left",C>=0&&u!=="dragging"&&(i[0].style[B]=C+"px"),f.customScrolling||(T[0].style[B]=-N+"px"),a._triggerScroll(N,e),a._scrollEnd(o,a,e,b))},_setDragAndContentPosition:function(e,t,n,r,i){var s=this,o=s._fields(),u=o.hbarContainer,a=o.hbarDrag,f=o.vbarContainer,l=o.vbarDrag;(n==="both"||n==="h")&&o.hScrolling&&s._contentDragAnimate("h",t,u,a,r,e,i),(n==="both"||n==="v")&&o.vScrolling&&s._contentDragAnimate("v",t,f,l,r,e,i),o.intervalID>0&&window.clearInterval(o.intervalID),o.intervalID=window.setInterval(function(){s._disableButtonIfNeeded(s)},500)},_scrolling:function(e,t,n){var r=!0;return e&&(n.beforePosition=t.getContentElement().position(),t._beforePosition=n.beforePosition,r=t._trigger("scrolling",null,n),t.customScroll=n.customScroll),r},_scrollEnd:function(e,t,n,r){e&&window.setTimeout(function(){var e=t.getContentElement(),i,s;if(!e.is(":visible"))return;i=t.getContentElement().position(),s={dir:n,beforePosition:t._beforePosition,afterPosition:i},isNaN(r)||(s.newValue=r),t._trigger("scrolled",null,s)},0)},_getDragLength:function(e,t,n,r){var i=e/t,s=n/i,o=r;return s<o?s=o:s+1>=n&&(s=n-1),Math.round(s)},_needScrollbar:function(e,t){var n=this._hasMode(e,"scrollbar"),r=e.scrollBarVisibility,i=n&&(r==="visible"||r==="auto"&&t);return i},_bindBarEvent:function(e,t,r){var i=this;e.bind("mouseover."+i.widgetName,i,i._scrollerMouseOver);if(!n.fn.draggable)return;t.draggable({axis:r==="h"?"x":"y",start:function(e,t){if(i.options.disabled)return!1;i._isDragging=!0},drag:function(e,t){i._dragging(e,t,i)},containment:"parent",stop:function(e){i._dragStop(e,i,r),n(e.target).removeClass(f),i._isDragging=!1}})},_createBarIfNeeded:function(e,t,r,i,s){if(e){var u=this,a,f=u._fields(),l=r+"barContainer",c=r+"barDrag",h=r==="h",p=s[h?"innerHeight":"innerWidth"](),d=f[l]=n(i),v,m;t.append(d),v=d[0][h?"offsetHeight":"offsetWidth"],p-=v,a={direction:h?"horizontal":"vertical",targetBarLen:v,contentLength:p};if(u._trigger(h?"hScrollerActivating":"vScrollerActivating",null,a)===!1)return!1;m=f[c]=d.find("."+o),u._bindBarEvent(d,m,r),s[h?"height":"width"](p)}},_setScrollbarPosition:function(e,t,n,r,i,s,o,u,a,f,l){var c=f==="h",h,p,d,v,m,g,y,b,w,E=t.options.wijCSS;s?(h=r[0][c?"offsetHeight":"offsetWidth"],p=t._getScrollContainerPadding(f),d=c?"top":"left",v=c?{top:"0px",bottom:"auto",left:"auto",right:"auto"}:{left:"0px",right:"auto",top:"auto",bottom:"auto"},m=c?{top:h+"px",left:null}:{left:h+"px"},g=c?{top:"auto",right:"auto",left:"auto",bottom:"0px"}:{left:"auto",right:"0px",top:"auto",bottom:"auto"},y=c?{top:"",left:null}:{left:""},b=n[c?"innerWidth":"innerHeight"](),u===d?(r.css(v),n.css(m),c?(r.children(".wijmo-wijsuperpanel-hbar-buttonleft").removeClass(E.cornerBL).addClass(E.cornerTL),r.children(".wijmo-wijsuperpanel-hbar-buttonright").removeClass(E.cornerBR).addClass(E.cornerTR),r.removeClass(E.cornerBottom).addClass(E.cornerTop)):(r.children(".wijmo-wijsuperpanel-vbar-buttontop").removeClass(E.cornerTR).addClass(E.cornerTL),r.children(".wijmo-wijsuperpanel-vbar-buttonbottom").removeClass(E.cornerBR).addClass(E.cornerBL),r.removeClass(E.cornerRight).addClass(E.cornerLeft))):(r.css(g),n.css(y),c?(r.children(".wijmo-wijsuperpanel-hbar-buttonleft").removeClass(E.cornerTL).addClass(E.cornerBL),r.children(".wijmo-wijsuperpanel-hbar-buttonright").removeClass(E.cornerBL).addClass(E.cornerBR),r.removeClass(E.cornerTop).addClass(E.cornerBottom)):(r.children(".wijmo-wijsuperpanel-vbar-buttontop").removeClass(E.cornerTL).addClass(E.cornerTR),r.children(".wijmo-wijsuperpanel-vbar-buttonbottom").removeClass(E.cornerBL).addClass(E.cornerBR),r.removeClass(E.cornerLeft).addClass(E.cornerRight))),w=0,o&&(w=i[0][c?"offsetWidth":"offsetHeight"],a==="left"?r.css("right","0px"):a==="right"?r.css("left","0px"):a==="top"?r.css("bottom","0px"):a==="bottom"&&r.css("top","0px")),!c&&o&&(w=0),r[c?"width":"height"](b-p),t._enableDisableScrollBar(f,r,!l)):e.css(c?"left":"top","")},_testScroll:function(e,t,n){var r=t.templateWrapper,i=t.contentWrapper,s=t.stateContainer,o=i.innerWidth(),u=i.innerHeight(),a=t.contentWidth,f=t.contentHeight,l,p,d,v,m,g;t.hScrolling=a>o,t.vScrolling=f>u,l=e.hNeedScrollBar=e._needScrollbar(n.hScroller,t.hScrolling);if(e._createBarIfNeeded(l,s,"h",c,i)===!1)return!1;l&&!t.vScrolling&&(r.css("float","left"),t.contentHeight=r.height(),t.vScrolling=t.contentHeight>u-t.hbarContainer[0].offsetHeight,r.css("float","")),p=e.vNeedScrollBar=e._needScrollbar(n.vScroller,t.vScrolling);if(e._createBarIfNeeded(p,s,"v",h,i)===!1)return!1;if(p&&!t.hScrolling){r.css("float","left"),t.contentWidth=r.width(),t.hScrolling=t.contentWidth>o-t.vbarContainer[0].offsetWidth,r.css("float","");if(t.hScrolling&&!l){l=e.hNeedScrollBar=e._needScrollbar(n.hScroller,t.hScrolling);if(e._createBarIfNeeded(l,s,"h",c,i)===!1)return!1}}d=t.hbarContainer,v=t.vbarContainer,m=n.hScroller.scrollBarPosition,g=n.vScroller.scrollBarPosition,e._setScrollbarPosition(r,e,i,d,v,l,p,m,g,"h",t.hScrolling),e._setScrollbarPosition(r,e,i,v,d,p,l,g,m,"v",t.vScrolling)},_enableDisableScrollBar:function(e,t,n){var r=this.options;e==="v"?(t[n?"addClass":"removeClass"]("wijmo-wijsuperpanel-vbarcontainer-disabled"),t.find("."+r.wijCSS.stateDefault)[n?"addClass":"removeClass"](r.wijCSS.stateDisabled)):e==="h"&&(t[n?"addClass":"removeClass"]("wijmo-wijsuperpanel-hbarcontainer-disabled"),t.find("."+r.wijCSS.stateDefault)[n?"addClass":"removeClass"](r.wijCSS.stateDisabled)),t.children("."+o)[n?"hide":"show"]()},_initResizer:function(){var e=this,t=e.options,r=e._fields(),i=r.resizer,s,o;if(!n.fn.resizable)return;!i&&t.allowResize&&(s=t.resizableOptions,o=s.stop,s.stop=function(t){e._resizeStop(t,e),n.isFunction(o)&&o(t)},r.resizer=i=e.element.resizable(s)),!t.allowResize&&r.resizer&&(i.resizable("destroy"),r.resizer=null)},_resizeStop:function(e,t){this.options.autoRefresh||t.paintPanel(!0),t._trigger("resized")},_createAdditionalDom:function(e,t,r){r.attr("tabindex")||(r.attr("tabindex","-1"),t.tabindex=!0);var i=t.stateContainer=n(l),s,o=e.options.wijCSS;t.contentWrapper=i.children(),s=t.templateWrapper=t.contentWrapper.children(),r.contents().each(function(e,r){var i=n(r);if(i.hasAllClasses(o.superpanelHeader)){t.header=i;return}if(i.hasAllClasses(o.superpanelFooter)){t.footer=i;return}s[0].appendChild(r)}),t.header!==undefined&&r.prepend(t.header),r[0].appendChild(i[0]),t.footer!==undefined&&t.footer.insertAfter(i)},_setRounder:function(e,t){if(this.options.showRounder){t.addClass(this.options.wijCSS.cornerAll);if(e._rounderAdded)return;if(n.browser.msie)return;var r="",i="",s,o;n.browser.webkit?(i="WebkitBorderTopLeftRadius",r="WebkitBorderRadius"):n.browser.mozilla?(i="MozBorderRadiusBottomleft",r="MozBorderRadius"):(i="border-top-left-radius",r="border-radius"),s=t.css(i),o=parseInt(s,10),t.css(r,o+1),e._rounderAdded=!0,e._radiusKey=r}else t.removeClass(this.options.wijCSS.cornerAll)},_setInnerElementsSize:function(e,t){var n=e.stateContainer,r=e.contentWrapper,i=0,s,o,u,a;e.header!==undefined&&(i+=e.header.outerHeight()),e.footer!==undefined&&(i+=e.footer.outerHeight()),s=n[0].style,o=t.innerHeight()-i,u=t.innerWidth(),s.display="none",s.height=o+"px",s.width=u+"px",a=r[0].style,a.height=o+"px",a.width=u+"px",s.display=""}}),i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,new r),n.wijmo.registerWidget("wijsuperpanel",i.prototype)}else{var o="wijmo-wijsuperpanel-handle",l="<div class='wijmo-wijsuperpanel-statecontainer'><div class='wijmo-wijsuperpanel-contentwrapper-touch'></div></div>";i.prototype=n.extend(!0,{},n.Widget.prototype,{widgetEventPrefix:"wijsuperpanel",_setOption:function(e,t){var r=this,i=r.options,s=r._fields();if(e==="animationOptions"||e==="resizableOptions")t=n.extend(i[e],t);else if(e==="hScroller"||e==="vScroller")t=n.extend(i[e],t),r.refresh();n.Widget.prototype._setOption.apply(r,arguments);switch(e){case"allowResize":r._initResizer();break;case"disabled":r._handleDisabledOption(t,r.element);break;case"mouseWheelSupport":case"keyboardSupport":r._bindElementEvents(r,s,r.element,i)}},_create:function(){var e=this,t=e.options;t.vScroller.dir="v",t.hScroller.dir="h",e._createDom(),e.options.disabled&&e.disable(),e.element.is(":hidden")&&e.element.wijAddVisibilityObserver&&e.element.wijAddVisibilityObserver(function(){e.refresh(),e.element.wijRemoveVisibilityObserver&&e.element.wijRemoveVisibilityObserver()},"wijsuperpanel")},_handleDisabledOption:function(e,t){var n=this;e?(n.disabledDiv||(n.disabledDiv=n._createDisabledDiv(t)),n.disabledDiv.appendTo("body")):n.disabledDiv&&(n.disabledDiv.remove(),n.disabledDiv=null)},_createDisabledDiv:function(e){var t=this,r=e?e:t.element,i=r.offset(),s=r.outerWidth(),o=r.outerHeight();return n("<div></div>").addClass("ui-disabled").css({"z-index":"99999",position:"absolute",width:s,height:o,left:i.left,top:i.top})},_createDom:function(){var e=this,t=e.element;e.paintPanel(),e._initResizer(),e._bindElementEvents()},_applyOverflow:function(e){var t={},r=this.options,i=r.hScroller.scrollBarVisibility,s=r.vScroller.scrollBarVisibility;t["overflow-x"]=i,t["overflow-y"]=s,n.support.isTouchEnabled&&n.support.isTouchEnabled()&&i==="visible"&&s==="visible"&&(t["overflow-x"]="auto",t["overflow-y"]="auto"),e.css(t)},_createAdditionalDom:function(e,t,r){r.attr("tabindex")||(r.attr("tabindex","-1"),t.tabindex=!0);var i=t.stateContainer=n(l),s,o=e.options.wijCSS;e._applyOverflow(t.stateContainer),t.contentWrapper=i.children(),r.contents().each(function(e,r){var i=n(r);if(i.hasAllClasses(o.superpanelHeader)){t.header=i;return}if(i.hasAllClasses(o.superpanelFooter)){t.footer=i;return}t.contentWrapper[0].appendChild(r)}),t.header!==undefined&&r.prepend(t.header),r[0].appendChild(i[0]),t.footer!==undefined&&t.footer.insertAfter(i),e._resetDom(),t.contentWrapper.css("float","left"),t.contentWidth=t.contentWrapper.width(),t.contentHeight=t.contentWrapper.height(),t.contentWrapper.css("float","")},_bindElementEvents:function(){var e=this,t=e.element,r=e.options,i=e.widgetName,s=t.find(".wijmo-wijsuperpanel-statecontainer"),o=s.scrollTop(),u=s.scrollLeft();s.bind("scroll",function(t,i){var s=n(this).scrollTop(),a=n(this).scrollLeft(),f,l,c,h,p;if(s===o&&a===u)return;s===o?(l="h",a>u?f="right":f="left",c=r.hScroller.scrollValue,p=a):(l="v",s>o?f="bottom":f="top",c=r.vScroller.scrollValue,p=s),h=e.scrollPxToValue(p,l),e._trigger("scrolling",null,{dir:l,direction:f,oldValue:c,newValue:h,beforePosition:{left:-u,top:-o}}),e._triggerScroll(p,l),e._updateScrollValue(p,l),e._trigger("scrolled",null,{dir:l,beforePosition:{left:-u,top:-o},afterPosition:{left:-a,top:-s},newValue:h}),u=a,o=s}),r.keyboardSupport?e._keyboardBind===undefined&&(e._keyboardBind=!0,t.bind("keydown."+i,e,e._panelKeyDown)):(t.unbind("keydown."+i,e._panelKeyDown),e._keyboardBind=undefined),r.mouseWheelSupport||t.bind("mousewheel",function(e){return e.stopPropagation(),!1})},_setScrollingInterval:function(e,t,n,r){var i=n.options;t.length>0&&(e.internalFuncID=window.setInterval(function(){n._doScrolling(t,n,r)},i.keyDownInterval))},_triggerScroll:function(e,t){var n={position:e,dir:t};this._trigger("scroll",null,n)},_panelKeyDown:function(t){var n=t.data,r=n.options,i,s,o=e.getKeyCodeEnum();if(!r.keyboardSupport||r.disabled)return;i=t.shiftKey,s=t.keyCode,s===o.LEFT?n._doScrolling("left",n,i):s===o.RIGHT?n._doScrolling("right",n,i):s===o.UP?n._doScrolling("top",n,i):s===o.DOWN&&n._doScrolling("bottom",n,i),t.stopPropagation(),t.preventDefault()},_doScrolling:function(e,t,n){var r,i,s,o=t._fields(),u=o.stateContainer[0],a={},f;if(e==="top"||e==="bottom")i="v",s="scrollTop";else if(e==="left"||e==="right")i="h",s="scrollLeft";n?r=t._getLargeChange(i):r=t._getSmallChange(i),f=u[s],e==="top"||e==="left"?a[s]=f-r:a[s]=f+r,t._animateTo(a)},_getLargeChange:function(e){var t=this,n=t._fields(),r,i=e=="h"?n.clientWidth:n.clientHeight;return i?r=i:r=n.stateContainer[e=="h"?"width":"height"](),r},_getSmallChange:function(){return this._getLargeChange()/2},_setRounder:function(e,t){var r=this.options.wijCSS.cornerAll;if(this.options.showRounder){t.addClass(r);if(e._rounderAdded)return;if(n.browser.msie)return;var i="",s="",o,u;n.browser.webkit?(s="WebkitBorderTopLeftRadius",i="WebkitBorderRadius"):n.browser.mozilla?(s="MozBorderRadiusBottomleft",i="MozBorderRadius"):(s="border-top-left-radius",i="border-radius"),o=t.css(s),u=parseInt(o,10),t.css(i,u+1),e._rounderAdded=!0,e._radiusKey=i}else t.removeClass(r)},_initResizer:function(){var e=this,t=e.options,r=e._fields(),i=r.resizer,s,o;if(!n.fn.resizable)return;!i&&t.allowResize&&(s=t.resizableOptions,o=s.stop,s.stop=function(t){e._resetDom(),e._trigger("resized"),n.isFunction(o)&&o(t)},r.resizer=i=e.element.resizable(s)),!t.allowResize&&r.resizer&&(i.resizable("destroy"),r.resizer=null)},_resetDom:function(){var e=this,t=e.options,n=e.element,r=e._fields(),i=n.width(),s=n.height();r.header!==undefined&&(s-=r.header.outerHeight()),r.footer!==undefined&&(s-=r.footer.outerHeight()),r.stateContainer.length&&(r.stateContainer.css({width:i,height:s}),r.clientWidth=r.stateContainer[0].clientWidth,r.clientHeight=r.stateContainer[0].clientHeight)},_fields:function(){var e=this,t=e.element,n=e.widgetName+"-fields",r=e._fieldsStore;return r===undefined&&(r={},t.data(n,r),e._fieldsStore=r),r},_getScrollOffset:function(e){var t=n(e),r,i,s,o,u,a,f,l,c,h={left:null,top:null};return t.length===0?h:(r=this._fields(),i=r.contentWrapper,s=t.offset(),s.leftWidth=s.left+t.outerWidth(),s.topHeight=s.top+t.outerHeight(),u=i.offset(),u.leftWidth=u.left+r.clientWidth,u.topHeight=u.top+r.clientHeight,l=s.left-u.left,s.left<u.left?h.left=l:s.leftWidth>u.leftWidth&&(c=s.leftWidth-u.left-r.clientWidth,l<c?h.left=l:h.left=c),a=s.top-u.top,s.top<u.top?h.top=a:s.topHeight>u.topHeight&&(f=s.topHeight-u.top-r.clientHeight,a<f?h.top=a:h.top=f),h)},_initialize:function(e,t,n){var r=n.options.wijCSS;e.initialized=!0,t.addClass(["wijmo-wijsuperpanel",r.widget,r.content].join(" ")),n._setRounder(n,t),n._createAdditionalDom(n,e,t),n._trigger("painted"),n._initScrollPosition()},_initScrollPosition:function(){var e=this.options,t=e.hScroller,n=e.vScroller,r=t.scrollValue,i=n.scrollValue,s=this._fields(),o=r?this._scrollValueToPx(r,"h"):0,u=i?this._scrollValueToPx(i,"v"):0;r&&s.stateContainer.prop("scrollLeft",o),i&&s.stateContainer.prop("scrollTop",u)},_updateScrollValue:function(e,t){var r=this.scrollPxToValue(e,t),i=this.options,s=t==="h"?"hScroller":"vScroller",o=n.Event("scrollValueChanged");i[s].scrollValue=r,this._trigger("scrollValueChanged",o,i[s])},scrollPxToValue:function(e,t){var n=this.options,r=t==="h"?"clientWidth":"clientHeight",i=t==="h"?"scrollWidth":"scrollHeight",s=t==="h"?"hScroller":"vScroller",o=this._fields(),u=o.stateContainer[0],a=u[r],f=u[i],l=n[s].scrollMin,c=n[s].scrollMax,h=c-l,p=h*e/(f-a)+l;return p},_scrollValueToPx:function(e,t){var n=this.options,r=t==="h"?"clientWidth":"clientHeight",i=t==="h"?"scrollWidth":"scrollHeight",s=t==="h"?"hScroller":"vScroller",o=this._fields(),u=o.stateContainer[0],a=u[r],f=u[i],l=n[s].scrollMin,c=n[s].scrollMax,h=c-l,p=(e-l)*(f-a)/h;return p},_animateTo:function(e){var t=this,n=t.element,r=t.options,i=r.animationOptions,s=t._fields();s.stateContainer.animate(e,i)},destroy:function(){var e=this,t=e.element,r=e.options,i=e._fields(),s,o=r.wijCSS;e.disabledDiv&&(e.disabledDiv.remove(),e.disabledDiv=null),i.resizer!==undefined&&i.resizer.resizable("destroy"),t.unbind("."+e.widgetName),t.removeClass(["wijmo-wijsuperpanel",o.widget,o.content,o.cornerAll].join(" ")),s=i.contentWrapper,s.contents().each(function(e,n){t.append(n)}),i.stateContainer.remove(),n.Widget.prototype.destroy.apply(e,arguments)},doScrolling:function(e,t){this._doScrolling(e,this,t)},paintPanel:function(e){var t=this,n=t.element,r=t._fields();r.initialized||this._initialize(r,n,t)},needToScroll:function(e){var t=this._getScrollOffset(e);return t.top!==null||t.left!==null},scrollChildIntoView:function(e){var t=this._getScrollOffset(e),n=t.left,r=t.top;this.scrollTo(n,r)},getContentElement:function(){return this._fields().contentWrapper},hScrollTo:function(e,t){var n=t?this._scrollValueToPx(e):e;this._animateTo({scrollLeft:n})},vScrollTo:function(e,t){var n=t?this._scrollValueToPx(e):e;this._animateTo({scrollTop:n})},refresh:function(){var e=this,t=e._fields();e._applyOverflow(t.stateContainer),e._resetDom()},scrollTo:function(e,t,n){var r=n?this._scrollValueToPx(e):e,i=n?this._scrollValueToPx(t):t;this._animateTo({scrollTop:i}),this._animateTo({scrollLeft:r})}}),i.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,{wijCSS:{superpanelHeader:"wijmo-wijsuperpanel-header",superpanelFooter:"wijmo-wijsuperpanel-footer",superpanelHandle:"",superpanelVBarbuttonTop:"",superpanelVBarbuttonBottom:"",superpanelHBarbuttonLeft:"",superpanelHBarbuttonRight:"",superpanelHBarContainer:"",superpanelVBarContainer:"",superpanelButton:"",superpanelButtonLeft:"",superpanelButtonRight:"",superpanelButtonTop:"",superpanelButtonBottom:""},wijMobileCSS:{header:"ui-header ui-bar-a",content:"ui-body-c",stateDefault:"ui-btn-up-c",stateHover:"ui-btn-down-c",stateActive:"ui-btn-down-c"},initSelector:":jqmData(role='wijsuperpanel')",allowResize:!1,animationOptions:{queue:!1,disabled:!1,duration:250,easing:undefined},hScroller:{scrollBarVisibility:"auto",scrollValue:null,scrollMax:100,firstStepChangeFix:0,scrollMin:0,hoverEdgeSpan:20},keyboardSupport:!1,keyDownInterval:100,mouseWheelSupport:!0,resizableOptions:{handles:"all",helper:"ui-widget-content wijmo-wijsuperpanel-helper"},resized:null,painted:null,scroll:null,showRounder:!0,vScroller:{scrollBarVisibility:"auto",scrollValue:null,scrollMax:100,scrollMin:0,firstStepChangeFix:0,hoverEdgeSpan:20}}),n.wijmo.registerWidget("wijsuperpanel",i.prototype)}})(e.superpanel||(e.superpanel={}));var t=e.superpanel})(wijmo||(wijmo={}));