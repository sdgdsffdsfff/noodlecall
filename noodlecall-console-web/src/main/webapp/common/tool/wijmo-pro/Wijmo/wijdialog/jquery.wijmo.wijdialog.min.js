var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(t){"use strict";var n=jQuery,r="wijdialog",i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){return n.ui.dialog.prototype._create.apply(this,arguments)},t.prototype._init=function(){return n.ui.dialog.prototype._init.apply(this,arguments)},t.prototype._destroy=function(){return n.ui.dialog.prototype._destroy.apply(this,arguments)},t.prototype._appendTo=function(){return n.ui.dialog.prototype._appendTo.apply(this,arguments)},t.prototype._setOptions=function(){return n.ui.dialog.prototype._setOptions.apply(this,arguments)},t.prototype._setOption=function(e,t){return n.ui.dialog.prototype._setOption.apply(this,arguments)},t.prototype.widget=function(){return n.ui.dialog.prototype.widget.apply(this,arguments)},t.prototype.close=function(){return n.ui.dialog.prototype.close.apply(this,arguments)},t.prototype.isOpen=function(){return n.ui.dialog.prototype.isOpen.apply(this,arguments)},t.prototype.moveToTop=function(){return n.ui.dialog.prototype.moveToTop.apply(this,arguments)},t.prototype._moveToTop=function(){return n.ui.dialog.prototype._moveToTop.apply(this,arguments)},t.prototype.open=function(){return n.ui.dialog.prototype.open.apply(this,arguments)},t.prototype._focusTabbable=function(){return n.ui.dialog.prototype._focusTabbable.apply(this,arguments)},t.prototype._keepFocus=function(){return n.ui.dialog.prototype._keepFocus.apply(this,arguments)},t.prototype._createWrapper=function(){return n.ui.dialog.prototype._createWrapper.apply(this,arguments)},t.prototype._createTitlebar=function(){return n.ui.dialog.prototype._createTitlebar.apply(this,arguments)},t.prototype._title=function(){return n.ui.dialog.prototype._title.apply(this,arguments)},t.prototype._createButtonPane=function(){return n.ui.dialog.prototype._createButtonPane.apply(this,arguments)},t.prototype._createButtons=function(){return n.ui.dialog.prototype._createButtons.apply(this,arguments)},t.prototype._makeDraggable=function(){return n.ui.dialog.prototype._makeDraggable.apply(this,arguments)},t.prototype._makeResizable=function(){return n.ui.dialog.prototype._makeResizable.apply(this,arguments)},t.prototype._minHeight=function(){return n.ui.dialog.prototype._minHeight.apply(this,arguments)},t.prototype._position=function(){return n.ui.dialog.prototype._position.apply(this,arguments)},t.prototype._size=function(){return n.ui.dialog.prototype._size.apply(this,arguments)},t.prototype._blockFrames=function(){return n.ui.dialog.prototype._blockFrames.apply(this,arguments)},t.prototype._unblockFrames=function(){return n.ui.dialog.prototype._unblockFrames.apply(this,arguments)},t.prototype._createOverlay=function(){if(!this.options.modal)return;var e=this,t=e.options.wijCSS;n.ui.dialog.overlayInstances||this._delay(function(){n.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(e){if(!n(e.target).closest(".ui-dialog").length&&!n(e.target).closest(".ui-datepicker").length){e.preventDefault();if(e.relatedTarget&&n(e.relatedTarget).closest(".ui-dialog").length)return;var t=n(".ui-dialog:visible:last .ui-dialog-content"),r;t.data("wijmoWijdialog")?r=t.data("wijmoWijdialog"):r=t.data("wijmoC1dialog"),r&&r._focusTabbable()}})}),this.overlay=n("<div>").addClass(t.overlay+" "+t.uiFront+" "+t.wijdialogOverlay).appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),n.ui.dialog.overlayInstances++},t.prototype._destroyOverlay=function(){return n.ui.dialog.prototype._destroyOverlay.apply(this,arguments)},t}(e.JQueryUIWidget);t.JQueryUIDialog=i;var s=function(){function e(){this.wijCSS={wijdialog:"wijmo-wijdialog",wijdialogZone:"wijmo-wijdialog-defaultdockingzone",uiFront:"ui-front",uiDialog:"ui-dialog",wijdialogOverlay:"ui-dialog-overlay",uiDialogContent:"ui-dialog-content",wijdialogCaptionButton:"wijmo-wijdialog-captionbutton",wijdialogHasFrame:"wijmo-wijdialog-hasframe",iconPinW:"ui-icon-pin-w",iconPinS:"ui-icon-pin-s",iconRefresh:"ui-icon-refresh",iconCarat1N:"ui-icon-carat-1-n",iconCarat1S:"ui-icon-carat-1-s",iconMinus:"ui-icon-minus",iconExtlink:"ui-icon-extlink",iconNewWin:"ui-icon-newwin",uiDialogClose:"ui-dialog-titlebar-close",uiDialogTitleBar:"ui-dialog-titlebar",uiDialogButtonPanel:"ui-dialog-buttonpane",uiDialogButtons:"ui-dialog-buttons",wijdialogTitleBarClose:"wijmo-wijdialog-titlebar-close",wijdialogTitleBarPin:"wijmo-wijdialog-titlebar-pin",wijdialogTitleBarRefresh:"wijmo-wijdialog-titlebar-refresh",wijdialogTitleBarToggle:"wijmo-wijdialog-titlebar-toggle",wijdialogTitleBarMinimize:"wijmo-wijdialog-titlebar-minimize",wijdialogTitleBarMaximize:"wijmo-wijdialog-titlebar-maximize",wijdialogTitleBarRestore:"wijmo-wijdialog-titlebar-restore"},this.appendTo="body",this.autoOpen=!0,this.buttons=[],this.closeOnEscape=!0,this.closeText="close",this.dialogClass="",this.draggable=!0,this.height="auto",this.hide=null,this.maxHeight=null,this.maxWidth=null,this.minHeight=150,this.minWidth=150,this.modal=!1,this.position={my:"center",at:"center",of:window},this.resizable=!0,this.show=null,this.title=null,this.width=300,this.stack=!0,this.beforeClose=null,this.close=null,this.create=null,this.drag=null,this.dragStart=null,this.dragStop=null,this.focus=null,this.open=null,this.resize=null,this.resizeStart=null,this.resizeStop=null,this.zIndex=1e3,this.initSelector="",this.captionButtons={},this.collapsingAnimation=null,this.expandingAnimation=null,this.contentUrl="",this.minimizeZoneElementId="",this.buttonCreating=null,this.stateChanged=null,this.blur=null}return e}(),o=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){var t=this,r=t.options,i=r.wijCSS,s=t.element.attr("title");n.ui.dialog.maxZ=n.ui.dialog.maxZ||100,n.isArray(r.buttons)&&n.each(r.buttons,function(e,t){var n=t.click;n&&typeof n=="string"&&window[n]&&(t.click=window[n])}),t.form=t.element.closest("form[id]"),e.prototype._create.call(this),t.element.removeClass("ui-dialog-content ui-widget-content").addClass(i.uiDialogContent).addClass(i.content),t.uiDialog.removeClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front").addClass(i.uiDialog).addClass(i.widget).addClass(i.content).addClass(i.cornerAll).addClass(i.uiFront).addClass(i.wijdialog).removeClass(this.options.dialogClass).addClass(this.options.dialogClass),s&&t.uiDialog.attr("title",s),t.uiDialogTitlebar.removeClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").addClass(i.uiDialogTitleBar).addClass(i.header).addClass(i.cornerAll).addClass(i.helperClearFix),t._initWijWindow(),t._bindWindowResize(),t._attachDraggableResizableEvent(),t._originalPosition=r.position,t.uiDialog.css({zIndex:r.zIndex}),t.isPin=!1,t.options.appendTo==="body"&&t.form.length&&t.uiDialog.appendTo(t.form)},t.prototype._createButtonPane=function(){var t=this.options.wijCSS;e.prototype._createButtonPane.call(this),this.uiDialogButtonPane.removeClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix").addClass(t.uiDialogButtonPanel).addClass(t.content).addClass(t.helperClearFix)},t.prototype._createButtons=function(){e.prototype._createButtons.call(this),this.uiDialog.hasClass("ui-dialog-buttons")&&this.uiDialog.removeClass("ui-dialog-buttons").addClass(this.options.wijCSS.uiDialogButtons)},t.prototype._makeDraggable=function(){e.prototype._makeDraggable.call(this),this.uiDialog.draggable("option","cancel","."+this.options.wijCSS.wijdialogCaptionButton)},t.prototype._createOverlay=function(){var t=this.options.wijCSS;e.prototype._createOverlay.call(this),this.overlay&&this.overlay.removeClass("ui-widget-overlay ui-front").addClass(t.overlay).addClass(t.uiFront)},t.prototype._handleDisabledOption=function(e,t){var r=this;this.uiDialog.removeClass(this.options.wijCSS.stateDisabled),e?(r.disabledDiv||(r.disabledDiv=r._createDisabledDiv()),r.disabledDiv.appendTo(r.options.appendTo),n.browser.msie&&r.uiDialog.data("ui-draggable")&&r.uiDialog.draggable("disable"),this.uiDialog.addClass(this.options.wijCSS.stateDisabled)):r.disabledDiv&&(r.disabledDiv.remove(),r.disabledDiv=null,n.browser.msie&&r.uiDialog.data("ui-draggable")&&r.uiDialog.draggable("enable"))},t.prototype._createDisabledDiv=function(){var e=this,t,r=e.uiDialog,i=r.offset(),s=r.outerWidth(),o=r.outerHeight();return t=n("<div></div>").addClass(e.options.wijCSS.stateDisabled).css({"z-index":"99999",position:"absolute",width:s,height:o,left:i.left,top:i.top}),n.browser.msie&&(t.css("background-color","white"),n.browser.version==="9.0"&&t.css("opacity","0.1")),t},t.prototype.destroy=function(){var t=this,n=t.options.wijCSS;t.disabledDiv&&(t.disabledDiv.remove(),t.disabledDiv=null),e.prototype.destroy.call(this),t.element.removeClass(n.uiDialogContent).removeClass(n.content),t.element.unbind(".wijdialog").removeData("wijdialog").removeData(this.widgetFullName)},t.prototype._attachDraggableResizableEvent=function(){var e=this,t=e.uiDialog,n=e.options;n.draggable&&t.draggable&&t.bind("dragstop",function(t,n){e._saveNormalState(),e._destoryIframeMask()}).bind("dragstart",function(t,n){e._createIframeMask()}),n.resizable&&t.resizable&&t.bind("resizestop",function(t,n){e._saveNormalState(),e._destoryIframeMask()}).bind("resizestart",function(t,n){e._createIframeMask(),e.initWidth===undefined&&e.initHeight===undefined&&(e.initWidth=e.uiDialog.width(),e.initHeight=e.uiDialog.height())})},t.prototype._createIframeMask=function(){var e=this;e.innerFrame&&(e.mask=n("<div style='width:100%;height:100%;position:absolute;top:0px;left:0px;z-index:"+(n.ui.dialog.maxZ+1)+"'></div>").appendTo(e.uiDialog))},t.prototype._destoryIframeMask=function(){var e=this;e.innerFrame&&e.mask&&(e.mask.remove(),e.mask=undefined)},t.prototype._initWijWindow=function(){var e=this,t=!0;e._createCaptionButtons(),e._checkUrl(),e.uiDialog.bind("mousedown",function(t){var r=t.target;n.contains(e.element[0],r)||e.uiDialog.focus()}).bind("mouseenter",function(e){t=!0}).bind("mouseleave",function(e){t=!1}).bind("focusout",function(n){t||e._trigger("blur",n,{el:e.element})})},t.prototype._moveToTop=function(e,t){var r=this,i=r.options,s;return i.modal&&!t||!i.stack&&!i.modal?(r._trigger("focus",e),!1):(i.zIndex>n.ui.dialog.maxZ&&(n.ui.dialog.maxZ=i.zIndex),r.overlay&&(n.ui.dialog.maxZ+=1,r.overlay.css("z-index",n.ui.dialog.maxZ)),s={scrollTop:r.element.scrollTop(),scrollLeft:r.element.scrollLeft()},n.ui.dialog.maxZ+=1,r.uiDialog.css("z-index",n.ui.dialog.maxZ),r.element.attr(s),r._trigger("focus",e),!1)},t.prototype._checkUrl=function(){var e=this,t=e.options,r=t.contentUrl,i=n('<iframe style="width:100%;height:99%;" frameborder="0"></iframe>');typeof r=="string"&&r.length>0&&(e.element.addClass(t.wijCSS.wijdialogHasFrame),e.element.append(i),e.innerFrame=i),e.contentWrapper=e.element},t.prototype._setOption=function(t,r){var i=this;e.prototype._setOption.call(this,t,r),t==="disabled"?i._handleDisabledOption(r,i.element):t==="contentUrl"?i.innerFrame?i.innerFrame.attr("src",r):i._checkUrl():t==="captionButtons"?i._createCaptionButtons():t==="minimizeZoneElementId"&&i.getState()==="minimized"&&n("#"+r).length>0&&n("#"+r).append(i.uiDialog)},t.prototype._createCaptionButtons=function(){var e=[],t=this,r=t.options,i,s=r.wijCSS,o={pin:{visible:!0,click:t.pin,iconClassOn:s.iconPinW,iconClassOff:s.iconPinS},refresh:{visible:!0,click:t.refresh,iconClassOn:s.iconRefresh},toggle:{visible:!0,click:t.toggle,iconClassOn:s.iconCarat1N,iconClassOff:s.iconCarat1S},minimize:{visible:!0,click:t.minimize,iconClassOn:s.iconMinus},maximize:{visible:!0,click:t.maximize,iconClassOn:s.iconExtlink},close:{visible:!0,text:r.closeText,click:t.close,iconClassOn:s.iconClose}},u=r.captionButtons,a=t.uiDialogTitlebar;a.children("."+r.wijCSS.uiDialogClose+", ."+r.wijCSS.wijdialogCaptionButton).remove(),n.each(o,function(t,r){u&&u[t]&&n.extend(r,u[t]),e.push({button:t,info:r})}),t._trigger("buttonCreating",null,e);for(i=0;i<e.length;i++)t._createCaptionButton(e[i],a)},t.prototype._createCaptionButton=function(e,t,r){var i=this,s=i.options.wijCSS,o,u=s["wijdialogTitleBar"+e.button.charAt(0).toUpperCase()+e.button.substring(1)],a=t.children("."+u),f=e.info,l=n("<span></span>");if(f.visible){if(a.size()===0){l.addClass("ui-icon "+f.iconClassOn).text(f.text||e.button),o=n('<a href="#"></a>').append(l).addClass(u+" ui-corner-all "+s.wijdialogCaptionButton).attr("role","button").hover(function(){o.addClass(s.stateHover)},function(){o.removeClass(s.stateHover)}).click(function(e){return l.hasAllClasses(f.iconClassOff)?l.removeClass(f.iconClassOff):l.addClass(f.iconClassOff),n.isFunction(f.click)&&f.click.apply(i,arguments),!1});if(r)return o;o.appendTo(t)}i[e.button+"Button"]=o}else a.remove()},t.prototype.pin=function(){var e=this.isPin,t=this.pinButton.children("span"),n=this.options.wijCSS;e?t.removeClass(n.iconPinS):t.length&&(t.hasAllClasses(n.iconPinS)||t.addClass(n.iconPinS)),this._enableDisableDragger(!e),this.isPin=!e},t.prototype.refresh=function(){var e=this.innerFrame;e!==undefined&&e.attr("src",e.attr("src"))},t.prototype.toggle=function(){var e=this,t=e.toggleButton.children("span"),n=e.options.wijCSS;e.minimized||(e.collapsed===undefined||!e.collapsed?(e.collapsed=!0,t.hasAllClasses(n.iconCarat1S)||t.addClass(n.iconCarat1S),e._collapseDialogContent(!0)):(e.collapsed=!1,t.hasAllClasses(n.iconCarat1S)&&t.removeClass(n.iconCarat1S),e._expandDialogContent(!0)))},t.prototype._expandDialogContent=function(e){var t=this,r=t.options,i=r.expandingAnimation;t.uiDialog.height("auto"),e&&i!==null?t.contentWrapper.show(i.animated,i.options,i.duration,function(e){t.uiDialog.css("height",t._toggleHeight),n.isFunction(i.callback)&&i.callback(e),r.resizable&&t._enableDisableResizer(!1)}):(t.contentWrapper.show(),r.resizable&&t._enableDisableResizer(!1),t.uiDialog.css("height",t.toggleHeight))},t.prototype._collapseDialogContent=function(e,t){var n=this,r=n.options,i=r.collapsingAnimation;r.resizable&&n._enableDisableResizer(!0),t||(n._toggleHeight=n.uiDialog[0].style.height),n.uiDialog.height("auto"),e&&i!==null?n.contentWrapper.hide(i.animated,i.options,i.duration):n.contentWrapper.hide(),n._enableDisableDragger(n.isPin)},t.prototype._enableDisableResizer=function(e){var t=this.uiDialog;if(!this.options.resizable)return;t.resizable({disabled:e}),e&&t.removeClass(this.options.wijCSS.stateDisabled)},t.prototype._enableDisableDragger=function(e){var t=this.uiDialog;if(!this.options.draggable)return;t.draggable({disabled:e}),e&&t.removeClass(this.options.wijCSS.stateDisabled)},t.prototype.minimize=function(){var e=this,t=e.uiDialog,r=e.options,i=r.wijCSS,s=null,o=n("<div></div>"),u=n("<div></div>"),a,f,l,c,h={width:undefined,height:undefined},p,d={width:undefined,height:undefined},v="uiDialog",m;e.minimized||(c=e.uiDialog.position(),h.width=e.uiDialog.width(),h.height=e.uiDialog.height(),m=e.getState(),e.maximized?(e.maximized=!1,e.restoreButton.remove(),n(window).unbind(".onWinResize")):(e.collapsed&&e._expandDialogContent(!1),e._saveNormalState()),e._enableDisableResizer(!0),e.collapsed&&e._collapseDialogContent(!1),o.appendTo(e.options.appendTo).css({top:e.uiDialog.offset().top,left:e.uiDialog.offset().left,height:e.uiDialog.innerHeight(),width:e.uiDialog.innerWidth(),position:"absolute"}),e.contentWrapper.hide(),e.uiDialogButtonPane.length&&e.uiDialogButtonPane.hide(),t.height("auto"),t.width("auto"),e._doButtonAction(e.minimizeButton,"hide"),e._restoreButton(!0,e.minimizeButton,"After"),e._doButtonAction(e.pinButton,"hide"),e._doButtonAction(e.refreshButton,"hide"),e._doButtonAction(e.toggleButton,"hide"),e._doButtonAction(e.maximizeButton,"show"),n.browser.webkit&&n("."+i.wijdialogCaptionButton,e.uiDialog).css("float","left"),e.innerFrame&&(v="copy",e[v]=e.uiDialog.clone(),e[v].empty(),e.uiDialogTitlebar.appendTo(e[v])),r.minimizeZoneElementId.length>0&&(s=n("#"+r.minimizeZoneElementId)),s!==null&&s.size()>0?s.append(e[v]):(a=n("."+i.wijdialogZone),a.size()===0&&(a=n('<div class="'+i.wijdialogZone+'"></div>'),n(document.body).append(a)),a.append(e[v]).css("z-index",t.css("z-index"))),e[v].css("position","static"),e[v].css("float","left"),n.browser.msie&&n.browser.version==="6.0"&&(f=n(document).scrollTop(),l=document.documentElement.clientHeight-a.height()+f,a.css({position:"absolute",left:"0px",top:l})),u.appendTo("body").css({top:e[v].offset().top,left:e[v].offset().left,height:e[v].innerHeight(),width:e[v].innerWidth(),position:"absolute"}),e.uiDialog.hide(),e.innerFrame&&e[v].hide(),o.effect("transfer",{to:u,className:i.content},100,function(){o.remove(),u.remove(),e[v].show(),e.minimized=!0,p=e.uiDialog.position(),d.width=e.uiDialog.width(),d.height=e.uiDialog.height(),e._enableDisableDragger(!0),e._trigger("resize",null,{originalPosition:c,originalSize:h,position:p,size:d}),e._trigger("stateChanged",null,{originalState:m,state:"minimized"})}))},t.prototype._doButtonAction=function(e,t){e!==undefined&&(e.removeClass(this.options.wijCSS.stateHover),e[t]())},t.prototype.maximize=function(){var e=this,t=n(window),r,i={width:undefined,height:undefined},s,o={width:undefined,height:undefined},u;e.maximized||(e._enableDisableDragger(!1),r=e.uiDialog.position(),i.width=e.uiDialog.width(),i.height=e.uiDialog.height(),e.minimized?e.restore():(e.collapsed&&e._expandDialogContent(!1),e._saveNormalState(),u="normal"),e.maximized=!0,e.maximizeButton!==undefined&&(e.maximizeButton.hide(),e._restoreButton(!0,e.maximizeButton,"Before")),n.browser.webkit&&n("."+this.options.wijCSS.wijdialogCaptionButton).css("float",""),e._onWinResize(e,t),e.collapsed&&e._collapseDialogContent(!1),e.collapsed||e._enableDisableDragger(!0),e._enableDisableResizer(!0),s=e.uiDialog.position(),o.width=e.uiDialog.width(),o.height=e.uiDialog.height(),e._trigger("resize",null,{originalPosition:r,originalSize:i,position:s,size:o}),u==="normal"&&e._trigger("stateChanged",null,{originalState:"normal",state:"maximized"}))},t.prototype._bindWindowResize=function(){var e=this,t=n(window),r,i,s;t.resize(function(){e.maximized&&e._onWinResize(e,t)}),n.browser.msie&&n.browser.version==="6.0"&&t.bind("scroll.wijdialog resize.wijdialog",function(){e.minimized&&(i=n(document).scrollTop(),s=e.uiDialog.parent(),r=document.documentElement.clientHeight-s.height()+i,s.css({top:r}))})},t.prototype._saveNormalState=function(){var e=this,t=e.uiDialog,n=e.element;e.maximized||(e.normalWidth=t.css("width"),e.normalLeft=t.css("left"),e.normalTop=t.css("top"),e.normalHeight=t.css("height"),e.normalInnerHeight=n.css("height"),e.normalInnerWidth=n.css("width"),e.normalInnerMinWidth=n.css("min-width"),e.normalInnerMinHeight=n.css("min-height"))},t.prototype._onWinResize=function(e,t){e.uiDialog.css("top",t.scrollTop()),e.uiDialog.css("left",t.scrollLeft()),e.uiDialog.setOutWidth(t.width()),e.uiDialog.setOutHeight(t.height()),e.options.width=e.uiDialog.width(),e.options.height=e.uiDialog.height(),e._size(),e.collapsed&&(e.uiDialog.height("auto"),e.contentWrapper.hide())},t.prototype._restoreButton=function(e,t,n){var r=this,i={button:"restore",info:{visible:e,click:r.restore,iconClassOn:this.options.wijCSS.iconNewWin}},s=r._createCaptionButton(i,r.uiDialogTitlebar,!0);e&&(s["insert"+n](t),r.restoreButton=s)},t.prototype._appendToBody=function(e){this.innerFrame?(this.uiDialogTitlebar.prependTo(e),e.show()):e.appendTo(this.options.appendTo)},t.prototype.restore=function(){var e=this,t=e.uiDialog,r,i={width:undefined,height:undefined},s,o={width:undefined,height:undefined},u=n("<div></div>"),a=n("<div></div>"),f="uiDialog",l;e.minimized?(e.minimized=!1,e.innerFrame&&(f="copy",e[f]||(f="uiDialog")),r=e[f].position(),i.width=e[f].width(),i.height=e[f].height(),u.appendTo(e.options.appendTo).css({top:e[f].offset().top,left:e[f].offset().left,height:e[f].innerHeight(),width:e[f].innerWidth(),position:"absolute"}),t.css("position","absolute"),t.css("float",""),e._appendToBody(t),e._enableDisableResizer(!1),e.isPin||e._enableDisableDragger(!1),e._restoreToNormal(),e.contentWrapper.show(),e.uiDialogButtonPane.length&&e.uiDialogButtonPane.show(),a.appendTo(e.options.appendTo).css({top:e.uiDialog.offset().top,left:e.uiDialog.offset().left,height:e.uiDialog.innerHeight(),width:e.uiDialog.innerWidth(),position:"absolute"}),e.uiDialog.hide(),u.effect("transfer",{to:a,className:this.options.wijCSS.content},150,function(){e.uiDialog.show(),s=e.uiDialog.position(),o.width=e.uiDialog.width(),o.height=e.uiDialog.height(),u.remove(),a.remove(),e.copy&&e.copy.remove(),e._trigger("resize",null,{originalPosition:r,originalSize:i,position:s,size:o}),l=e.getState(),e._trigger("stateChanged",null,{originalState:"minimized",state:l})}),e.collapsed&&e._collapseDialogContent(),e._doButtonAction(e.minimizeButton,"show"),e._doButtonAction(e.restoreButton,"remove"),e._doButtonAction(e.pinButton,"show"),e._doButtonAction(e.refreshButton,"show"),e._doButtonAction(e.toggleButton,"show"),n.browser.webkit&&n("."+this.options.wijCSS.wijdialogCaptionButton).css("float","")):e.maximized&&(e.maximized=!1,r=e.uiDialog.position(),i.width=e.uiDialog.width(),i.height=e.uiDialog.height(),n(window).unbind(".onWinResize"),e.collapsed&&e._expandDialogContent(),e._enableDisableResizer(!1),e.isPin||e._enableDisableDragger(!1),e._restoreToNormal(),e.contentWrapper.show(),e.collapsed&&e._collapseDialogContent(),e.maximizeButton!==undefined&&(e.maximizeButton.show(),e._restoreButton(!1,e.maximizeButton,"before")),s=e.uiDialog.position(),o.width=e.uiDialog.width(),o.height=e.uiDialog.height(),e._trigger("resize",null,{originalPosition:r,originalSize:i,position:s,size:o}),l=e.getState(),e._trigger("stateChanged",null,{originalState:"maximized",state:l}))},t.prototype.getState=function(){var e=this;return e.minimized?"minimized":e.maximized?"maximized":"normal"},t.prototype.reset=function(){var e=this;e.getState()==="normal"?(e.normalWidth=e.normalLeft=e.normalTop=e.normalHeight=e.normalInnerHeight=e.normalInnerWidth=e.normalInnerMinWidth=e.normalInnerMinHeight=undefined,e.initHeight&&e.initWidth&&(e.options.width=e.initWidth,e.options.height=e.initHeight,e._size()),e._setOption("position",e._originalPosition)):(e.element.one(this.widgetEventPrefix+"statechanged",function(){e.normalWidth=e.normalLeft=e.normalTop=e.normalHeight=e.normalInnerHeight=e.normalInnerWidth=e.normalInnerMinWidth=e.normalInnerMinHeight=undefined,e.initHeight&&e.initWidth&&(e.options.width=e.initWidth,e.options.height=e.initHeight,e._size()),e._setOption("position",e._originalPosition)}),e.restore())},t.prototype.open=function(){var t=this,r=t.options;(r.hide==="drop"||r.hide==="bounce")&&n.browser.msie&&t.uiDialog.css("filter","auto"),t.innerFrame?(n.browser.msie&&n.browser.version==="9.0"?window.setTimeout(function(){t.innerFrame.attr("src",r.contentUrl)},200):t.innerFrame.attr("src",r.contentUrl),t.minimized?(t.uiDialogTitlebar.show(),t._isOpen=!0):e.prototype.open.call(this)):(t.minimized?(t.uiDialog.show(),t._isOpen=!0):e.prototype.open.call(this),t.uiDialog.wijTriggerVisibility()),t.collapsed&&t._collapseDialogContent(!1,!0),r.disabled&&(t.disabledDiv?t.disabledDiv.show():t.disable())},t.prototype.close=function(){var t=this,n=t.options;e.prototype.close.call(this)&&(t.innerFrame&&(t.innerFrame.attr("src",""),t.minimized&&t.uiDialogTitlebar.hide()),t.disabledDiv&&n.disabled&&t.disabledDiv.hide())},t.prototype._restoreToNormal=function(){var e=this,t=e.uiDialog,n=e.element;t.css("width",e.normalWidth),t.css("left",e.normalLeft),t.css("top",e.normalTop),t.css("height",e.normalHeight),n.css("height",e.normalInnerHeight),n.css("width",e.normalInnerWidth),n.css("min-width",e.normalInnerMinWidth),n.css("min-height",e.normalInnerMinHeight),e.options.width=e.uiDialog.width(),e.options.height=e.uiDialog.height()},t}(i);t.wijdialog=o,n.ui&&n.ui.dialog&&(n.extend(n.ui.dialog.overlay,{create:function(t){this.instances.length===0&&(setTimeout(function(){n.ui.dialog.overlay.instances.length&&n(document).bind(n.ui.dialog.overlay.events,function(e){if(n(e.target).zIndex()<n.ui.dialog.overlay.maxZ&&!n.contains(t.element[0],e.target))return!1})},1),n(document).bind("keydown.dialog-overlay",function(n){var r=e.getKeyCodeEnum();t.options.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===r.ESCAPE&&(t.close(n),n.preventDefault())}),n(window).bind("resize.dialog-overlay",n.ui.dialog.overlay.resize));var r=(this.oldInstances.pop()||n("<div></div>").addClass(t.options.wijCSS.overlay)).appendTo(document.body).css({width:this.width(),height:this.height()});return n.fn.bgiframe&&r.bgiframe(),this.instances.push(r),r},height:function(){var e,t;return n.browser.msie?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),t=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),e<t?n(window).height()+"px":e+"px"):n(document).height()+"px"},width:function(){var e,t;return n.browser.msie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),t=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),e<t?n(window).width()+"px":e+"px"):n(document).width()+"px"}}),o.prototype.options=n.extend(!0,{},e.wijmoWidget.prototype.options,n.ui.dialog.prototype.options,new s),o.prototype.disable=function(){return this._setOption("disabled",!0)},o.prototype.enable=function(){return this._setOption("disabled",!1)},n.wijmo.registerWidget(r,n.ui.dialog,o.prototype))})(e.dialog||(e.dialog={}));var t=e.dialog})(wijmo||(wijmo={}));