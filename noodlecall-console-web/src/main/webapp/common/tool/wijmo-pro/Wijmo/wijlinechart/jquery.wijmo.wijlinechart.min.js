var __extends=this.__extends||function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n},wijmo;(function(e){(function(e){var t=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype._create=function(){var t=this.options;this._handleChartStyles(),e.prototype._create.call(this),this.chartElement.addClass(t.wijCSS.lineChart),t.type==="area"&&this.chartElement.addClass(t.wijCSS.areaChart)},t.prototype.destroy=function(){var t=this.options;this.chartElement.removeClass(t.wijCSS.lineChart),t.type==="area"&&this.chartElement.removeClass(t.wijCSS.areaChart),e.prototype.destroy.call(this),this.aniPathsAttr&&this.aniPathsAttr.length&&($.each(this.aniPathsAttr,function(e,t){t=null}),this.aniPathsAttr=null)},t.prototype.getLinePath=function(e){var t=this.chartElement.data("fields"),n,r;if(t&&t.chartElements){n=t.chartElements;if(n.paths&&n.paths.length)return n.paths[e]}return r},t.prototype.getLineMarkers=function(e){var t=this.options,n=this.chartElement.data("fields"),r,i;if(t.seriesList&&t.seriesList[e].markers&&t.seriesList[e].markers.visible&&n&&n.chartElements){r=n.chartElements;if(r.markersSet&&r.markersSet.length)return r.markersSet[e]}return i},t.prototype._showSerieEles=function(e){var t=this.options,n;e.markers&&$.each(e.markers,function(e,t){var n=$(t.node).data("wijchartDataObj");if(n&&n.lineSeries&&n.lineSeries.markers&&!n.lineSeries.markers.visible)return!0;t.show()}),e.dcl&&$.each(e.dcl,function(e,n){t.showChartLabels&&n.show()}),e.path&&(n=$(e.path.node).data("wijchartDataObj"),n.visible&&(e.path.show(),e.path.shadow&&e.path.shadow.show(),e.path.area&&e.path.area.show(),e.path.tracker&&e.path.tracker.show()),$(e.path.node).data("wijchartDataObj")&&$(e.path.node).data("wijchartDataObj").virtualMarkers&&$.each($(e.path.node).data("wijchartDataObj").virtualMarkers,function(e,t){t.visible=!0}))},t.prototype._hideSerieEles=function(e){e.markers&&$.each(e.markers,function(e,t){t.hide()}),e.dcl&&$.each(e.dcl,function(e,t){t.hide()}),e.path&&(e.path.hide(),e.path.shadow&&e.path.shadow.hide(),e.path.area&&e.path.area.hide(),e.path.tracker&&e.path.tracker.hide(),$(e.path.node).data("wijchartDataObj")&&$(e.path.node).data("wijchartDataObj").virtualMarkers&&$.each($(e.path.node).data("wijchartDataObj").virtualMarkers,function(e,t){t.visible=!1}))},t.prototype._supportStacked=function(){return!0},t.prototype._indicatorLineShowing=function(t){e.prototype._indicatorLineShowing.call(this,t),$.each(t,function(e,t){t.marker&&t.marker.attr(t.markerHoverStyle)})},t.prototype._removeIndicatorStyles=function(e){$.each(e,function(e,t){t.marker&&(t.marker.attr(t.markerStyle),t.marker.transform("s1"))})},t.prototype._mouseDownInsidePlotArea=function(t,n){e.prototype._mouseDownInsidePlotArea.call(this,t,n),this._clearHoverState(!0)},t.prototype._mouseDown=function(t,n){e.prototype._mouseDown.call(this,t,n)},t.prototype._mouseUp=function(t,n){e.prototype._mouseUp.call(this,t,n)},t.prototype._mouseOver=function(t,n){if(!n||n.type!=="line"&&n.type!=="marker")return;if(this.indicatorLine)return;e.prototype._mouseOver.call(this,t,n),n.type==="marker"&&(n=n.lineSeries);if(n.path.removed)return;if(this.hoverLine!==n||this.hoverLine===null)this.isNewLine=!0,this.hoverLine&&(this.hoverLine.path.removed||(this.options.type==="line"&&this.hoverLine.lineStyle.fill&&delete this.hoverLine.lineStyle.fill,this.hoverLine.path.wijAttr(this.hoverLine.lineStyle),this.hoverPoint&&!this.hoverPoint.isSymbol&&(this.hoverPoint.marker.wijAttr(this.hoverPoint.markerStyle),this.hoverPoint.marker.transform("s1")))),n.lineHoverStyle&&n.path.wijAttr(n.lineHoverStyle),this.hoverLine=n,this.hoverPoint=null,this.hoverVirtualPoint=null},t.prototype._mouseOut=function(t,n){e.prototype._mouseOut.call(this,t,n)},t.prototype._mouseMove=function(t,n){e.prototype._mouseMove.call(this,t,n)},t.prototype._click=function(t,n){e.prototype._click.call(this,t,n)},t.prototype._mouseMoveInsidePlotArea=function(t,n){var r=this,i=this.tooltip,s=this.options.hint,o,u,a=0,f,l,c,h,p=null,d=null,v=null,m=s.title,g=s.content,y=$.isFunction(m),b=$.isFunction(g),w=0;i&&(v=i.getOptions());if(this.hoverLine&&!this.indicatorLine){this.isNewLine&&(s.enable&&i&&i.hide(),this.isNewLine=!1),o=this.hoverLine.lineMarkers,u=this.hoverLine.virtualMarkers,a=-1,f={x:0,y:0};if(o&&o.length){$.each(o,function(e,t){if(t.removed)return!0;var r=t.wijGetBBox(),i=r.x+r.width/2,s=Math.abs(i-n.left);if(e===0||s<w)w=s,a=e,f={x:i,y:r.y+r.height/2}});if(this.hoverPoint&&this.hoverPoint.index===a)return;if(a>-1){if(o[a].removed)return;l=$(o[a].node).data("wijchartDataObj"),l&&(this.hoverPoint&&!this.hoverPoint.isSymbol&&(this.hoverPoint.removed||(this.hoverPoint.marker.wijAttr(this.hoverPoint.markerStyle),this.hoverPoint.marker.transform("s1"))),l.isSymbol||l.marker.removed||l.marker.wijAttr(l.markerHoverStyle)),this.hoverPoint=l,this.hoverVirtualPoint=u[a]}}else{$.each(u,function(e,t){var r=Math.abs(t.x-n.left);if(e===0||r<w)w=r,a=e,f={x:t.x,y:t.y}});if(this.hoverVirtualPoint&&this.hoverVirtualPoint.index===a)return;a>-1&&(this.hoverPoint=null,this.hoverVirtualPoint=u[a])}if(i){d=this.hoverVirtualPoint,c=d.valX,h=d.valY;if(y||b)y&&(v.title=function(){var e={pointIndex:a,lineIndex:r.hoverLine.index,x:c,y:h,label:r.hoverLine.label,data:d,fmt:m},t=$.proxy(e.fmt,e),n=t();return n}),b&&(v.content=function(){var e={pointIndex:a,lineIndex:r.hoverLine.index,x:c,y:h,label:r.hoverLine.label,data:d,fmt:g},t=$.proxy(e.fmt,e),n=t();return n});p=$.extend({stroke:this.hoverLine.path.attr("stroke")},s.style),v.style.stroke=p.stroke,i.showAt(f)}}e.prototype._mouseMoveInsidePlotArea.call(this,t,n)},t.prototype._mouseMoveOutsidePlotArea=function(t,n){this._clearHoverState(!1),e.prototype._mouseMoveOutsidePlotArea.call(this,t,n)},t.prototype._clearHoverState=function(e){var t=this.tooltip,n=this.options.hint;n.enable&&t&&!e&&t.hide(),this.hoverLine&&(this.hoverLine.path.removed||(this.options.type==="line"&&this.hoverLine.lineStyle.fill&&delete this.hoverLine.lineStyle.fill,this.hoverLine.path.wijAttr(this.hoverLine.lineStyle),this.hoverPoint&&!this.hoverPoint.isSymbol&&(this.hoverPoint.marker.wijAttr(this.hoverPoint.markerStyle),this.hoverPoint.marker.transform("s1")))),this.hoverLine=null,this.hoverPoint=null,this.hoverVirtualPoint=null},t.prototype._paintLegendIcon=function(e,t,n,r,i,s,o,u,a,f){var l=this,c=this.options,h=l.canvas.path(Raphael.format("M{0},{1}L{2},{3}",e,t+r/2,e+n,t+r/2)),p;$(h.node).data("legendIndex",s).data("index",o),l.legendIcons.push(h),i&&h.attr($.extend(!0,{},i,{"stroke-width":c.legend.size.height})),$.wijraphael.addClass($(h.node),u);var d=a.markerStyle;d=$.extend({fill:i.stroke,stroke:i.stroke,opacity:1},d),i["stroke-dasharray"]&&h.attr({"stroke-width":1,"stroke-dasharray":i["stroke-dasharray"]});if(a.markers&&a.markers.visible){var v=a.markers.type;v||(v="circle"),p=this.canvas.paintMarker(v,e+n/2,t+r/2,3),$.wijraphael.addClass($(p.node),Raphael.format("{0} {1} {2}",c.wijCSS.legend,c.wijCSS.legendDot,c.wijCSS.canvasObject)),p.attr(d),$(p.node).data("index",o).data("legendIndex",s),this.legendDots.push(p)}return h},t.prototype._paintLegend=function(){var t=this.options,n=0,r=0,i=0,s=null,o=t.seriesList,u=t.seriesStyles,a=null,f=null,l=null,c=0,h=0,p=null,d=null,v=null;$.extend(!0,t,{legend:{size:{width:30,height:3}}}),e.prototype._paintLegend.call(this)},t.prototype._paintPlotArea=function(){var e=this.options,t;this.aniPathsAttr||(this.aniPathsAttr=[]),this.linechartRender=new r(this.chartElement,{bounds:this.canvasBounds,widgetName:this.widgetName,canvas:this.canvas,tooltip:this.tooltip,wijCSS:e.wijCSS,stacked:e.stacked,hole:e.hole,type:e.type,axis:e.axis,animation:e.animation,seriesTransition:e.seriesTransition,seriesList:e.seriesList,seriesStyles:e.seriesStyles,seriesHoverStyles:e.seriesHoverStyles,showChartLabels:e.showChartLabels,chartLabelStyle:e.chartLabelStyle,chartLabelFormatString:e.chartLabelFormatString,isXTime:this.axisInfo.x.isTime,isYTime:this.axisInfo.y.isTime||this.axisInfo.y[0].isTime,disabled:e.disabled,culture:this._getCulture(),hint:e.hint,aniPathsAttr:this.aniPathsAttr,chartLabelEles:this.chartLabelEles,mouseDown:$.proxy(this._mouseDown,this),mouseUp:$.proxy(this._mouseUp,this),mouseOver:$.proxy(this._mouseOver,this),mouseOut:$.proxy(this._mouseOut,this),mouseMove:$.proxy(this._mouseMove,this),click:$.proxy(this._click,this),widget:this,extremeValue:{txx:this.extremeValue.txx,txn:this.extremeValue.txn,tyx:this.extremeValue.y[0].tyx,tyn:this.extremeValue.y[0].tyn}}),this.linechartRender.render()},t}(e.wijchartcore);e.wijlinechart=t;var n=function(){function e(){this.initSelector=":jqmData(role='wijlinechart')",this.wijCSS={lineChart:"wijmo-wijlinechart",areaChart:"wijmo-wijareachart",lineLabel:"wijlinechart-label",lineElement:"wijlinechart",areaElement:"wijlinechart-area",lineTracker:"linetracker",canvasMarker:"wijchart-canvas-marker"},this.stacked=!1,this.hole=null,this.type="line",this.animation={enabled:!0,direction:"horizontal",duration:2e3,easing:"easeInCubic"},this.seriesTransition={enabled:!0,duration:2e3,easing:"easeInCubic"},this.mouseDown=null,this.mouseUp=null,this.mouseOver=null,this.mouseOut=null,this.mouseMove=null,this.click=null}return e}();t.prototype.options=$.extend(!0,{},e.wijchartcore.prototype.options,new n),$.wijmo.registerWidget("wijlinechart",t.prototype);var r=function(){function t(e,t){this.options=t,this.element=e}return t.prototype.render=function(){var e=this.element,t=this.options,n=t.wijCSS,r=t.bounds,i=t.widgetName,s=t.canvas,o=t.animation,u=t.seriesTransition,a=t.hint,f=t.tooltip,l=t.mouseDown,c=t.mouseUp,h=t.mouseOver,p=t.mouseOut,d=t.mouseMove,v=t.click,m=[],g=[],y=[],b=[],w=[],E=t.disabled,S=s.set(),x=t.aniPathsAttr,T=[],N,C=e.data("fields")||{},k=[],L=t.culture,A=t.widget,O=t.extremeValue,M={enable:!1,left:-10,top:-10,right:10,bottom:10};this.widget=A,this.renderLineChart(t,T,x,b,w,m,S,g,y,k,L),!t.axis.x.autoMax&&t.axis.x.max<O.txx&&(M.enable=!0,M.right=0),!t.axis.x.autoMin&&t.axis.x.min>O.txn&&(M.enable=!0,M.left=0),!t.axis.y.autoMax&&t.axis.y.max<O.tyx&&(M.enable=!0,M.top=0),!t.axis.y.autoMin&&t.axis.y.min>O.tyn&&(M.enable=!0,M.bottom=0),o.enabled||u.enabled?this.playAnimation(o,u,S,r,b,x,M):M.enable&&this.setClipRect(M,S,r),x.length=0,$.each(T,function(e,t){x.push(t)}),this.unbindLiveEvents(e,i,n),this.bindLiveEvents(e,s,r,i,l,c,h,p,d,v,E,a,y,f,n),N={paths:b,shadowPaths:w,markersSet:m,animationSet:S,symbols:g},C.chartElements||(C.chartElements={}),C.seriesEles=k,$.extend(!0,C.chartElements,N),e.data("fields",C)},t.prototype.setClipRect=function(e,t,n){var r=n.endX-n.startX-e.left+e.right,i=n.endY-n.startY-e.top+e.bottom;t.wijAttr("clip-rect",Raphael.format("{0} {1} {2} {3}",n.startX+e.left,n.startY+e.top,r,i))},t.prototype.playAnimation=function(e,t,n,r,i,s,o){var u=this,a=e.duration,f=e.easing;e.direction==="horizontal"?(s&&s.length&&t.enabled&&(a=t.duration,f=t.easing),this.playHAnimation(a,f,n,r,i,o)):(o.enable&&this.setClipRect(o,n,r),$.each(i,function(e,n){if(typeof n=="undefined"||n===null)return!0;s&&s.length>e&&t.enabled?(a=t.duration,f=t.easing,u.playVAnimation(n,s,e,a,f)):n.straight&&u.playVStraightAnimation(n,a,f)}))},t.prototype.playVAnimation=function(t,n,r,i,s){var o,u;t.shadow&&t.shadow.hide(),t.tracker&&t.tracker.hide(),o=n[r],o&&o.path&&(u=e.ChartUtil.getDiffAttrs(o.path,t.attr())),$.isEmptyObject(u)||(t.attr(o.path),t.wijAnimate(u,i,s,function(){t.shadow&&t.visible!==!1&&t.shadow.show(),t.tracker&&t.tracker.show()})),$.each(t.markers,function(t,n){var r=e.ChartUtil.getDiffAttrs(o.markers[t],n.attr());$.isEmptyObject(r)||(n.attr(o.markers[t]),n.wijAnimate(r,i,s))}),t.labels&&$.each(t.labels,function(t,n){var r=e.ChartUtil.getDiffAttrs(o.labels[t],n.attr()),u=o.labels[t];u&&u.text&&delete u.text,$.isEmptyObject(r)||(n.attr(u),n.wijAnimate(r,i,s))}),t.area&&(u=e.ChartUtil.getDiffAttrs(o.area,t.area.attr()),$.isEmptyObject(u)||(t.area.attr(o.area),t.area.wijAnimate(u,i,s)))},t.prototype.playVStraightAnimation=function(e,t,n){var r,i,s;e.shadow&&e.shadow.hide(),e.tracker&&e.tracker.hide(),r=e.straight,i=e.attr().path,e.attr({path:r}),e.wijAnimate({path:i},t,n,function(){e.shadow&&e.visible!==!1&&e.shadow.show(),e.tracker&&e.tracker.show()}),$.each(e.markers,function(e,r){if(r.straight){var i=r.attr().cy;r.attr({cy:r.straight}),r.wijAnimate({cy:i},t,n)}}),e.area&&(s=e.area,r=s.straight,i=s.attr().path,s.attr({path:r}),s.wijAnimate({path:i},t,n))},t.prototype.playHAnimation=function(e,t,n,r,i,s){$.each(i,function(e,t){t.tracker&&t.tracker.hide()});var o=s.enable,u=r.endX-r.startX-s.left+s.right,a=r.endY-r.startY-s.top+s.bottom;n.wijAttr("clip-rect",Raphael.format("{0} {1} 0 {2}",r.startX+s.left,r.startY+s.top,a)),n.wijAnimate({"clip-rect":Raphael.format("{0} {1} {2} {3}",r.startX+s.left,r.startY+s.top,u,a)},e,t,function(){this.tracker&&this.tracker.show();if(Raphael.vml&&!o){var e=null,t=null,n=this.node;n&&n.clipRect&&(e=this.attrs,delete e["clip-rect"],n.clipRect=null,t=$(n).parent(),t.before(n),t.remove(),this.attr(e),e.src&&e.src.length&&this.attr({src:e.src}))}})},t.prototype.renderLineChart=function(t,n,r,i,s,o,u,a,f,l,c){var h=this,p=t.wijCSS,d=t.bounds,v=t.canvas,m=t.stacked,g=t.hole,y=t.type,b=t.axis,w=t.animation,E=t.seriesTransition,S=!1,x=t.seriesList,T=t.seriesStyles,N=t.seriesHoverStyles,C=t.showChartLabels,k=t.chartLabelStyle,L=t.chartLabelFormatString,A=t.isXTime,O=t.isYTime,M=t.chartLabelEles,_,D,P,H,B,j,F=[],I=[],q,R,U,z,W;$.each(x,function(t,X){var V=[],J=[],K=[],Q,G,Y,Z,et,tt,nt=[];if(X.display==="exclude")return!0;tt=T[t],X=$.extend(!0,{display:"show",fitType:"line",markers:{visible:!1,type:"circle"},visible:!0},X),Q=X.data,G=$.extend({stroke:"black",opacity:1,fill:"none","stroke-linejoin":"round","stroke-linecap":"round"},tt),Z=X.markerStyle,Z=$.extend({fill:G.stroke,stroke:G.stroke,opacity:1,width:3},Z),Y=N[t],et=$.extend(!0,{},Y,{transform:"s1.5","stroke-width":1},x.markerHoverStyle),B=[].concat(Q.x),j=[].concat(Q.y),U=v.set(),R=[],H=X.fitType,z=!1,X.markers.symbol&&X.markers.symbol.length&&(z=!0),_=v.set();if(!r||r.length<=t||w.enabled&&!E.enabled)S=!0;S&&j.length>0&&(D=e.ChartUtil.getFirstValidListValue(j),O&&(D=$.toOADate(D)),P=e.ChartUtil.getLastValidListValue(j),O&&(P=$.toOADate(P))),W=h.processYValues(j,X.display,g,m,F),$.each(j,function(e,t){q=B[e],A&&(q=$.toOADate(q)),t=j[e];if(W[e].isHole){if(X.display==="excludeHole")return!0;if(!W[e].isValue)return!0}O&&(t=$.toOADate(t));if(q===undefined)return!1;R=h.renderPoint(d,v,K,R,U,V,u,_,J,M,L,S,D,P,q,t,Q.y[e],b,H,A,O,e,Z,et,X,z,C,a,B,j,W,X.display,m,nt,c,p)}),h.renderPath(v,d,X,i,s,f,Y,Z,et,U,o,u,R,n,K,G,k,V,J,_,t,y,I,m,nt,p),l.push({markers:U,path:i[i.length-1],shadowPath:s[s.length-1],dcl:_})}),$.each($.merge([],i).reverse(),function(e,t){t.toFront(),t.area&&t.area.toFront()}),$.each(i,function(e,t){t.tracker&&t.tracker.toFront()}),$.each(i,function(e,t){t.markers&&t.markers.toFront()})},t.prototype.renderPath=function(t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C){var k,L,A,O,M,_,D,P,H,B,j,F,I,q,R;k=t.path(p.join(" ")),k.straight=v.join(" "),e.ChartUtil.paintShadow(k,1,"#cccccc"),E===0&&(x.length=0,p.length>1?(_=p[1],D=p[p.length-2]):(_=n.startX,D=n.endX),$.merge(x,["L",_,n.endY,"L",D,n.endY])),P=t.path(p.join(" ")),k.tracker=P,m["stroke-width"]?H=10+parseFloat(m["stroke-width"]):H=10,P.attr({"stroke-width":H,stroke:"#C0C0C0",opacity:.01}),$.wijraphael.addClass($(P.node),Raphael.format("{0} {1} {2}",C.canvasObject,C.lineElement,C.lineTracker)),$(P.node).data("owner",$(k.node)),S==="area"?(m.fill&&m.fill!=="none"?(L=m.fill,delete m.fill):L=m.stroke,A=.5,O=1,m["fill-opacity"]&&m["fill-opacity"]!=="none"&&(A=m["fill-opacity"]),m.opacity&&m.opacity!=="none"&&(O=m.opacity),k.wijAttr(m),p.length>1?_=p[1]:_=n.startX,T?(p.push("V"),p.push(n.endY),p.push("H"),p.push(_),p.push("Z")):(I=Raphael.parsePathString(k.attr("path")),I&&I.length>0&&(p=[],$.each(I,function(e,t){$.each(t,function(e,t){p.push(t)}),t[0]==="M"&&(_=t[1]),e<I.length-1&&I[e+1][0]==="M"&&(p.push("V"),p.push(n.endY),p.push("H"),p.push(_),p.push("Z")),e===I.length-1&&(p.push("V"),p.push(n.endY),p.push("H"),p.push(_),p.push("Z"))}))),M=t.path(p.join(" ")),$.wijraphael.addClass($(M.node),C.areaElement),M.wijAttr({fill:L,opacity:O,"fill-opacity":A,stroke:"none"}),v.push("V"),v.push(n.endY),v.push("H"),v.push(_),v.push("Z"),M.straight=v.join(" "),k.area=M,h.push(M),d.push({path:$.extend(!0,{},k.attr()),area:$.extend(!0,{},M.attr()),markers:y,labels:b})):(R=$.extend(!0,{},m),R.fill&&delete R.fill,k.wijAttr(R),d.push({path:$.extend(!0,{},k.attr()),markers:y,labels:b})),k.markers=l,i.push(k),k.shadow&&(s[E]=k.shadow),h.push(k),o[E]={lineStyle:m,lineHoverStyle:u,markerStyle:a,markerHoverStyle:f},(!r.markers.visible||r.display==="hide")&&l.hide();if(!r.visible||r.display==="hide")k.hide(),k.shadow&&k.shadow.hide(),k.area&&k.area.hide(),k.visible=!1;r.markers.style&&l.attr(r.markers.style),l.toFront(),w.length&&(B=$.extend(!0,{},g),r.textStyle&&(B=$.extend(!0,B,r.textStyle)),w.attr(B),w.toFront(),k.labels=w),c[E]=l,r.index=E,r.type="line",r.path=k,r.lineMarkers=l,r.lineStyle=m,r.lineHoverStyle=u,r.virtualMarkers=N,$.wijraphael.addClass($(k.node),Raphael.format("{0} {1}",C.canvasObject,C.lineElement)),$(k.node).data("wijchartDataObj",r)},t.prototype.renderPoint=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H){var B=e.endX-e.startX,j=e.endY-e.startY,F=g.x.min,I=g.y.min,q=g.x.max,R=g.y.max,U=B/(q-F),z=j/(R-I),W,X,V,J=0,K,Q,G,Y,Z=T.markers.visible,et=this.widget,tt;return isNaN(d)||typeof d=="string"?V=E:V=d,J=e.startX+(V-F)*U,K=e.endY-(v-I)*z,O[E].x=J,O[E].y=K,c&&(Q=h+(p-h)/(q-F)*(V-F),Q=e.endY-(Q-I)*z,n.push(O[E].idx?"L":"M"),n.push(J),n.push(Q)),O[E].isHole?r:(r=this.getPathArrByFitType(r,y,E,A.length,e,L,A,J,K,b,w,d,v,U,z,F,I,O,M,_),C&&(Y=this.renderChartLabel(t,w,v,l,J,K,P,H),f.push(Y),u.push(Y),a.push($.extend(!0,{},Y.attr()))),Z&&(W=this.renderMarker(t,k,N,T.markers,E,J,K,S,H),X=W.dot,c&&(X.straight=Q)),G={},G.valX=L[E],G.valY=m,G.index=E,G.type="marker",G.lineSeries=T,G.x=J,G.y=K,G.markerStyle=S,G.markerHoverStyle=x,G.visible=!0,Z&&(G.marker=X,G.isSymbol=W.isSymbol,$(X.node).data("wijchartDataObj",G),i.push(X),s.push($.extend(!0,{},X.attr())),o.push(X)),et.dataPoints=et.dataPoints||{},et.pointXs=et.pointXs||[],tt=$.round(J,2),et.dataPoints[tt.toString()]||(et.dataPoints[tt.toString()]=[],et.pointXs.push(tt)),et.dataPoints[tt.toString()].push(G),D.push(G),r)},t.prototype.processYValues=function(t,n,r,i,s){var o=[],u=0,a=0;return $.each(t,function(f,l){u||(a=f);var c={isHole:!1,isValue:!0,idx:u,firstYIdx:a,x:0,y:0};u++,e.ChartUtil.isHolefunction(l,r)&&(i?t[f]=0:(c.isHole=!0,n==="excludeHole"?(u--,c.idx=0):(u=0,c.idx=0),!e.ChartUtil.isHolefunction(r,undefined)&&l===r?c.isValue=!0:c.isValue=!1)),o.push(c),i&&f<s.length&&(t[f]+=s[f])}),s.length=0,$.merge(s,t),o},t.prototype.renderMarker=function(e,t,n,r,i,s,o,u,a){var f,l=null,c=!1,h,p;return n&&(f=r.symbol,$.each(f,function(n,r){if(r.index===i)return l=e.image(r.url,s-r.width/2,o-r.height/2,r.width,r.height),t.push(l),c=!0,!1})),l===null&&(h=r.type,p=u.width,l=e.paintMarker(h,s,o,p),r.visible&&l.attr(u)),$.wijraphael.addClass($(l.node),Raphael.format("{0} {1} {2}",a.canvasObject,a.lineElement,a.canvasMarker)),{dot:l,isSymbol:c}},t.prototype.renderChartLabel=function(e,t,n,r,i,s,o,u){var a,f,l,c=this.options.widget;return a=t?$.fromOADate(n):n,r&&r.length&&(a=Globalize.format(a,r,o)),f=c._text.call(c,i,s,a),$.wijraphael.addClass($(f.node),u.lineLabel),l=f.wijGetBBox(),f.transform(Raphael.format("...T{0},{1}",0,-l.height)),f},t.prototype.getAnchors=function(e,t,n,r,i,s){var o=(n-e)/2,u=(i-n)/2,a=Math.atan((n-e)/Math.abs(r-t)),f=Math.atan((i-n)/Math.abs(r-s)),l=0,c=0,h=0,p=0,d=0;return a=t<r?Math.PI-a:a,f=s<r?Math.PI-f:f,l=Math.PI/2-(a+f)%(Math.PI*2)/2,c=o*Math.sin(l+a),h=o*Math.cos(l+a),p=u*Math.sin(l+f),d=u*Math.cos(l+f),{x1:n-c,y1:r+h,x2:n+p,y2:r+d}},t.prototype.getPathArrByFitType=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b){var w=null,E=0,S=0,x=0,T=0,N=null,C=null,k=g[n],L=!1,A=k.idx,O,M=n-1,_=n+1;if(y==="excludeHole"&&!b){if(n>0&&n<r-1){_=-1,M=-1;for(O=n+1;O<r;O++){L=!0;if(g[O].isHole)continue;_=O,L=!1;break}for(O=n-1;O>=0;O--){if(g[O].isHole)continue;M=O;break}M>-1&&(x=g[M].x,E=g[M].y)}}else n<r-1&&(L=g[_].isHole),n>0&&n<r-1&&(x=g[M].x,E=g[M].y);return b&&(t="line"),t==="line"?e=e.concat([A?"L":"M",u,a]):t==="spline"?A?A&&n<r-1&&!L?(w=o[_],l&&(w=$.toOADate(w)),S=i.endY-(w-m)*d,isNaN(c)||typeof c=="string"?T=i.startX+(_-v)*p:(N=s[_],f&&(N=$.toOADate(N)),T=i.startX+(N-v)*p),C=this.getAnchors(x,E,u,a,T,S),e=e.concat([C.x1,C.y1,u,a,C.x2,C.y2])):e=e.concat([u,a,u,a]):n===r-1?e=e.concat(["M",u,a]):L?e=e.concat(["M",u,a]):e=e.concat(["M",u,a,"C",u,a]):t==="bezier"&&(A?n<r-1&&g[n+1].isHole&&A%2===1||n===r-1&&A%2===1?e=e.concat(["Q",u,a,u,a]):A%2===0?e=e.concat([u,a]):e=e.concat(["Q",u,a]):e=e.concat(["M",u,a])),e},t.prototype.bindLiveEvents=function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d){var v="",m={element:e,mousedown:function(t){if(l)return;var n=$(t.target),r,s=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(d.canvasMarker)?(s=r.lineSeries,s.markers.visible?i.call(e,t,r):i.call(e,t,s)):i.call(e,t,r)},mouseup:function(t){if(l)return;var n=$(t.target),r,i=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(d.canvasMarker)?(i=r.lineSeries,i.markers.visible?s.call(e,t,r):s.call(e,t,i)):s.call(e,t,r)},mouseover:function(t){if(l)return;var n=$(t.target),r,i=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(d.canvasMarker)?(i=r.lineSeries,i.markers.visible?o.call(e,t,r):o.call(e,t,i)):o.call(e,t,r)},mouseout:function(t){if(l)return;var n=$(t.target),r,i=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(d.canvasMarker)?(i=r.lineSeries,i.markers.visible?u.call(e,t,r):u.call(e,t,i)):u.call(e,t,r)},mousemove:function(t){if(l)return;var n=$(t.target),r,i=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(d.canvasMarker)?(i=r.lineSeries,i.markers.visible?a.call(e,t,r):a.call(e,t,i)):a.call(e,t,r)},click:function(t){if(l)return;var n=$(t.target),r,i=null;n.data("owner")&&(n=n.data("owner")),r=n.data("wijchartDataObj"),n.hasClass(d.canvasMarker)?(i=r.lineSeries,i.markers.visible?f.call(e,t,r):f.call(e,t,i)):f.call(e,t,r)}};$.support.isTouchEnabled&&$.support.isTouchEnabled()&&(v="wij"),e.on(v+"mousedown."+r,"."+d.lineElement,$.proxy(m.mousedown,m)).on(v+"mouseup."+r,"."+d.lineElement,$.proxy(m.mouseup,m)).on(v+"mouseover."+r,"."+d.lineElement,$.proxy(m.mouseover,m)).on(v+"mouseout."+r,"."+d.lineElement,$.proxy(m.mouseout,m)).on(v+"mousemove."+r,"."+d.lineElement,$.proxy(m.mousemove,m)).on(v+"click."+r,"."+d.lineElement,$.proxy(m.click,m))},t.prototype.unbindLiveEvents=function(e,t,n){e.off("."+t,"."+n.lineElement)},t}();e.LineChartRender=r})(e.chart||(e.chart={}));var t=e.chart})(wijmo||(wijmo={}));